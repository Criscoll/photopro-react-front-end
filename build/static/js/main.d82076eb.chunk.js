(this["webpackJsonpphotopro-app"]=this["webpackJsonpphotopro-app"]||[]).push([[0],Array(93).concat([function(e,t,a){},function(e,t,a){},function(e,t,a){},,,,,function(e,t,a){e.exports=a.p+"static/media/logo-new.6654b17d.png"},,,,,,function(e,t,a){e.exports=a.p+"static/media/1.d5557220.jpg"},function(e,t,a){e.exports=a.p+"static/media/2.bb17d48f.jpg"},function(e,t,a){e.exports=a.p+"static/media/3.6f8a47e0.jpg"},function(e,t,a){e.exports=a.p+"static/media/4.8c1b91ae.jpg"},function(e,t,a){e.exports=a.p+"static/media/5.e40cb402.jpg"},function(e,t,a){e.exports=a.p+"static/media/6.eaa61dac.jpg"},function(e,t,a){e.exports=a.p+"static/media/7.3ddaa75f.jpg"},function(e,t,a){e.exports=a.p+"static/media/user-background.4163fbe9.jpg"},,,,,,,,,,,,function(e,t,a){e.exports=a(197)},,,,,,,,,,,,,,,,,,,,,,function(e,t,a){},,,,,function(e,t,a){},,function(e,t,a){},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),o=a(6),c=a.n(o);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var r=a(16),i=a(1),s=a(3),u=a.n(s),m=(a(147),a(17)),d=a(230),p=a(116),g=a(239),h=a(232),f=a(102),b=a.n(f),E=a(227),O=a(97),v=a.n(O);function j(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),a=t[0],o=t[1],c=Object(n.useState)(null),r=Object(i.a)(c,2),s=r[0],m=r[1],d=Boolean(s);console.log(a);var h=function(){m(null)},f=function(){console.log("clear notifications");u()({url:"http://localhost:5000/clear_notifications",params:{}}).then((function(e){console.log(e)})),o([])};return l.a.createElement("div",null,l.a.createElement(E.a,{"aria-label":"more","aria-controls":"long-menu","aria-haspopup":"true",onClick:function(e){m(e.currentTarget),u()({url:"http://localhost:5000/fetch_notification",params:{}}).then((function(e){console.log(e),e.data.result&&(console.log("setting notifications"),o(e.data.result))}))}},l.a.createElement(v.a,{style:{color:"rgba(224, 224, 224, 0.74)"}})),l.a.createElement(p.a,{id:"long-menu",anchorEl:s,keepMounted:!0,open:d,onClose:h,PaperProps:{style:{maxHeight:270,width:"50ch"}}},a.length>0?a.map((function(e,t){var a=null;return a="like"===e.type?"@".concat(e.sender," liked your post - '").concat(e.image_id,"'"):"comment"===e.type?"@".concat(e.sender," commented on your post - '").concat(e.image_id,"'"):"posted"===e.type?"@".concat(e.sender," has uploaded a new post - '").concat(e.image_id,"'"):"purchased"===e.type?"@".concat(e.sender," has purchased your photo - '").concat(e.image_id,"'"):"@".concat(e.sender," started following you"),0===t?l.a.createElement("div",{key:t},l.a.createElement(g.a,{key:t,onClick:f,style:{fontWeight:"bold"}},"Clear Notifications"),l.a.createElement(g.a,{key:t+1,onClick:h},l.a.createElement("div",null,a))):l.a.createElement(g.a,{key:t+1,onClick:h},l.a.createElement("div",null,a))})):l.a.createElement(g.a,{onClick:h},"No Notifications at this time")))}var k=a(100),C=a.n(k),S=(a(152),a(234));function _(e){var t=Object(n.useState)(""),a=Object(i.a)(t,2),o=a[0],r=a[1],s=Object(n.useState)(""),m=Object(i.a)(s,2),p=m[0],g=m[1],h=Object(n.useState)(""),f=Object(i.a)(h,2),b=f[0],E=f[1],O=Object(n.useState)(!1),v=Object(i.a)(O,2),j=v[0],k=v[1],C=Object(n.useState)(!0),_=Object(i.a)(C,2),y=_[0],I=_[1],N=Object(n.useState)(!1),P=Object(i.a)(N,2),w=P[0],M=P[1],T=Object(n.useState)(!1),F=Object(i.a)(T,2),x=F[0],D=F[1],L=Object(n.useState)(!1),R=Object(i.a)(L,2),B=R[0],V=R[1],A=Object(n.useState)(null),z=Object(i.a)(A,2),q=z[0],G=z[1],U=Object(n.useState)(""),W=Object(i.a)(U,2),Y=W[0],$=W[1],H=Object(n.useState)(""),J=Object(i.a)(H,2),Q=J[0],K=J[1],X=Object(n.useState)(""),Z=Object(i.a)(X,2),ee=Z[0],te=Z[1],ae=Object(n.useState)(!1),ne=Object(i.a)(ae,2),le=ne[0],oe=ne[1],ce=function(e){return e.length>10&&e.length<50&&e.includes("@")&&e.includes(".com")?(k(!1),g(""),!0):(g("Email must be entered and include an @ and .com"),k(!0),!1)};return e.openForgotPasswordModal?c.a.createPortal(l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"overlayStyles"}),l.a.createElement("div",{className:"forgotPasswordModal",onClick:function(e){e.stopPropagation()}},y?l.a.createElement(l.a.Fragment,null,l.a.createElement("h1",null,"Forgot Password"),l.a.createElement("h3",null,"If you forgot your password, you can reset it here."),l.a.createElement("h3",null,"Please enter your email and you will receive an email with further instructions."),l.a.createElement("h2",null,"Email"),l.a.createElement("div",null,l.a.createElement(S.a,{required:!0,error:j,helperText:p,onChange:function(e){r(e.target.value),ce(e.target.value)},id:"outlined-required",label:"Required",defaultValue:e.oldTitle,variant:"outlined"})),l.a.createElement("h3",null,le&&"Loading..."),l.a.createElement("div",null,l.a.createElement(d.a,{variant:"contained",color:"primary",size:"large",onClick:function(){oe(!0),u()({method:"POST",url:"http://localhost:5000/forgot_password_get_change_password_link",params:{email:o}}).then((function(e){!1!==e.data.result&&(console.log(e),E(e.data.result),I(!1),M(!0)),oe(!1)}))}},"SEND EMAIL")),l.a.createElement("div",null,l.a.createElement(d.a,{variant:"contained",color:"default",size:"large",onClick:function(){e.setOpenForgotPasswordModal(!1)}},"Cancel"))):null,w?l.a.createElement(l.a.Fragment,null,l.a.createElement("h1",null,"Verify that it's you"),l.a.createElement("h3",null,"An email with a verification code was just sent to ",o),l.a.createElement("h2",null,"Enter code"),l.a.createElement("div",null,l.a.createElement(S.a,{required:!0,onChange:function(e){$(e.target.value)},id:"outlined-required",label:"Required",defaultValue:e.oldTitle,variant:"outlined"})),l.a.createElement("div",null,l.a.createElement(d.a,{variant:"contained",color:"primary",size:"large",onClick:function(e){e.stopPropagation(),Y===b?(console.log("code is the same!"),G(!0),M(!1),D(!0)):(console.log("code is the same!"),G(!1))}},"Submit"))):null,x?l.a.createElement(l.a.Fragment,null,l.a.createElement("h1",null,"Code is verified!"),l.a.createElement("h2",null,"Now, enter your new password"),l.a.createElement("h2",null,"Email"),l.a.createElement("div",null,l.a.createElement(S.a,{required:!0,onChange:function(e){K(e.target.value),ce(e.target.value)},id:"outlined-required",label:"Required",defaultValue:e.oldTitle,variant:"outlined"})),l.a.createElement("h2",null,"New Password"),l.a.createElement("div",null,l.a.createElement(S.a,{required:!0,type:"password",onChange:function(e){te(e.target.value)},id:"outlined-required",label:"Required",defaultValue:e.oldTitle,variant:"outlined"})),l.a.createElement("div",null,l.a.createElement(d.a,{variant:"contained",type:"password",color:"primary",size:"large",onClick:function(){u()({method:"POST",url:"http://localhost:5000/reset_password",params:{email:Q,new_password:ee}}).then((function(e){!1!==e.data.result&&(console.log(e),D(!1),V(!0))}))}},"Submit"))):null,B?l.a.createElement(l.a.Fragment,null,l.a.createElement("h1",{style:{color:"grey"}},"Your password is successfully updated!"),l.a.createElement("h2",null,"You can now log in with your new password")):null,!1===q?l.a.createElement("h2",{style:{color:"red"}},"Incorrect Code"):null)),document.getElementById("toolbarPortal")):null}var y=a(14),I=a.n(y),N=a(23),P=(a(154),a(231)),w=a(240),M=a(238),T=a(236);function F(e){var t=Object(n.useState)(""),a=Object(i.a)(t,2),o=a[0],r=a[1],s=Object(n.useState)(""),d=Object(i.a)(s,2),p=d[0],g=d[1],h=Object(n.useState)(!1),f=Object(i.a)(h,2),b=f[0],E=f[1],O=Object(m.g)();function v(){return(v=Object(N.a)(I.a.mark((function e(t){var a;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,u.a.get("http://localhost:5000/login",{params:{email:o,password:p}});case 3:(a=e.sent).data.result?(localStorage.setItem("userLoggedIn",!0),localStorage.setItem("userID",a.data.user_id),O.push("/"),O.go(0)):E(!0);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return e.openLoginModal?c.a.createPortal(l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"overlayStyles"}),l.a.createElement("div",{className:"loginModal",onClick:function(e){e.stopPropagation()}},l.a.createElement("div",{className:"login-wrapper"},l.a.createElement("h1",null,"Login"),l.a.createElement("form",{onSubmit:function(e){return v.apply(this,arguments)}},l.a.createElement(P.a,{controlId:"email",bsSize:"large"},l.a.createElement("div",null,l.a.createElement(w.a,null,"Email")),l.a.createElement(M.a,{autoFocus:!0,type:"email",value:o,onChange:function(e){return r(e.target.value)}})),l.a.createElement(P.a,{controlId:"password",bsSize:"large"},l.a.createElement("div",null,l.a.createElement(w.a,null,"Password")),l.a.createElement(M.a,{value:p,onChange:function(e){return g(e.target.value)},type:"password"})),l.a.createElement("div",{className:"login-button"},l.a.createElement(T.a,{block:!0,bsSize:"large",disabled:!(o.length>0&&o.length<50)||!(p.length>=8&&p.length<16),type:"submit"},"Login"))),l.a.createElement(T.a,{block:!0,bsSize:"large",onClick:function(){e.setForgotPasswordModalIsOpen(!0),e.setOpenLoginModal(!1)}},"Forgot Password"),l.a.createElement("div",null,l.a.createElement(T.a,{block:!0,bsSize:"large",type:"submit",onClick:function(){e.setOpenLoginModal(!1)}},"Cancel")),b?l.a.createElement("p",{style:{color:"red"}},"Incorrect email or password"):l.a.createElement("p",null)))),document.getElementById("toolbarPortal")):null}a(159);function x(e){var t=Object(n.useState)(""),a=Object(i.a)(t,2),o=a[0],c=a[1],r=Object(n.useState)(""),s=Object(i.a)(r,2),u=s[0],m=s[1],d=Object(n.useState)(!1),p=Object(i.a)(d,2),g=p[0],h=p[1],f=Object(n.useState)(!0),b=Object(i.a)(f,2),E=b[0],O=b[1],v=e.submitFormClicked;Object(n.useEffect)((function(){O(!1)}),[]),Object(n.useEffect)((function(){if(!1===E){var t=j(o);e.setEmailValidated([t,o])}}),[v]);var j=function(e){return e.length>10&&e.length<50&&e.includes("@")&&e.includes(".com")?(h(!1),m(""),!0):(m("Email must be entered and include an @ and .com"),h(!0),!1)};return l.a.createElement(l.a.Fragment,null,l.a.createElement(S.a,{required:!0,error:g,helperText:u,onChange:function(e){c(e.target.value),j(e.target.value)},label:"Email",InputLabelProps:{shrink:!0}}))}function D(e){var t=Object(n.useState)(""),a=Object(i.a)(t,2),o=a[0],c=a[1],r=Object(n.useState)(""),s=Object(i.a)(r,2),u=s[0],m=s[1],d=Object(n.useState)(!1),p=Object(i.a)(d,2),g=p[0],h=p[1],f=Object(n.useState)(!0),b=Object(i.a)(f,2),E=b[0],O=b[1],v=e.submitFormClicked;Object(n.useEffect)((function(){O(!1)}),[]),Object(n.useEffect)((function(){if(!1===E){var t=j(o);e.setFirstNameValidated([t,o])}}),[v]);var j=function(e){return e.length>0?(h(!1),m(""),!0):(m("First name must be included"),h(!0),!1)};return l.a.createElement(l.a.Fragment,null,l.a.createElement(S.a,{required:!0,error:g,helperText:u,onChange:function(e){c(e.target.value),j(e.target.value)},label:"First name",InputLabelProps:{shrink:!0}}))}function L(e){var t=Object(n.useState)(""),a=Object(i.a)(t,2),o=a[0],c=a[1],r=Object(n.useState)(""),s=Object(i.a)(r,2),u=s[0],m=s[1],d=Object(n.useState)(!1),p=Object(i.a)(d,2),g=p[0],h=p[1],f=Object(n.useState)(!0),b=Object(i.a)(f,2),E=b[0],O=b[1],v=e.submitFormClicked;Object(n.useEffect)((function(){O(!1)}),[]),Object(n.useEffect)((function(){if(!1===E){var t=j(o);e.setLastNameValidated([t,o])}}),[v]);var j=function(e){return e.length>0?(h(!1),m(""),!0):(m("Last name must be included"),h(!0),!1)};return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",null,l.a.createElement(S.a,{required:!0,error:g,helperText:u,onChange:function(e){c(e.target.value),j(e.target.value)},label:"Last name",InputLabelProps:{shrink:!0}})))}function R(e){var t=Object(n.useState)(""),a=Object(i.a)(t,2),o=a[0],c=a[1],r=Object(n.useState)(""),s=Object(i.a)(r,2),u=s[0],m=s[1],d=Object(n.useState)(!1),p=Object(i.a)(d,2),g=p[0],h=p[1],f=Object(n.useState)(!0),b=Object(i.a)(f,2),E=b[0],O=b[1],v=e.submitFormClicked;Object(n.useEffect)((function(){O(!1)}),[]),Object(n.useEffect)((function(){if(!1===E){var t=j(o);e.setPasswordValidated([t,o])}}),[v]);var j=function(e){return e.length>=8&&e.length<16?(h(!1),m(""),!0):(m("Password must be between 8 and 16 characters long"),h(!0),!1)};return l.a.createElement(l.a.Fragment,null,l.a.createElement(S.a,{type:"password",required:!0,error:g,helperText:u,onChange:function(e){c(e.target.value),j(e.target.value)},label:"Password",InputLabelProps:{shrink:!0}}))}function B(e){var t=Object(n.useState)(""),a=Object(i.a)(t,2),o=a[0],c=a[1],r=Object(n.useState)(""),s=Object(i.a)(r,2),u=s[0],m=s[1],d=Object(n.useState)(!1),p=Object(i.a)(d,2),g=p[0],h=p[1],f=Object(n.useState)(!0),b=Object(i.a)(f,2),E=b[0],O=b[1],v=e.submitFormClicked;Object(n.useEffect)((function(){O(!1)}),[]),Object(n.useEffect)((function(){if(!1===E){var t=j(o);e.setUsernameValidated([t,o])}}),[v]);var j=function(e){return e.length>0&&e.length<32?(h(!1),m(""),!0):(m("Username must be between 0 and 32 characters long "),h(!0),!1)};return l.a.createElement(l.a.Fragment,null,l.a.createElement(S.a,{required:!0,error:g,helperText:u,onChange:function(e){c(e.target.value),j(e.target.value)},label:"Username",InputLabelProps:{shrink:!0}}))}function V(e){var t=Object(n.useState)(!1),a=Object(i.a)(t,2),o=a[0],r=a[1],s=Object(n.useState)([!1,""]),m=Object(i.a)(s,2),p=m[0],g=m[1],h=Object(n.useState)([!1,""]),f=Object(i.a)(h,2),b=f[0],E=f[1],O=Object(n.useState)([!1,""]),v=Object(i.a)(O,2),j=v[0],k=v[1],C=Object(n.useState)([!1,""]),_=Object(i.a)(C,2),y=_[0],I=_[1],N=Object(n.useState)([!1,""]),P=Object(i.a)(N,2),w=P[0],M=P[1],T=Object(n.useState)(null),F=Object(i.a)(T,2),V=F[0],A=F[1],z=Object(n.useState)(null),q=Object(i.a)(z,2),G=q[0],U=q[1],W=Object(n.useState)(null),Y=Object(i.a)(W,2),$=Y[0],H=Y[1],J=Object(n.useState)(null),Q=Object(i.a)(J,2),K=Q[0],X=Q[1],Z=Object(n.useState)(!1),ee=Object(i.a)(Z,2),te=ee[0],ae=ee[1],ne=Object(n.useState)(!1),le=Object(i.a)(ne,2),oe=le[0],ce=le[1];Object(n.useEffect)((function(){p[0]&&b[0]&&j[0]&&y[0]&&w[0]&&(ce(!0),u()({method:"POST",url:"http://localhost:5000/verify_email",params:{email:j[1]}}).then((function(e){console.log(e),e.data.result?A(e.data.result):A(!1),ce(!1)})))}),[p,b,j,y,w]);return e.openSignupModal?c.a.createPortal(l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"overlayStyles"}),l.a.createElement("div",{className:"signupModal",onClick:function(e){e.stopPropagation()}},null===V?l.a.createElement(l.a.Fragment,null,l.a.createElement("h1",null,"Join PhotoPro"),l.a.createElement(D,{submitFormClicked:o,setFirstNameValidated:g}),l.a.createElement(L,{submitFormClicked:o,setLastNameValidated:E}),l.a.createElement(x,{submitFormClicked:o,setEmailValidated:k}),l.a.createElement(B,{submitFormClicked:o,setUsernameValidated:M}),l.a.createElement(R,{submitFormClicked:o,setPasswordValidated:I}),l.a.createElement("h3",{style:{color:"grey"}},oe&&"Loading..."),l.a.createElement("div",{className:"register-button"},l.a.createElement(d.a,{variant:"outlined",color:"primary",block:!0,bsSize:"large",onClick:function(){r(!o)}},"Confirm Details"))):null,!1===V?l.a.createElement("h2",{style:{color:"red"}},"Invalid email provided"):null,null!==V&&!0!==K?l.a.createElement(l.a.Fragment,null,l.a.createElement("div",null,l.a.createElement("h1",{style:{color:"grey"}},"Please verify your email "),l.a.createElement("h2",null,"Enter the code we've just sent to ",j[1],":"),l.a.createElement("div",{style:{marginBottom:"5%"}},l.a.createElement(S.a,{required:!0,onChange:function(e){U(e.target.value)},label:"Code",InputLabelProps:{shrink:!0}})),l.a.createElement("h3",{style:{color:"grey"}},te&&"Loading..."),l.a.createElement("div",null,l.a.createElement(d.a,{variant:"contained",color:"primary",size:"large",onClick:function(){V===G?(H(!0),ae(!0),u()({method:"POST",url:"http://localhost:5000/create_user",params:{email:j[1],password:y[1],first:p[1],last:b[1],username:w[1]}}).then((function(e){console.log(e),e.data.result&&X(!0),ae(!1)}))):H(!1)}},"Confirm Code")))):null,!1===$?l.a.createElement("h2",null,"Incorrect code, try again."):null,!0===K?l.a.createElement(l.a.Fragment,null,l.a.createElement("h1",{style:{color:"grey"}},"Your email is verified, welcome to PhotoPro!"),l.a.createElement("h2",null," Sign in with your details.")):null)),document.getElementById("toolbarPortal")):null}a(160);var A=Object(h.a)((function(e){return{root:{"& .MuiTextField-root":{margin:e.spacing(1),width:"ch"}}}}));function z(e){var t=Object(n.useState)(""),a=Object(i.a)(t,2),o=a[0],r=a[1],s=Object(n.useState)(""),p=Object(i.a)(s,2),g=p[0],h=p[1],f=Object(n.useState)(!0),b=Object(i.a)(f,2),E=b[0],O=b[1],v=Object(n.useState)(""),j=Object(i.a)(v,2),k=j[0],C=j[1],_=Object(m.g)(),y=A();return e.openDeleteAccountModal?c.a.createPortal(l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"overlay-styles"}),l.a.createElement("div",{className:"confirmation-modal",onClick:function(e){return e.stopPropagation()}},l.a.createElement("h1",null,"Are you sure you want to delete your account?"),l.a.createElement("h3",null,"Deleting your account is permanent and will remove all content including uploaded and purchased photos, collections and comments."),E?l.a.createElement(l.a.Fragment,null,l.a.createElement(d.a,{variant:"contained",color:"secondary",onClick:function(){console.log("deleteButtonClicked"),O(!1)}},"Yes, delete"),l.a.createElement(d.a,{variant:"contained",color:"primary",onClick:function(){e.setOpenDeleteAccountModal(!1)}},"No, don't delete")):null,E?null:l.a.createElement(l.a.Fragment,null,l.a.createElement("form",{className:y.root,noValidate:!0,autoComplete:"off"},l.a.createElement("div",{className:"cart-details-grid"}),l.a.createElement("h2",null,"Email"),l.a.createElement("div",null,l.a.createElement(S.a,{required:!0,onChange:function(e){r(e.target.value)},id:"outlined-required",label:"Required",defaultValue:e.oldTitle,variant:"outlined"})),l.a.createElement("h2",null,"Password"),l.a.createElement("div",{onClick:function(e){return e.stopPropagation()}},l.a.createElement(S.a,{required:!0,onChange:function(e){h(e.target.value)},id:"outlined-required",label:"Required",defaultValue:e.oldTitle,variant:"outlined",type:"password"})),l.a.createElement("div",null,l.a.createElement(d.a,{variant:"contained",color:"secondary",size:"large",onClick:function(){u()({method:"POST",url:"http://localhost:5000/delete_user",params:{email:o,password:g}}).then((function(e){console.log(e),!1!==e.data.result?(localStorage.clear(),_.push("/"),_.go(0)):C("error")})),console.log(o),console.log(g)}},"CONFIRM")),l.a.createElement("div",null,l.a.createElement(d.a,{variant:"contained",color:"primary",size:"large",onClick:function(){e.setOpenDeleteAccountModal(!1)}},"Cancel")),"error"===k?l.a.createElement("h2",{style:{color:"red"}},"Incorrect Email or Password"):null)))),document.getElementById("toolbarPortal")):null}var q=Object(h.a)((function(e){return{root:{border:"3px solid red",margin:"auto"},button:{color:"rgb(83, 85, 89)"}}}));var G=function(){var e=Object(m.g)(),t=q(),a=localStorage.getItem("userLoggedIn"),o=Object(n.useState)(""),c=Object(i.a)(o,2),r=c[0],s=c[1],h=Object(n.useState)(null),f=Object(i.a)(h,2),E=f[0],O=f[1],v=Object(n.useState)(!1),k=Object(i.a)(v,2),S=k[0],y=k[1],I=Object(n.useState)(!1),N=Object(i.a)(I,2),P=N[0],w=N[1],M=Object(n.useState)(!1),T=Object(i.a)(M,2),x=T[0],D=T[1],L=Object(n.useState)(!1),R=Object(i.a)(L,2),B=R[0],A=R[1];Object(n.useEffect)((function(){u()({url:"http://localhost:5000/get_user_username",params:{user_id:localStorage.getItem("userID")}}).then((function(e){e.data.result&&(console.log(e),s(e.data.result))}))}),[]);var G,U=function(){O(null)};return console.log(),G="true"===a?l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"flex-container-buttons-2"},l.a.createElement(d.a,{variant:"outlined",className:t.button,size:"small",onClick:function(){e.push("/recommendations")}},"Discovery"),l.a.createElement(d.a,{variant:"outlined",className:t.button,size:"small",onClick:function(){var t=localStorage.getItem("userID");console.log("In toolbar the userID = ".concat(t)),e.push({pathname:"/collections/".concat(t),state:{uploaderID:t}})}},"Collections"),l.a.createElement(d.a,{variant:"outlined",className:t.button,size:"small",onClick:function(){e.push("/shopping-cart")}},"My Cart"),l.a.createElement(d.a,{variant:"outlined",size:"large",className:t.button,"aria-controls":"simple-menu","aria-haspopup":"true",onClick:function(e){O(e.currentTarget)}},"@",r),l.a.createElement(p.a,{id:"simple-menu",anchorEl:E,keepMounted:!0,open:Boolean(E),onClose:U},l.a.createElement(g.a,{onClick:function(){var t=localStorage.getItem("userID");console.log("In toolbar the userID = ".concat(t)),e.push({pathname:"/profile/".concat(t),state:{uploaderID:t}})}},"Profile"),l.a.createElement(g.a,{onClick:function(){e.push("/my-purchases")}},"My Purchases"),l.a.createElement(g.a,{onClick:function(){e.push("/changepassword")}},"Change Password"),l.a.createElement(g.a,{onClick:function(){A(!0),U()}},"Delete My Account"),l.a.createElement(g.a,{onClick:function(){localStorage.clear(),e.push("/"),e.go(0)}},"Logout")),l.a.createElement(j,null)),l.a.createElement("div",{className:"toolbar-left"},l.a.createElement(d.a,{variant:"outlined",size:"large",onClick:function(){e.push("/uploadphoto")},color:"primary",className:t.button,startIcon:l.a.createElement(b.a,null)},"Upload Photo"))):l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"toolbar-left-placeholder"}),l.a.createElement("div",{className:"flex-container-buttons-1"},l.a.createElement(d.a,{variant:"outlined",size:"large",className:t.button,onClick:function(){y(!0)}},"Sign in"),l.a.createElement(d.a,{variant:"outlined",size:"large",className:t.button,onClick:function(){D(!0)}},"Getting Started"))),l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"flex-container-toolbar"},l.a.createElement("div",{className:"logo"},l.a.createElement("img",{className:"logo",src:C.a,alt:"Logo",onClick:function(){e.push("/"),e.go(0)}})),G,S?l.a.createElement("div",{className:"toolbar-modal-wrapper",onClick:function(){y(!1)}},l.a.createElement(F,{openLoginModal:!0,setOpenLoginModal:y,setForgotPasswordModalIsOpen:w})):null,P?l.a.createElement("div",{className:"toolbar-modal-wrapper",onClick:function(){w(!1)}},l.a.createElement(_,{openForgotPasswordModal:!0,setOpenForgotPasswordModal:w})):null,x?l.a.createElement("div",{className:"toolbar-modal-wrapper",onClick:function(){D(!1)}},l.a.createElement(V,{openSignupModal:!0,setOpenSignupModal:D})):null,B?l.a.createElement("div",{className:"toolbar-modal-wrapper",onClick:function(){A(!1)}},l.a.createElement(z,{openDeleteAccountModal:!0,setOpenDeleteAccountModal:A})):null))},U=(a(93),a(32)),W=(a(94),a(45)),Y=a(46),$=a(22),H=a(51),J=a(50),Q=(a(161),a(7)),K=a(47),X=a.n(K),Z=a(48),ee=a.n(Z),te=a(68),ae=a.n(te),ne=a(104),le=a.n(ne),oe=a(105),ce=a.n(oe),re=(a(162),a(95),function(e){var t=Object(n.useState)(!1),a=Object(i.a)(t,2),o=a[0],c=a[1];Object(n.useEffect)((function(){var t=!0;return u()({method:"GET",url:"http://localhost:5000/is_following",params:{following:e.uploader}}).then((function(e){console.log(e),!0===e.data.result&&t?c(!0):t&&c(!1)})),function(){t=!1}}),[]);var r=function(){o?u()({method:"POST",url:"http://localhost:5000/unfollow",params:{following:e.uploader}}).then((function(e){console.log(e),!0===e.data.result?c(!1):c(!0)})):u()({method:"POST",url:"http://localhost:5000/follow",params:{to_follow:e.uploader}}).then((function(e){console.log(e),!0===e.data.result?c(!0):c(!1)}))};return l.a.createElement(l.a.Fragment,null,o?l.a.createElement(d.a,{variant:"contained",color:"primary",style:{},onClick:r},"Following"):l.a.createElement(d.a,{variant:"outlined",color:"primary",style:{},onClick:r},"Follow"))}),ie=(a(163),Object(h.a)({root:{width:"2rem",height:"2rem"},liked:{color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(213, 48, 48, 1)"},unliked:{}}));var se=function(e){var t=Object(n.useState)(),a=Object(i.a)(t,2),o=a[0],c=a[1],r=Object(n.useState)(!1),s=Object(i.a)(r,2),m=s[0],d=s[1],p=ie(),g=e.image_id,h=localStorage.getItem("userID");Object(n.useEffect)((function(){u()({method:"GET",url:"http://localhost:5000/get_num_likes_of_image",params:{image_id:g}}).then((function(e){!1!==e.data.result?c(e.data.result):c(0)}))}),[g]),Object(n.useEffect)((function(){e.setNumLikes(o)}),[o]),Object(n.useEffect)((function(){u()({url:"http://localhost:5000/check_if_user_liked_photo",params:{image_id:g}}).then((function(e){console.log(e),e.data.result?d(!0):d(!1)}))}),[h,g]);var f,b=function(){u()({method:"GET",url:"http://localhost:5000/post_like_to_image",params:{image_id:g}}).then((function(t){console.log(t),t.data.result&&(c((function(e){return parseInt(e)+1})),d(!0),u()({url:"http://localhost:5000/send_notification",params:{uploader_id:e.uploader_id,notification:"like",image_id:g}}).then((function(e){console.log(e)})),u()({method:"GET",url:"http://localhost:5000/update_likes_recommendation",params:{image_id:g}}).then((function(e){console.log(e)})))}))},O=function(){u()({method:"POST",url:"http://localhost:5000/delete_like_from_image",params:{image_id:g}}).then((function(e){return e.data.result&&(c((function(e){return parseInt(e)-1})),d(!1)),e.data.result}))};return f=m?p.liked:p.unliked,l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"like"},l.a.createElement("div",{style:{textAlign:"center"}},l.a.createElement(E.a,{classes:{root:"".concat(p.root," ").concat(f)},onClick:function(){null!=h&&(m?O():b())},disabled:!localStorage.getItem("userLoggedIn")||localStorage.getItem("userID")===e.uploader_id},l.a.createElement(X.a,null))),l.a.createElement("p",null,o)))},ue=(a(164),a(103)),me=a.n(ue),de=a(67),pe=a.n(de);a(165),a(166);function ge(e){var t=String(e.replies_info.commenter)===localStorage.getItem("userID")?l.a.createElement(E.a,{onClick:function(){a(e.replies_info.comment_id)}},l.a.createElement(pe.a,null)):l.a.createElement(d.a,null),a=function(t){u()({method:"POST",url:"http://localhost:5000/post_delete_comment",params:{comment_id:t}}).then((function(t){t.data.result&&(console.log("im here in replyComment deletecomment api call ".concat(t)),e.updateReplies(e.replies_info.comment))}))};return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"reply_comment"},l.a.createElement("div",{className:"username"},"@",e.replies_info.username),l.a.createElement("div",{className:"date"},l.a.createElement("p",null,e.replies_info.created_at)),t,l.a.createElement("div",{className:"reply_content"},l.a.createElement("p",null,e.replies_info.comment))))}function he(e){var t=Object(n.useState)([]),a=Object(i.a)(t,2),o=a[0],c=a[1],r=Object(n.useState)(""),s=Object(i.a)(r,2),m=s[0],d=s[1],p=e.newReply,g=e.comment_id,h=e.setShowViewReplies,f=e.updateComments;Object(n.useEffect)((function(){u()({method:"GET",url:"http://localhost:5000/get_comments_to_comment",params:{comment_id:g,batch_size:10}}).then((function(e){console.log(e),e.data.result?c(e.data.result):(console.log("NO REPLIES FOUND"),c([]),h(!1),f(g))}))}),[m,p,g,h,f]);var b=o.map((function(e){return l.a.createElement(ge,{key:e.comment_id,replies_info:e,updateReplies:d})}));return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"reply_comments"},b))}function fe(e){var t=Object(n.useState)(""),a=Object(i.a)(t,2),o=a[0],c=a[1],r=Object(n.useState)(!1),s=Object(i.a)(r,2),m=s[0],p=s[1],g=Object(n.useState)(!1),h=Object(i.a)(g,2),f=h[0],b=h[1],O=Object(n.useState)(""),v=Object(i.a)(O,2),j=v[0],k=v[1],C=Object(n.useState)(null),S=Object(i.a)(C,2),_=S[0],y=S[1];Object(n.useEffect)((function(){u()({method:"GET",url:"http://localhost:5000/get_profile_photo",params:{user_id:e.comment_info.commenter}}).then((function(e){console.log(e),e.data.result?y(e.data.result):y(null)}))}),[]);var I=String(e.comment_info.commenter),N=localStorage.getItem("userID"),P=I===N?l.a.createElement(E.a,{onClick:function(){var t;t=e.comment_info.comment_id,u()({method:"POST",url:"http://localhost:5000/post_delete_comment",params:{comment_id:t}}).then((function(t){t.data.result&&(console.log("delete request ".concat(t)),e.updateComments(e.comment_info.comment),console.log(t))}))}},l.a.createElement(pe.a,null)):l.a.createElement(d.a,null),w=function(t){u()({method:"POST",url:"http://localhost:5000/post_comment_to_comment",params:{comment_id:e.comment_info.comment_id,comment:t,image_id:e.comment_info.image_id}}).then((function(a){a.data.result&&(e.updateComments(t),c(""),!0===f&&k(t),console.log("reply submitted"))})),u()({method:"GET",url:"http://localhost:5000/update_comment_recommendation",params:{image_id:e.comment_info.image_id}}).then((function(e){console.log(e)}))};return l.a.createElement("div",{className:"card v-card v-sheet theme--light elevation-2"},l.a.createElement("div",{className:"header"},l.a.createElement("div",{className:"comment-container"},l.a.createElement("div",{className:"v-avatar avatar"},null!==_?l.a.createElement(l.a.Fragment,null,l.a.createElement("img",{src:"data:image/jpg;base64,".concat(_),alt:"user icon"})):null),l.a.createElement("span",{className:"displayName title"},"@",e.comment_info.username)," ",l.a.createElement("span",{className:"displayName caption"},e.comment_info.created_at),localStorage.getItem("userLoggedIn")?l.a.createElement(l.a.Fragment,null,l.a.createElement(E.a,{onClick:function(){p(!m)}},l.a.createElement(me.a,null)),P):null),l.a.createElement("div",{className:"comment"},l.a.createElement("p",null,e.comment_info.comment)),m?l.a.createElement("div",{className:"reply_form"},l.a.createElement("form",{onSubmit:function(e){e.preventDefault(),w(o)}},l.a.createElement("div",null,l.a.createElement("input",{type:"reply",id:"reply_input",value:o,onChange:function(e){return c(e.target.value)},autoComplete:"off"})))):null,e.comment_info.count>0&&!1===f?l.a.createElement("div",{className:"reply_form"},l.a.createElement("button",{onClick:function(){b(!f)}},"View ",e.comment_info.count," replies...")):null,f?l.a.createElement(he,{comment_id:e.comment_info.comment_id,updateComments:e.updateComments,setShowViewReplies:b,newReply:j}):null,f?l.a.createElement("button",{onClick:function(){b(!1)}},"Hide replies"):null))}a(167);var be=Object(h.a)((function(e){return{margin:{width:"70%",marginBottom:"10px"},textField:{width:"30ch",backgroundColor:"white"}}}));function Ee(e){var t=Object(n.useState)(""),a=Object(i.a)(t,2),o=a[0],c=a[1],r=be(),s=e.comments_list.map((function(t){return l.a.createElement(fe,{key:t.comment_id,updateComments:e.updateComments,updateReplies:e.updateReplies,comment_info:t})})),m=function(e){e.preventDefault(),d(o)},d=function(t){console.log("imageid=".concat(e.image_id));u()({method:"POST",url:"http://localhost:5000/post_comment_to_image",params:{comment:t,image_id:e.image_id}}).then((function(a){console.log(a),a.data.result&&(e.updateComments(e.comments_list.concat(t)),c(""),u()({url:"http://localhost:5000/send_notification",params:{uploader_id:e.uploader_id,notification:"comment",image_id:e.image_id}}).then((function(e){console.log(e)})),u()({method:"GET",url:"http://localhost:5000/update_comment_recommendation",params:{image_id:e.image_id}}).then((function(e){console.log(e)})))}))};return l.a.createElement(l.a.Fragment,null,localStorage.getItem("userLoggedIn")?l.a.createElement("form",{onSubmit:m},l.a.createElement("div",{className:r.margin},l.a.createElement(S.a,{classes:{root:r.textField},id:"outlined-multiline-flexible",label:"Type a comment",multiline:!0,rowsMax:4,value:o,onChange:function(e){return c(e.target.value)},onKeyPress:function(e){"Enter"===e.key&&m(e)},variant:"outlined",size:"small",fullWidth:!0}))):null,l.a.createElement("div",{className:"comments-container"},s))}a(168);var Oe=a(235),ve=a(233);a(169);function je(e){console.log(e.collectionInfo);return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"collection_folder"},l.a.createElement(d.a,{variant:"contained",onClick:function(){e.addPhotoToCollections(e.collectionInfo.collection_id)}},e.collectionInfo.collection_name)))}a(170);function ke(e){return console.log("tesst"),e.openModal?c.a.createPortal(l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"bookmark-confirmation-overlay"}),l.a.createElement("div",{className:"bookmark-confirmation-modal",onClick:function(e){e.stopPropagation()}},l.a.createElement("h3",null,"Photo has successfully been added to this collection!"))),document.getElementById("confirmationPortal2")):null}function Ce(e){var t=Object(n.useState)(!1),a=Object(i.a)(t,2),o=a[0],r=a[1],s=Object(n.useState)(null),m=Object(i.a)(s,2),p=m[0],g=m[1],h=Object(n.useState)(""),f=Object(i.a)(h,2),b=f[0],E=f[1],O=Object(n.useState)([]),v=Object(i.a)(O,2),j=v[0],k=v[1],C=Object(n.useState)(!0),S=Object(i.a)(C,2),_=S[0],y=S[1],I=Object(n.useState)(0),N=Object(i.a)(I,2),P=N[0],w=N[1],M=Object(n.useState)(!0),T=Object(i.a)(M,2),F=T[0],x=T[1],D=Object(n.useState)(!1),L=Object(i.a)(D,2),R=L[0],B=L[1];Object(n.useEffect)((function(){!function(){var e=localStorage.getItem("userID");u()({method:"GET",url:"http://localhost:5000/get_users_collection",params:{user_id:e,batch_size:20}}).then((function(e){!1!==e.data.result&&(k(e.data.result),B(!0)),x(!1)}))}()}),[]);var V=function(t){u()({method:"POST",url:"http://localhost:5000/add_photo_to_collection",params:{collection_id:t,image_id:e.photoId}}).then((function(e){if(console.log(e.data.result),e.data.result){var a=j.filter((function(e){return e.collection_id===t}));g(a.collection_name),r(!0)}}))};return e.openModal?c.a.createPortal(l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"overlayStyles"}),l.a.createElement("div",{className:"bookmarkModal",onClick:function(e){e.stopPropagation()}},l.a.createElement("h2",null,"Add to Collection"),_?l.a.createElement(d.a,{variant:"outlined",color:"primary",onClick:function(){y(!1)}},"Create a new collection"):null,_?l.a.createElement("div",{className:"collection-folders"},F&&"Loading...",!R&&"You have not created any collections yet",j.map((function(t){return l.a.createElement(je,{key:t.collection_id,collectionInfo:t,photoId:e.photoId,addPhotoToCollections:V})}))):null,_?null:l.a.createElement("div",{className:"enteredCollection"},l.a.createElement("form",{onSubmit:function(e){e.preventDefault();u()({method:"POST",url:"http://localhost:5000/create_collection",params:{collection_name:b,private:P}}).then((function(e){e.data.result&&V(e.data.result)}))}},l.a.createElement("div",null,l.a.createElement("input",{type:"reply",onChange:function(e){return E(e.target.value)}})),l.a.createElement("div",null,l.a.createElement(ve.a,{control:l.a.createElement(Oe.a,{checked:P,onChange:function(){w(!0===P?0:1)},name:"privateCheckbox",color:"primary"}),label:"Private"})),l.a.createElement(d.a,{variant:"contained",color:"primary",type:"submit"},"Create collection")),l.a.createElement(d.a,{variant:"contained",color:"primary",onClick:function(){y(!0)}},"Cancel"))),l.a.createElement("div",{onClick:function(){r(!1)}},o?l.a.createElement(ke,{openModal:!0,photoID:e.photoId,modalCollectionName:p}):null)),document.getElementById("confirmationPortal")):null}function Se(e){var t=Object(n.useState)(e.uploader),a=Object(i.a)(t,2),o=a[0],r=a[1],s=Object(n.useState)(""),p=Object(i.a)(s,2),g=p[0],h=p[1],f=Object(n.useState)([]),b=Object(i.a)(f,2),O=b[0],v=b[1],j=Object(n.useState)(!1),k=Object(i.a)(j,2),C=k[0],S=k[1],_=Object(n.useState)([]),y=Object(i.a)(_,2),I=y[0],N=y[1],P=Object(n.useState)(""),w=Object(i.a)(P,2),M=w[0],T=w[1],F=Object(n.useState)(!1),x=Object(i.a)(F,2),D=x[0],L=x[1],R=Object(n.useState)([]),B=Object(i.a)(R,2),V=B[0],A=B[1],z=Object(n.useState)(!0),q=Object(i.a)(z,2),G=q[0],U=q[1],W=Object(n.useState)(!0),Y=Object(i.a)(W,2),$=Y[0],H=Y[1],J=Object(n.useRef)(),Q=e.imageID,K=Object(m.g)();Object(n.useEffect)((function(){u()({url:"http://localhost:5000/get_user_username",params:{user_id:e.uploader}}).then((function(e){e.data.result&&r(e.data.result)})),u()({url:"http://localhost:5000/item_is_in_cart",params:{image_id:Q}}).then((function(e){e.data.result&&S(!0)})),u()({url:"http://localhost:5000/get_user_email",params:{user_id:e.uploader}}).then((function(e){e.data.result&&h(e.data.result)})),u()({url:"http://localhost:5000/get_related_images",params:{image_id:Q}}).then((function(e){console.log("~~~~~~~~~~~~Get Related Images~~~~~~~~~~~"),console.log(e),e.data.result?(A(e.data.result),H(!0)):H(!1),U(!1)}))}),[]),Object(n.useEffect)((function(){var e,t=!0;return e=Q,u()({method:"GET",url:"http://localhost:5000/get_comments_to_image",params:{image_id:e,batch_size:20},cancelToken:new u.a.CancelToken((function(e){return J.current=e}))}).then((function(a){!1!==a.data.result&&t?v(a.data.result):t&&v([]),function(e){u()({method:"GET",url:"http://localhost:5000/get_tags",params:{image_id:e},cancelToken:new u.a.CancelToken((function(e){return J.current=e}))}).then((function(e){!1!==e.data.result&&t?N(e.data.result):t&&N([])}))}(e)})),function(){J.current(),t=!1}}),[M,Q]);var X=function(){C?function(e){u()({method:"POST",url:"http://localhost:5000/delete_item_from_cart",params:{image_id:String(e)}}).then((function(e){!1!==e.data.result?S(!1):S(!0)}))}(e.imageID):function(e){u()({method:"POST",url:"http://localhost:5000/add_purchase",params:{save_for_later:0,purchased:0,image_id:String(e)}}).then((function(e){!1!==e.data.result?S(!0):S(!1)}))}(e.imageID)};return e.openModal?c.a.createPortal(l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"post-modal-overlay"}),l.a.createElement("div",{className:"post-modal",onClick:function(e){e.stopPropagation()}},l.a.createElement("div",{className:"postWrapper"},l.a.createElement("div",{className:"postInfo"},l.a.createElement("div",{className:"username"},localStorage.getItem("userLoggedIn")?l.a.createElement(l.a.Fragment,null,parseInt(localStorage.getItem("userID"))!==e.uploader?l.a.createElement(re,{uploader:e.uploader}):null,l.a.createElement("div",{className:"bookmark-wrapper"},l.a.createElement(E.a,{variant:"contained",onClick:function(){L(!0)}},l.a.createElement(ee.a,null)))):null,l.a.createElement(se,{setNumLikes:e.setNumLikes,image_id:e.imageID,uploader_id:e.uploader}))),l.a.createElement("div",{className:"postImage"},l.a.createElement("div",{className:"main-img"},l.a.createElement("img",{src:"data:image/jpg;base64,".concat(e.url),alt:e.caption}),l.a.createElement("div",{className:"recImages-nested"},l.a.createElement("h1",{className:"roboto"}," Related Photos:"),V.length>0?V.map((function(t,a){return l.a.createElement("div",{key:a,className:"recImage"},l.a.createElement("img",{onClick:function(){e.setRelatedImagesClicked(t)},src:"data:image/jpg;base64,".concat(t.img),alt:t.caption}))})):l.a.createElement(l.a.Fragment,null,l.a.createElement("h1",null,!$&&"No related images could be found"),l.a.createElement("div",{style:{marginTop:"20vh",marginRight:"20vh",marginLeft:"20vh"}})))),l.a.createElement("h2",{style:{textAlign:"center"}},G&&"Loading...")),l.a.createElement("div",{className:"postFeed-nested"},l.a.createElement("div",{className:"title"},l.a.createElement("h1",null,e.title),l.a.createElement("div",{className:"username-wrapper"},l.a.createElement(d.a,{variant:"outlined",onClick:function(){K.push({pathname:"/profile/".concat(e.uploader),state:{uploaderID:e.uploader}})}},"@",o)),l.a.createElement("p",{className:"roboto",style:{fontSize:"70%",textAlign:"center"}},"email: ",g)),l.a.createElement("h2",{className:"roboto"},e.caption),l.a.createElement("div",{className:"postTags"},l.a.createElement("h3",null,"Tags:"," ",I.length<1?"this post has no tags to display":null),l.a.createElement("div",{className:"flexbox-tags"},I.length>0?I.map((function(e,t){return l.a.createElement(d.a,{key:t,variant:"contained"},"#",e)})):null)),l.a.createElement("div",{className:"postPrice"},l.a.createElement("h2",{className:"roboto"},"Price: $",e.price),localStorage.getItem("userLoggedIn")&&parseInt(localStorage.getItem("userID"))!==e.uploader?C?l.a.createElement(d.a,{variant:"contained",color:"primary",onClick:X},"Added to Cart"):l.a.createElement(d.a,{variant:"contained",onClick:X},"Add to Cart"):null),l.a.createElement("div",{className:"postComments"},l.a.createElement("h2",{className:"roboto"},"Comments:"),l.a.createElement(Ee,{image_id:e.imageID,comments_list:O,updateComments:T,uploader_id:e.uploader})))),l.a.createElement("div",{onClick:function(){return L(!1)}},D?l.a.createElement(Ce,{openModal:!0,setOpenModal:L,photoId:e.imageID}):null))),document.getElementById("postPortal")):null}a(171);function _e(e){return e.openModal?c.a.createPortal(l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"cart-confirmation-overlay"}),l.a.createElement("div",{className:"cart-confirmation-modal",onClick:function(e){e.stopPropagation()}},"added"===e.cartStatus?l.a.createElement("h3",null,"Photo has been added to the cart"):l.a.createElement("h3",null,"Photo has been removed from the cart"))),document.getElementById("confirmationPortal3")):null}a(172);function ye(e){var t=Object(n.useState)(e.oldTitle),a=Object(i.a)(t,2),o=a[0],c=a[1],r=Object(n.useState)(""),s=Object(i.a)(r,2),u=s[0],m=s[1],d=Object(n.useState)(!1),p=Object(i.a)(d,2),g=p[0],h=p[1],f=Object(n.useState)(!0),b=Object(i.a)(f,2),E=b[0],O=b[1],v=e.saveButtonClicked;Object(n.useEffect)((function(){O(!1),e.setTitleValidated([!1,o])}),[]),Object(n.useEffect)((function(){if(!1===E){var t=j(o);e.setTitleValidated([t,o])}}),[v]);var j=function(e){return e.length>0&&e.length<50?(h(!1),!0):(h(!0),m("A title must be included"),!1)};return l.a.createElement(l.a.Fragment,null,l.a.createElement("h3",null,"Title"),l.a.createElement("div",null,l.a.createElement(S.a,{required:!0,error:g,helperText:u,onChange:function(e){c(e.target.value),j(e.target.value)},id:"outlined-required",label:"Required",defaultValue:e.oldTitle,variant:"outlined"})))}function Ie(e){var t=Object(n.useState)(e.oldCaption),a=Object(i.a)(t,2),o=a[0],c=a[1],r=Object(n.useState)(""),s=Object(i.a)(r,2),u=s[0],m=s[1],d=Object(n.useState)(!1),p=Object(i.a)(d,2),g=p[0],h=p[1],f=Object(n.useState)(!0),b=Object(i.a)(f,2),E=b[0],O=b[1],v=e.saveButtonClicked;Object(n.useEffect)((function(){O(!1),e.setCaptionValidated([!1,o])}),[]),Object(n.useEffect)((function(){if(!1===E){var t=j(o);e.setCaptionValidated([t,o])}}),[v]);var j=function(e){return e.length<50?(h(!1),!0):(h(!0),m("Caption too long"),!1)};return l.a.createElement(l.a.Fragment,null,l.a.createElement("h3",null,"Caption"),l.a.createElement("div",null,l.a.createElement(S.a,{error:g,helperText:u,onChange:function(e){c(e.target.value),j(e.target.value)},id:"outlined-required",defaultValue:e.oldCaption,variant:"outlined"})))}function Ne(e){var t=Object(n.useState)(e.oldTags),a=Object(i.a)(t,2),o=a[0],c=a[1],r=Object(n.useState)(""),s=Object(i.a)(r,2),u=s[0],m=s[1],d=Object(n.useState)(!1),p=Object(i.a)(d,2),g=p[0],h=p[1],f=Object(n.useState)(!0),b=Object(i.a)(f,2),E=b[0],O=b[1],v=Object(n.useRef)(),j=e.saveButtonClicked;Object(n.useEffect)((function(){O(!1),e.setTagsValidated([!1,o])}),[]),Object(n.useEffect)((function(){c(e.oldTags),e.setTagsValidated([!1,e.oldTags])}),[e.oldTags]),Object(n.useEffect)((function(){if(!1===E){var t=k(o);e.setTagsValidated([t,o])}}),[j]);var k=function(e){return e.length<100?(h(!1),!0):(h(!0),m("Too many tags"),!1)};return l.a.createElement(l.a.Fragment,null,l.a.createElement("h3",null,"Tags"),l.a.createElement("div",null,l.a.createElement(S.a,{ref:v,error:g,helperText:u,onChange:function(e){c(e.target.value),k(e.target.value)},value:o,id:"outlined-required",label:"Tags must be comma seperated",defaultValue:e.oldTags.toString(),variant:"outlined",InputLabelProps:{shrink:!0}})))}function Pe(e){var t=Object(n.useState)(e.oldPrice),a=Object(i.a)(t,2),o=a[0],c=a[1],r=Object(n.useState)(""),s=Object(i.a)(r,2),u=s[0],m=s[1],d=Object(n.useState)(!1),p=Object(i.a)(d,2),g=p[0],h=p[1],f=Object(n.useState)(!0),b=Object(i.a)(f,2),E=b[0],O=b[1],v=e.saveButtonClicked;Object(n.useEffect)((function(){O(!1),e.setPriceValidated([!1,o])}),[]),Object(n.useEffect)((function(){if(!1===E){var t=j(o);console.log(o),e.setPriceValidated([t,o])}}),[v]);var j=function(e){return parseFloat(e)>0?(h(!1),!0):(h(!0),m("A price must be included"),!1)};return l.a.createElement(l.a.Fragment,null,l.a.createElement("h3",null,"Price"),l.a.createElement("div",null,l.a.createElement(S.a,{required:!0,error:g,helperText:u,onChange:function(e){c(e.target.value),j(e.target.value)},id:"outlined-required",label:"Required",type:"number",defaultValue:parseInt(e.oldPrice),variant:"outlined"})))}var we=Object(h.a)((function(e){return{root:{"& .MuiTextField-root":{margin:e.spacing(1),width:"ch"}}}}));function Me(e){var t=Object(n.useState)(!1),a=Object(i.a)(t,2),o=a[0],r=a[1],s=Object(n.useState)([!1,e.title]),p=Object(i.a)(s,2),g=p[0],h=p[1],f=Object(n.useState)([!1,e.caption]),b=Object(i.a)(f,2),E=b[0],O=b[1],v=Object(n.useState)([!1,e.price]),j=Object(i.a)(v,2),k=j[0],C=j[1],S=Object(n.useState)([!1,[]]),_=Object(i.a)(S,2),y=_[0],P=_[1],w=Object(n.useState)([]),M=Object(i.a)(w,2),T=M[0],F=M[1];Object(n.useEffect)((function(){u()({url:"http://localhost:5000/get_tags",params:{image_id:e.imageID}}).then((function(e){console.log(e),e.data.result&&(F(e.data.result),P([!1,e.data.result]))}))}),[]);var x=Object(m.g)(),D=we();function L(){return(L=Object(N.a)(I.a.mark((function t(){var a;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.a.get("http://localhost:5000/edit_post",{params:{image_id:e.imageID,title:g[1],price:k[1],caption:E[1],tags:y[1].toString()}});case 2:return a=t.sent,t.abrupt("return",a);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}Object(n.useEffect)((function(){(console.log(g),console.log(E),console.log(k),console.log(y),g[0]&&E[0]&&k[0]&&y[0])&&(console.log("APPROVED"),function(){return L.apply(this,arguments)}().then((function(e){console.log(e),e.data.result&&x.go(0)})))}),[g,E,k,y]);return e.openModal?c.a.createPortal(l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"overlayStyles"}),l.a.createElement("div",{className:"editPostModal",onClick:function(e){e.stopPropagation()}},l.a.createElement("div",{className:"grid-container-editpost"},l.a.createElement("div",{className:"grid-item-image"},l.a.createElement("img",{src:"data:image/jpg;base64,".concat(e.url),alt:e.caption})),l.a.createElement("form",{className:D.root,noValidate:!0,autoComplete:"off"},l.a.createElement("div",{className:"edit-post-details"},l.a.createElement(ye,{saveButtonClicked:o,setTitleValidated:h,oldTitle:e.title}),l.a.createElement(Ie,{saveButtonClicked:o,setCaptionValidated:O,oldCaption:e.caption}),l.a.createElement(Ne,{saveButtonClicked:o,setTagsValidated:P,oldTags:T}),l.a.createElement(Pe,{saveButtonClicked:o,setPriceValidated:C,oldPrice:e.price}),l.a.createElement(d.a,{variant:"contained",color:"primary",size:"large",onClick:function(){r(!o)}},"SAVE"),l.a.createElement(d.a,{variant:"contained",color:"primary",size:"large",onClick:function(){e.setOpenModal(!1)}},"Cancel")))))),document.getElementById("editPostPortal")):null}var Te=function(){var e=Object(N.a)(I.a.mark((function e(t){var a;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.get("http://localhost:5000/delete_image_post",{params:{image_id:String(t)}});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Fe=function(e){Object(H.a)(a,e);var t=Object(J.a)(a);function a(e){var n;return Object(W.a)(this,a),(n=t.call(this,e)).setSpans=function(){if(null!=n.imageRef.current){var e=n.imageRef.current.clientHeight,t=Math.ceil(e/10);n.setState({spans:t})}},n.setAddedToCartModal=function(e){n.setState({openCartAddedModal:e})},n.setCartStatus=function(e){n.setState({cartStatus:e})},n.setOpenPostModal=function(e){n.setState({openPostModal:e})},n.setOpenEditPostModal=function(e){n.setState({openEditPostModal:e})},n.setNumLikes=function(e){n.setState({numLikes:e})},n.setNumLikesDummy=function(e){console.log("dummy like for related image")},n.setRelatedImagesClicked=function(e){n.setState({relatedImageClicked:e,openPostModal:!1,openRelatedPostModal:!0})},n.handleImageClicked=function(e){n.setState({openPostModal:!0})},n.handleLikeClicked=function(e){e.stopPropagation()},n.handleBookmarkClicked=function(e){e.stopPropagation(),n.props.setOpenBookmarkModal(!0),n.props.setPhotoId(parseInt(n.props.image.id))},n.handleBuyClicked=function(e){e.stopPropagation();u()({url:"http://localhost:5000/item_is_in_cart",params:{image_id:n.props.image.id}}).then((function(e){var t,a,l;e.data.result?function(e,t,a){u()({method:"POST",url:"http://localhost:5000/delete_item_from_cart",params:{image_id:String(e)}}).then((function(e){!1!==e.data.result&&(t(!0),a("removed"))}))}(n.props.image.id,n.setAddedToCartModal,n.setCartStatus):(t=n.props.image.id,a=n.setAddedToCartModal,l=n.setCartStatus,u()({method:"POST",url:"http://localhost:5000/add_purchase",params:{save_for_later:0,purchased:0,image_id:String(t)}}).then((function(e){!1!==e.data.result&&(a(!0),l("added"))})))}))},n.handleDeleteClicked=function(e){Te(n.props.image.id),e.stopPropagation(),window.location.reload()},n.handleEditClicked=function(e){e.stopPropagation(),n.setState({openEditPostModal:!0})},n.imageRef=l.a.createRef(),n.setOpenPostModal=n.setOpenPostModal.bind(Object($.a)(n)),n.setOpenEditPostModal=n.setOpenEditPostModal.bind(Object($.a)(n)),n.setAddedToCartModal=n.setAddedToCartModal.bind(Object($.a)(n)),n.setCartStatus=n.setCartStatus.bind(Object($.a)(n)),n.setNumLikesDummy=n.setNumLikesDummy.bind(Object($.a)(n)),n.setNumLikes=n.setNumLikes.bind(Object($.a)(n)),n.setRelatedImagesClicked=n.setRelatedImagesClicked.bind(Object($.a)(n)),n.state={openPostModal:!1,openEditPostModal:!1,openRelatedPostModal:!1,openCartAddedModal:!1,cartStatus:"",spans:0,animateImages:"",numLikes:n.props.image.num_likes,relatedImageClicked:{}},n}return Object(Y.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.imageRef.current.addEventListener("load",this.setSpans),setTimeout((function(){e.setState({animateImages:"image-container-animate"})}),100)}},{key:"render",value:function(){var e,t=this;document.body.style.overflow=this.state.openPostModal?"hidden":"unset";var a=String(this.props.image.uploader),n=localStorage.getItem("userID"),o=a===n?l.a.createElement(E.a,{variant:"contained",classes:{root:"".concat(this.props.classes.root," ").concat(this.props.classes.delete)},onClick:this.handleDeleteClicked},l.a.createElement(le.a,null)):null,c=a===n?l.a.createElement(E.a,{variant:"contained",classes:{root:"".concat(this.props.classes.root," ").concat(this.props.classes.edit)},onClick:this.handleEditClicked},l.a.createElement(ce.a,null)):null;return e=l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"image-container ".concat(this.state.animateImages),onClick:this.handleImageClicked},l.a.createElement("div",{className:"icon-bar"}),l.a.createElement("img",{className:"image-size",ref:this.imageRef,src:"data:image/jpg;base64,".concat(this.props.image.img),alt:this.props.caption}),l.a.createElement(E.a,{classes:{root:"".concat(this.props.classes.root," ").concat(this.props.classes.like)},variant:"contained",onClick:this.handleLikeClicked},l.a.createElement(X.a,{classes:{root:this.props.classes.likeSize}}),l.a.createElement("div",{className:"num-likes"},this.state.numLikes)),this.props.userLoggedIn?l.a.createElement(l.a.Fragment,null,this.props.displayMyProfile?null:l.a.createElement(l.a.Fragment,null,l.a.createElement(E.a,{classes:{root:"".concat(this.props.classes.root," ").concat(this.props.classes.bookmark)},variant:"contained",onClick:this.handleBookmarkClicked},l.a.createElement(ee.a,null)),parseInt(localStorage.getItem("userID"))!==this.props.image.uploader?l.a.createElement(E.a,{classes:{root:"".concat(this.props.classes.root," ").concat(this.props.classes.buy)},variant:"contained",onClick:this.handleBuyClicked},l.a.createElement(ae.a,null)):null),o,c):null),this.state.openPostModal?l.a.createElement("div",{className:"modal-wrapper",onClick:function(){t.setState({openPostModal:!1})}},l.a.createElement(Se,{openModal:!0,setOpenModal:this.setOpenPostModal,imageID:this.props.image.id,url:this.props.image.img,caption:this.props.image.caption,price:this.props.image.price,title:this.props.image.title,uploader:this.props.image.uploader,setNumLikes:this.setNumLikes,setRelatedImagesClicked:this.setRelatedImagesClicked})):null,this.state.openRelatedPostModal?l.a.createElement("div",{className:"modal-wrapper",onClick:function(){t.setState({openRelatedPostModal:!1})}},"this.state.relatedImageClicked ?",l.a.createElement(Se,{openModal:!0,setOpenModal:this.setOpenPostModal,imageID:this.state.relatedImageClicked.id,url:this.state.relatedImageClicked.img,caption:this.state.relatedImageClicked.caption,price:this.state.relatedImageClicked.price,title:this.state.relatedImageClicked.title,uploader:this.state.relatedImageClicked.uploader,setNumLikes:this.setNumLikesDummy,setRelatedImagesClicked:this.setRelatedImagesClicked})):null,this.state.openEditPostModal?l.a.createElement("div",{className:"modal-wrapper",onClick:function(){t.setState({openEditPostModal:!1})}},l.a.createElement(Me,{openModal:this.state.openEditPostModal,setOpenModal:this.setOpenEditPostModal,imageID:this.props.image.id,url:this.props.image.img,caption:this.props.image.caption,price:this.props.image.price,title:this.props.image.title,uploader:this.props.image.uploader})):null,this.state.openCartAddedModal?l.a.createElement("div",{className:"modal-wrapper",onClick:function(){t.setState({openCartAddedModal:!1})}},l.a.createElement(_e,{openModal:!0,cartStatus:this.state.cartStatus})):null),l.a.createElement(l.a.Fragment,null,e)}}]),a}(n.Component),xe=Object(Q.a)({root:{position:"absolute",bottom:"0%",left:"50%",color:"rgba(255, 255, 255,1)",height:"15%",width:"15%"},iconSize:{width:"60%",height:"60%"},likeSize:{width:"80%",height:"80%"},like:{left:"5%"},bookmark:{left:"60%"},buy:{left:"80%"},delete:{left:"4%",top:"10%",width:"16%",height:"20%","&:hover":{backgroundColor:"rgba(180, 65, 65, 0.82)"}},edit:{left:"82%",top:"10%",width:"14%",height:"18%","&:hover":{backgroundColor:"rgba(6, 149, 193, 0.7)"}}})(Fe),De=function(e){var t=Object(n.useState)([]),a=Object(i.a)(t,2),o=a[0],c=a[1],r=Object(n.useState)(!1),s=Object(i.a)(r,2),m=s[0],d=s[1],p=Object(n.useState)(0),g=Object(i.a)(p,2),h=g[0],f=g[1],b=Object(n.useState)(!0),E=Object(i.a)(b,2),O=E[0],v=E[1],j=Object(n.useState)(!1),k=Object(i.a)(j,2),C=k[0],S=k[1],_=Object(n.useState)(null),y=Object(i.a)(_,2),I=y[0],N=y[1],P=localStorage.getItem("userLoggedIn"),w=Object(n.useRef)(!1),M=Object(n.useRef)(),T=Object(n.useRef)(),F=Object(n.useCallback)((function(t){C||(T.current&&T.current.disconnect(),T.current=new IntersectionObserver((function(t){t[0].isIntersecting&&O&&(S(!0),x(e.query,I))})),t&&T.current.observe(t))}),[C,O,e.query]);Object(n.useEffect)((function(){return w.current=!1,S(!0),setTimeout((function(){x(e.query,I)}),150),function(){null!=M.current&&M.current(),w.current=!0,c([]),v(!0)}}),[e.query]);var x=function(e,t){null===e?(console.log("called get_global_recommendations with score ".concat(t)),u()({method:"GET",url:"http://localhost:5000/get_global_recommendations",params:{score:t,batch_size:10},cancelToken:new u.a.CancelToken((function(e){return M.current=e}))}).then((function(e){!1===e.data.result||w.current?w.current||(S(!1),v(!1)):(N(e.data.score),v(!0),S(!1),c((function(t){return[].concat(Object(U.a)(t),Object(U.a)(e.data.result))})))})).catch((function(e){u.a.isCancel(e)}))):u()({method:"GET",url:"http://localhost:5000/discovery",params:{query:e,batch_size:10},cancelToken:new u.a.CancelToken((function(e){return M.current=e}))}).then((function(e){!1===e.data.result||w.current?w.current||(S(!1),v(!1)):(v(!0),S(!1),c((function(t){return[].concat(Object(U.a)(t),Object(U.a)(e.data.result))})))})).catch((function(e){u.a.isCancel(e)}))};return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"image-grid"},o.map((function(e,t){return null===e?null:o.length===t+1?l.a.createElement(l.a.Fragment,{key:t},l.a.createElement(xe,{key:e.id,image:e,setOpenBookmarkModal:d,setPhotoId:f,userLoggedIn:P}),l.a.createElement("div",{key:t,ref:F,style:{position:"relative",bottom:"200px",height:"0%"}})):l.a.createElement(xe,{key:e.id,image:e,setOpenBookmarkModal:d,setPhotoId:f,userLoggedIn:P})}))),l.a.createElement("h2",{style:{textAlign:"center"}},C&&"Loading..."),l.a.createElement("h2",{style:{textAlign:"center"}},!O&&"No more images to display"),l.a.createElement("div",{onClick:function(){d(!1)}},m?l.a.createElement(Ce,{openModal:!0,photoId:h}):null))},Le=Object(h.a)((function(e){return{root:{margin:e.spacing(1),width:"100ch",backgroundColor:"white"}}}));var Re=function(e){var t=Object(n.useState)(""),a=Object(i.a)(t,2),o=a[0],c=a[1],r=Le();return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"searchBar"},l.a.createElement("form",{onSubmit:function(t){t.preventDefault(),setTimeout((function(){(o.match(/[/[\s]/g)||[]).length===o.length?e.setQuery(null):e.setQuery(o)}),100)},className:r.root,noValidate:!0,autoComplete:"off"},l.a.createElement(S.a,{className:r.text,id:"outlined-basic",label:"Search for stock photos",variant:"outlined",size:"small",fullWidth:!0,value:o,onChange:function(e){return c(e.target.value)}}))))},Be=a(106),Ve=a.n(Be),Ae=a(107),ze=a.n(Ae),qe=a(108),Ge=a.n(qe),Ue=a(109),We=a.n(Ue),Ye=a(110),$e=a.n(Ye),He=a(111),Je=a.n(He),Qe=a(112),Ke=a.n(Qe);var Xe=function(){var e=Object(n.useState)(null),t=Object(i.a)(e,2),a=t[0],o=t[1];Object(n.useEffect)((function(){if(null!==a){u()({url:"http://localhost:5000/update_search_recommendation",params:{query:a}}).then((function(e){console.log(e)}))}console.log("The query is - ".concat(a))}),[a]);var c,r=[];return r[0]=Ve.a,r[1]=ze.a,r[2]=Ge.a,r[3]=We.a,r[4]=$e.a,r[5]=Je.a,r[6]=Ke.a,c=Math.floor(Math.random()*r.length),console.log(c),l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"bar",style:{backgroundImage:"url(".concat(r[c],")")}},l.a.createElement(Re,{setQuery:o})),l.a.createElement(De,{query:a}))};var Ze=function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(G,null),l.a.createElement(Xe,null))};function et(){var e=Object(m.g)(),t=Object(n.useState)(""),a=Object(i.a)(t,2),o=a[0],c=a[1],r=Object(n.useState)(""),s=Object(i.a)(r,2),d=s[0],p=s[1],g=Object(n.useState)(""),h=Object(i.a)(g,2),f=h[0],b=h[1],E=Object(n.useState)(""),O=Object(i.a)(E,2),v=O[0],j=O[1],k=Object(n.useState)(""),C=Object(i.a)(k,2),S=C[0],_=C[1];function y(){return(y=Object(N.a)(I.a.mark((function t(a){var n;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),t.next=3,u.a.get("http://localhost:5000/create_user",{params:{email:o,password:d,first:f,last:v,username:S}});case 3:n=t.sent,console.log(n),!1!==n.data.result&&e.push("/");case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return l.a.createElement("div",null,l.a.createElement("form",{onSubmit:function(e){return y.apply(this,arguments)}},l.a.createElement(P.a,{controlId:"first_name",bsSize:"large"},l.a.createElement(w.a,null,"First Name"),l.a.createElement(M.a,{autoFocus:!0,value:f,onChange:function(e){return b(e.target.value)}})),l.a.createElement(P.a,{controlId:"last_name",bsSize:"large"},l.a.createElement(w.a,null,"Last Name"),l.a.createElement(M.a,{value:v,onChange:function(e){return j(e.target.value)}})),l.a.createElement(P.a,{controlId:"username",bsSize:"large"},l.a.createElement(w.a,null,"Username"),l.a.createElement(M.a,{value:S,onChange:function(e){return _(e.target.value)}})),l.a.createElement(P.a,{controlId:"email",bsSize:"large"},l.a.createElement(w.a,null,"Email"),l.a.createElement(M.a,{autoFocus:!0,type:"email",value:o,onChange:function(e){return c(e.target.value)}})),l.a.createElement(P.a,{controlId:"password",bsSize:"large"},l.a.createElement(w.a,null,"Password"),l.a.createElement(M.a,{value:d,onChange:function(e){return p(e.target.value)},type:"password"})),l.a.createElement(T.a,{block:!0,bsSize:"large",disabled:!(o.length>0&&o.length<50)||!(d.length>0&&d.length<50)||!(o.length>0&&o.length<50)||!(d.length>=8&&d.length<16)||!(d.length>0&&d.length<32),type:"submit"},"Register")))}a(173);var tt=function(e){var t=Object(n.useState)([]),a=Object(i.a)(t,2),o=a[0],c=a[1],r=Object(n.useState)(!1),s=Object(i.a)(r,2),m=s[0],d=s[1],p=Object(n.useState)(0),g=Object(i.a)(p,2),h=g[0],f=g[1],b=Object(n.useState)(!1),E=Object(i.a)(b,2),O=E[0],v=E[1],j=Object(n.useState)(!0),k=Object(i.a)(j,2),C=k[0],S=k[1],_=Object(n.useState)(!0),y=Object(i.a)(_,2),I=y[0],N=y[1],P=e.userID,w=localStorage.getItem("userID")===P,M=localStorage.getItem("userLoggedIn"),T=Object(n.useState)(null),F=Object(i.a)(T,2),x=F[0],D=F[1],L=Object(n.useRef)(!1),R=Object(n.useRef)(),B=Object(n.useRef)(),V=Object(n.useCallback)((function(e){O||(B.current&&B.current.disconnect(),B.current=new IntersectionObserver((function(e){e[0].isIntersecting&&C&&(v(!0),console.log("called with last_id of ".concat(x)),setTimeout((function(){A(x)}),1e3))})),e&&B.current.observe(e))}),[O,C]);Object(n.useEffect)((function(){0===o.length&&N(!1)}),[o]),Object(n.useEffect)((function(){window.scrollTo(0,0),u()({url:"http://localhost:5000/get_user_username",params:{user_id:P}}).then((function(e){}))}),[]),Object(n.useEffect)((function(){return setTimeout((function(){A()}),700),function(){null!=R.current&&R.current(),L.current=!0,c([]),S(!0)}}),[P]);var A=function(e){v(!0),u()({method:"GET",url:"http://localhost:5000/profile_photos",params:{user_id:P,batch_size:5,last_id:e},cancelToken:new u.a.CancelToken((function(e){return R.current=e}))}).then((function(e){console.log(e),!1===e.data.result||L.current?L.current||(v(!1),S(!1)):(D(e.data.last_id),S(!0),v(!1),c((function(t){return[].concat(Object(U.a)(t),Object(U.a)(e.data.result))})))})).catch((function(e){u.a.isCancel(e)}))};return l.a.createElement(l.a.Fragment,null,w?l.a.createElement("h2",{style:{marginTop:"10%",marginLeft:"9%"}},"Uploaded Images: ",o.length):l.a.createElement("h2",{style:{marginTop:"10%",marginLeft:"9%"}},"Uploads: ",o.length),l.a.createElement("div",{className:"image-grid"},o.map((function(e,t){return null===e?null:o.length===t+1?l.a.createElement(l.a.Fragment,{key:t},l.a.createElement(xe,{key:e.id,image:e,setOpenBookmarkModal:d,setPhotoId:f,userLoggedIn:M}),l.a.createElement("div",{key:t,ref:V,style:{position:"relative",bottom:"200px",height:"0%"}})):l.a.createElement(xe,{key:e.id,image:e,setOpenBookmarkModal:d,setPhotoId:f,userLoggedIn:M})}))),l.a.createElement("h2",{style:{textAlign:"center"}},O&&"Loading..."),I?l.a.createElement("h2",{style:{textAlign:"center"}},"You haven't uploaded any photos!"):l.a.createElement(l.a.Fragment,null,l.a.createElement("h2",{style:{textAlign:"center"}},!C&&"No more images to display")),m?l.a.createElement(Ce,{openModal:m,setOpenModal:d,photoId:h}):null)},at=(a(174),a(76)),nt=a(69),lt=a.n(nt),ot=a(118),ct=a(198),rt=(a(175),Object(h.a)((function(e){var t;return{root:{display:"flex",flexWrap:"wrap",minWidth:300,width:"100%"},image:(t={position:"relative",height:200},Object(at.a)(t,e.breakpoints.down("xs"),{width:"100% !important",height:100}),Object(at.a)(t,"&:hover, &$focusVisible",{zIndex:1,"& $imageBackdrop":{opacity:.15},"& $imageMarked":{opacity:0},"& $imageTitle":{border:"4px solid currentColor"}}),t),focusVisible:{},imageButton:{position:"absolute",left:0,right:0,top:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",color:e.palette.common.white},imageSrc:{position:"absolute",left:0,right:0,top:0,bottom:0,backgroundSize:"cover",backgroundPosition:"center 40%"},imageBackdrop:{position:"absolute",left:0,right:0,top:0,bottom:0,backgroundColor:e.palette.common.black,opacity:.4,transition:e.transitions.create("opacity")},imageTitle:{position:"relative",padding:"".concat(e.spacing(2),"px ").concat(e.spacing(4),"px ").concat(e.spacing(1)+6,"px"),fontSize:28,fontWeight:"bold"},imageMarked:{height:3,width:18,backgroundColor:e.palette.common.white,position:"absolute",bottom:-2,left:"calc(50% - 9px)",transition:e.transitions.create("opacity")}}})));function it(e){var t=rt(),a={url:e.collection.img,title:e.collection.collection_name,width:"100%"},n="data:image;base64,"+a.url.replace(/(\r\n|\n|\r)/gm,"");return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"collection-box",onClick:function(){e.setCollectionClicked(!0),e.setCollectionIdClicked(e.collection.collection_id),e.setCollectionNameClicked(e.collection.collection_name),e.setCollectionPrivateClicked(e.collection.private),e.setCollectionNumPhotosClicked(e.collection.num_photos),e.setCollectionCreatorClicked(e.collection.creator_id)}},l.a.createElement("div",{className:t.root},l.a.createElement(ot.a,{focusRipple:!0,key:a.title,className:t.image,focusVisibleClassName:t.focusVisible,style:{width:a.width}},l.a.createElement("span",{className:t.imageSrc,style:{backgroundImage:"url(".concat(n,")")}}),l.a.createElement("span",{className:t.imageBackdrop}),l.a.createElement("span",{className:t.imageButton},l.a.createElement(ct.a,{component:"span",variant:"subtitle1",color:"inherit",className:t.imageTitle},!0===e.collection.private?l.a.createElement(lt.a,null):null,a.title,l.a.createElement("span",{className:t.imageMarked})))))))}var st=a(113),ut=a.n(st);function mt(e){var t=Object(n.useState)([e.userID]),a=Object(i.a)(t,2),o=a[0],c=a[1],r=Object(n.useState)(""),s=Object(i.a)(r,2),d=s[0],p=s[1],g=Object(n.useState)([]),h=Object(i.a)(g,2),f=h[0],b=h[1],E=Object(n.useState)(!1),O=Object(i.a)(E,2),v=O[0],j=O[1],k=Object(n.useState)(null),C=Object(i.a)(k,2),S=C[0],_=C[1],y=Object(n.useState)(null),I=Object(i.a)(y,2),N=I[0],P=I[1],w=Object(n.useState)(null),M=Object(i.a)(w,2),T=M[0],F=M[1],x=Object(n.useState)(null),D=Object(i.a)(x,2),L=D[0],R=D[1],B=Object(n.useState)(null),V=Object(i.a)(B,2),A=V[0],z=V[1],q=Object(n.useState)(!0),G=Object(i.a)(q,2),U=G[0],W=G[1],Y=Object(n.useState)(!0),$=Object(i.a)(Y,2),H=$[0],J=$[1],Q=e.userID,K=e.displayMyProfile,X=Object(n.useState)(null),Z=Object(i.a)(X,2),ee=Z[0],te=Z[1];Object(n.useEffect)((function(){u()({url:"http://localhost:5000/get_user_username",params:{user_id:Q}}).then((function(e){e.data.result&&c(e.data.result)})),u()({url:"http://localhost:5000/get_user_email",params:{user_id:Q}}).then((function(e){e.data.result&&p(e.data.result)}))}),[]),Object(n.useEffect)((function(){u()({method:"GET",url:"http://localhost:5000/get_users_collection",params:{user_id:Q,batch_size:20}}).then((function(e){console.log(e),!1!==e.data.result?(b(e.data.result),e.data.result.find((function(e){return!1===e.private}))||!0===K?J(!0):J(!1)):J(!1),W(!1)}))}),[Q]);Object(n.useEffect)((function(){u()({method:"GET",url:"http://localhost:5000/get_profile_photo",params:{user_id:Q}}).then((function(e){console.log(e),e.data.result?te(e.data.result):te(null)}))}),[]),console.log(ee);var ae,ne=f.map((function(e){return!0===K||!1===e.private?l.a.createElement(it,{key:e.collection_id,collection:e,setCollectionClicked:j,setCollectionIdClicked:_,setCollectionNameClicked:P,setCollectionPrivateClicked:F,setCollectionNumPhotosClicked:R,setCollectionCreatorClicked:z}):null})),le=l.a.createElement(m.a,{push:!0,to:{pathname:"/collection-".concat(S),state:{collection_id:"".concat(S),collection_name:"".concat(N),private:"".concat(T),num_photos:"".concat(L),creator_id:"".concat(A),isMyCollection:"".concat(K)}}});return ae=v?le:l.a.createElement("div",{className:"collectionsPageWrapper"},e.displayMyProfile?null:l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"userpage-username",style:{backgroundImage:"url(".concat(ut.a,")")}},null!==ee?l.a.createElement("div",{className:"users-profile-pic"},l.a.createElement("div",{className:"dp-photo-wrapper"},l.a.createElement("div",{className:"dp-photo"},l.a.createElement("img",{src:"data:image/jpg;base64,".concat(ee),alt:"collection"})))):null,e.displayMyProfile?null:l.a.createElement("h1",{style:{textAlign:"center",margin:"0"}},o),e.displayMyProfile?null:l.a.createElement("h3",{style:{textAlign:"center"}},"Email: ",d))),l.a.createElement("div",{className:"title"},e.displayMyProfile?l.a.createElement("h2",{className:"quicksand",style:{marginTop:"10%",textAlign:"center"}},"My collections"):l.a.createElement("h2",{className:"quicksand",style:{marginTop:"10%",marginBottom:"8%",textAlign:"center"}},"Public Collections")),l.a.createElement("div",{className:"collectionsWrapper"},ne)),l.a.createElement(l.a.Fragment,null,ae,l.a.createElement("h1",{style:{textAlign:"center"}},U&&"Loading..."," "),l.a.createElement("h2",{style:{textAlign:"center"}},!H&&"This user does not have any public collections"))}a(176);var dt=function(e){var t=Object(n.useState)(null),a=Object(i.a)(t,2),o=a[0],c=a[1],r=Object(m.g)(),s=function(e){u()({method:"GET",url:"http://localhost:5000/get_profile_photo",params:{user_id:e}}).then((function(e){console.log(e),e.data.result?c(e.data.result):c(null)}))};if(Object(n.useEffect)((function(){localStorage.getItem("userID")===e.location.state.uploaderID?s(localStorage.getItem("userID")):s(e.location.state.uploaderID)}),[]),void 0===e.location.state)return l.a.createElement(l.a.Fragment,null,l.a.createElement(G,null),l.a.createElement("h1",null,"Nothing found"));var p=localStorage.getItem("userID")===e.location.state.uploaderID;return document.body.style.overflow="unset",l.a.createElement(l.a.Fragment,null,l.a.createElement(G,null),p?l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"users-profile-pic",style:{marginTop:"20%"}},l.a.createElement("div",{className:"dp-photo-wrapper"},null!==o?l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"dp-photo"},l.a.createElement("img",{src:"data:image/jpg;base64,".concat(o),alt:"profile"}))):null),l.a.createElement("div",{className:"upload-dp-button",style:{textAlign:"center"}},l.a.createElement(d.a,{variant:"outlined",onClick:function(){r.push("/upload-profile-photo")}},"Update Profile Photo")))):null,l.a.createElement("div",{className:"profile-wrapper",style:{marginTop:"20%"}},p?null:l.a.createElement(mt,{userID:e.location.state.uploaderID,displayMyProfile:p}),l.a.createElement(tt,{userID:e.location.state.uploaderID,userLoggedIn:localStorage.getItem("userLoggedIn")})))},pt=function(e){var t=Object(n.useState)([]),a=Object(i.a)(t,2),o=a[0],c=a[1],r=Object(n.useState)([]),s=Object(i.a)(r,2),p=s[0],g=s[1],h=Object(n.useState)(""),f=Object(i.a)(h,2),b=f[0],O=f[1],v=Object(n.useState)(!1),j=Object(i.a)(v,2),k=j[0],C=j[1],S=Object(n.useRef)(),_=e.location.state.id,y=Object(m.g)();Object(n.useEffect)((function(){var e,t=!0;return e=_,u()({method:"GET",url:"http://localhost:5000/get_comments_to_image",params:{image_id:e,batch_size:20},cancelToken:new u.a.CancelToken((function(e){return S.current=e}))}).then((function(a){!1!==a.data.result&&t?c(a.data.result):t&&c([]),function(e){u()({method:"GET",url:"http://localhost:5000/get_tags",params:{image_id:e},cancelToken:new u.a.CancelToken((function(e){return S.current=e}))}).then((function(e){console.log(e),!1!==e.data.result&&t?(console.log(e.data.result),g(e.data.result)):t&&g([])}))}(e)})),function(e){u()({method:"GET",url:"http://localhost:5000/get_related_images",params:{image_id:e}}).then((function(e){console.log(e)}))}(_),function(){console.log("CLEAN UP - PostInfo"),S.current(),t=!1}}),[b,_]);return l.a.createElement(l.a.Fragment,null,l.a.createElement(G,null),l.a.createElement("div",{className:"postWrapper"},l.a.createElement("div",{className:"postInfo"},l.a.createElement("div",{className:"username"},l.a.createElement("div",{className:"username-wrapper"},l.a.createElement(d.a,{varient:"outlined",onClick:function(){y.push({pathname:"/profile/".concat(e.location.state.uploader),state:{uploaderID:e.location.state.uploader}})}},"@",e.location.state.uploader)),localStorage.getItem("userLoggedIn")?l.a.createElement(l.a.Fragment,null,localStorage.getItem("userID")!==e.location.state.uploader?l.a.createElement(re,{uploader:e.location.state.uploader}):null,l.a.createElement("div",{className:"bookmark-wrapper"},l.a.createElement(E.a,{variant:"contained",onClick:function(){C(!0)}},l.a.createElement(ee.a,null)))):null,l.a.createElement(se,{num_likes:e.location.state.num_likes,image_id:e.location.state.id,uploader_id:e.location.state.uploader}))),l.a.createElement("div",{className:"postImage"},l.a.createElement("img",{src:"data:image/jpg;base64,".concat(e.location.state.url),alt:e.location.state.caption}),l.a.createElement("div",{className:"recImages-nested"},l.a.createElement("h1",{className:"roboto"}," Related Photos:"),l.a.createElement("div",{className:"recImage"}),l.a.createElement("div",{className:"recImage"}),l.a.createElement("div",{className:"recImage"}))),l.a.createElement("div",{className:"postFeed-nested"},l.a.createElement("h1",null,e.location.state.title),l.a.createElement("h2",{className:"roboto"},e.location.state.caption),l.a.createElement("div",{className:"postTags"},l.a.createElement("h3",null,"Tags:"," ",p.length<1?"this post has no tags to display":null),l.a.createElement("div",{className:"flexbox-tags"},p.length>0?p.map((function(e,t){return l.a.createElement(d.a,{key:t,variant:"contained"},"#",e)})):null)),l.a.createElement("div",{className:"postPrice"},l.a.createElement("h2",{className:"roboto"},"Price: $",e.location.state.price),l.a.createElement(d.a,{variant:"contained",onClick:function(){!function(e){u()({method:"POST",url:"http://localhost:5000/add_purchase",params:{save_for_later:0,purchased:0,image_id:String(e)}}).then((function(e){!1!==e.data.result&&console.log(e)}))}(e.location.state.id)}},"Add to Cart")),l.a.createElement("div",{className:"postComments"},l.a.createElement("h2",{className:"roboto"},"Comments:"),l.a.createElement(Ee,{image_id:e.location.state.id,comments_list:o,updateComments:O,uploader_id:e.location.state.uploader})))),k?l.a.createElement(Ce,{openModal:!0,setOpenModal:C,photoId:e.location.state.id}):null)};a(177);function gt(e){var t=Object(n.useState)(""),a=Object(i.a)(t,2),o=a[0],c=a[1],r=Object(n.useState)(""),s=Object(i.a)(r,2),u=s[0],m=s[1],d=Object(n.useState)(!1),p=Object(i.a)(d,2),g=p[0],h=p[1],f=Object(n.useState)(!0),b=Object(i.a)(f,2),E=b[0],O=b[1],v=e.uploadButtonClicked;Object(n.useEffect)((function(){O(!1)}),[]),Object(n.useEffect)((function(){if(!1===E){var t=j(o);e.setTitleValidated([t,o])}}),[v]);var j=function(e){return e.length>0?(h(!1),m(""),!0):(m("Title must be included"),h(!0),!1)};return l.a.createElement(l.a.Fragment,null,l.a.createElement(S.a,{required:!0,error:g,helperText:u,onChange:function(e){c(e.target.value),j(e.target.value)},label:"Title",InputLabelProps:{shrink:!0}}))}function ht(e){var t=Object(n.useState)(""),a=Object(i.a)(t,2),o=a[0],c=a[1],r=Object(n.useState)(""),s=Object(i.a)(r,2),u=s[0],m=s[1],d=Object(n.useState)(!1),p=Object(i.a)(d,2),g=p[0],h=p[1],f=Object(n.useState)(!0),b=Object(i.a)(f,2),E=b[0],O=b[1],v=e.uploadButtonClicked;Object(n.useEffect)((function(){O(!1)}),[]),Object(n.useEffect)((function(){if(!1===E){var t=j(o);e.setCaptionValidated([t,o])}}),[v]);var j=function(e){return h(!1),m(""),!0};return l.a.createElement(l.a.Fragment,null,l.a.createElement(S.a,{error:g,helperText:u,onChange:function(e){c(e.target.value),j(e.target.value)},label:"Caption",InputLabelProps:{shrink:!0}}))}function ft(e){var t=Object(n.useState)(""),a=Object(i.a)(t,2),o=a[0],c=a[1],r=Object(n.useState)(""),s=Object(i.a)(r,2),u=s[0],m=s[1],d=Object(n.useState)(!1),p=Object(i.a)(d,2),g=p[0],h=p[1],f=Object(n.useState)(!0),b=Object(i.a)(f,2),E=b[0],O=b[1],v=e.uploadButtonClicked;Object(n.useEffect)((function(){O(!1)}),[]),Object(n.useEffect)((function(){if(!1===E){var t=j(o);e.setTagsValidated([t,o])}}),[v]);var j=function(e){return h(!1),m(""),!0};return l.a.createElement(l.a.Fragment,null,l.a.createElement(S.a,{error:g,helperText:u,onChange:function(e){c(e.target.value),j(e.target.value)},label:"Tags - Must be comma seperated (e.g. 'nature','trees','green')",InputLabelProps:{shrink:!0}}))}function bt(e){var t=Object(n.useState)(""),a=Object(i.a)(t,2),o=a[0],c=a[1],r=Object(n.useState)(""),s=Object(i.a)(r,2),u=s[0],m=s[1],d=Object(n.useState)(!1),p=Object(i.a)(d,2),g=p[0],h=p[1],f=Object(n.useState)(!0),b=Object(i.a)(f,2),E=b[0],O=b[1],v=e.uploadButtonClicked;Object(n.useEffect)((function(){O(!1)}),[]),Object(n.useEffect)((function(){if(!1===E){var t=j(o);e.setPriceValidated([t,o])}}),[v]);var j=function(e){return parseFloat(e)>0?(h(!1),m(""),!0):(m("Price must be included"),h(!0),!1)};return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",null,l.a.createElement(S.a,{required:!0,error:g,helperText:u,onChange:function(e){c(e.target.value),j(e.target.value)},label:"Price",type:"number",InputLabelProps:{shrink:!0}})))}var Et=a(70),Ot=a.n(Et);a(181);function vt(e){var t=Object(m.g)();return e.isOpen?c.a.createPortal(l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"overlay-styles"}),l.a.createElement("div",{className:"confirmation-modal"},l.a.createElement("h3",null,"You post has been uploaded successfully! Please check your profile page under the profile tab to see your uploads."),l.a.createElement(d.a,{variant:"contained",color:"primary",onClick:function(){t.replace("/")}},"Return to Main Page"))),document.getElementById("portal")):null}function jt(){return(jt=Object(N.a)(I.a.mark((function e(t,a,n,l,o){var c,r;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(c=new FormData).append("image",t),c.append("caption",n),c.append("title",a),c.append("price",l),c.append("tags",o),e.next=8,u.a.post("http://localhost:5000/post",c);case 8:return r=e.sent,e.abrupt("return",r);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function kt(e){var t=Object(n.useState)(null),a=Object(i.a)(t,2),o=a[0],r=a[1],s=Object(n.useState)([]),u=Object(i.a)(s,2),p=u[0],g=u[1],h=Object(n.useState)(!1),f=Object(i.a)(h,2),b=f[0],E=f[1],O=Object(n.useState)(!1),v=Object(i.a)(O,2),j=v[0],k=v[1],C=Object(n.useState)(!1),S=Object(i.a)(C,2),_=S[0],y=S[1],I=Object(n.useState)(!1),N=Object(i.a)(I,2),P=N[0],w=N[1],M=Object(n.useState)(!1),T=Object(i.a)(M,2),F=T[0],x=T[1],D=Object(n.useState)(!1),L=Object(i.a)(D,2),R=L[0],B=L[1],V=Object(n.useState)(!1),A=Object(i.a)(V,2),z=A[0],q=A[1],G=Object(m.g)();Object(n.useEffect)((function(){(console.log("called"),j[0]&&_[0]&&P[0]&&F[0]&&null!==o)&&(console.log("approved"),q(!0),function(e,t,a,n,l){return jt.apply(this,arguments)}(o,j[1],_[1],P[1],F[1]).then((function(e){console.log(e),e.data.result&&B(!0),q(!1)})))}),[j,_,P,F]);return c.a.createPortal(l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"grid-container-editpost"},l.a.createElement("div",{className:"grid-item-image"},l.a.createElement(Ot.a,{withIcon:!0,buttonText:"Choose image",onChange:function(e,t){g(p.concat(e)),r(t[0])},imgExtension:[".jpg",".png",".jpeg"],maxFileSize:5242880,withPreview:!0,singleImage:!0,withLabel:!0})),l.a.createElement("div",{className:"edit-post-details"},l.a.createElement(gt,{uploadButtonClicked:b,setTitleValidated:k}),l.a.createElement(ht,{uploadButtonClicked:b,setCaptionValidated:y}),l.a.createElement(bt,{uploadButtonClicked:b,setPriceValidated:w}),l.a.createElement(ft,{uploadButtonClicked:b,setTagsValidated:x}),l.a.createElement("h4",null,"Tags are important to allow our system to match users with your photos. We encourage the use of tags but they are not optional. Upon submission our system will auto-tag your image to improve its search appearance but you may choose to remove these by editing your post."),l.a.createElement("div",{className:"capture-form-buttons"},l.a.createElement(d.a,{variant:"contained",color:"primary",size:"large",onClick:function(e){E(!b)}},"SAVE"),l.a.createElement(d.a,{variant:"contained",color:"primary",size:"large",onClick:function(){G.goBack()}},"Cancel")),l.a.createElement("h2",{style:{textAlign:"center"}},z&&"Upload in progress, please wait..."))),R?l.a.createElement(vt,{isOpen:!0}):null),document.getElementById("editPostPortal"))}function Ct(){var e=Object(n.useState)(""),t=Object(i.a)(e,2),a=t[0],o=t[1],c=Object(n.useState)(""),r=Object(i.a)(c,2),s=r[0],d=r[1],p=Object(n.useState)(""),g=Object(i.a)(p,2),h=g[0],f=g[1],b=Object(n.useState)(""),E=Object(i.a)(b,2),O=E[0],v=E[1],j=Object(m.g)();function k(){return(k=Object(N.a)(I.a.mark((function e(t){var n;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,u.a.get("http://localhost:5000/login",{params:{email:a,password:s}});case 3:if(n=e.sent,console.log(n),!n.data.result){e.next=11;break}return e.next=8,u.a.get("http://localhost:5000/change_password",{params:{email:a,password:s,new_password:h}});case 8:n=e.sent,console.log(n),n.data.result&&j.push("/");case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return l.a.createElement("div",null,l.a.createElement("form",{onSubmit:function(e){return k.apply(this,arguments)}},l.a.createElement(P.a,{controlId:"email",bsSize:"large"},l.a.createElement(w.a,null,"Email"),l.a.createElement(M.a,{autoFocus:!0,type:"email",value:a,onChange:function(e){return o(e.target.value)}})),l.a.createElement(P.a,{controlId:"password",bsSize:"large"},l.a.createElement(w.a,null,"Password"),l.a.createElement(M.a,{value:s,onChange:function(e){return d(e.target.value)},type:"password"})),l.a.createElement(P.a,{controlId:"new_password",bsSize:"large"},l.a.createElement(w.a,null,"New Password"),l.a.createElement(M.a,{value:h,onChange:function(e){return f(e.target.value)},type:"password"})),l.a.createElement(P.a,{controlId:"new_confirmed_password",bsSize:"large"},l.a.createElement(w.a,null,"Confirm New Password"),l.a.createElement(M.a,{value:O,onChange:function(e){return v(e.target.value)},type:"password"})),l.a.createElement(T.a,{block:!0,bsSize:"large",disabled:!(h.length>=8&&h.length<16)||!(O.length>=8&&O.length<16&&O===h)||!(a.length>0&&a.length<50)||!(s.length>=8&&s.length<16),type:"submit"},"Login")))}function St(){var e=Object(n.useState)(""),t=Object(i.a)(e,2),a=t[0],o=t[1],c=Object(m.g)();function r(){return(r=Object(N.a)(I.a.mark((function e(t){var n;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,u.a.get("http://localhost:5000/forgot_password_get_change_password_link",{params:{email:a}});case 3:n=e.sent,console.log(n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return l.a.createElement("div",null,l.a.createElement("form",{onSubmit:function(e){return r.apply(this,arguments)}},l.a.createElement("h1",null,"Forgot your password? Get link to change it."),l.a.createElement(P.a,{controlId:"email",bsSize:"large"},l.a.createElement(w.a,null,"Email"),l.a.createElement(M.a,{autoFocus:!0,type:"email",value:a,onChange:function(e){return o(e.target.value)}})),l.a.createElement(T.a,{block:!0,bsSize:"large",disabled:!(a.length>0&&a.length<50),type:"submit"},"Send Email")),l.a.createElement(T.a,{block:!0,bsSize:"large",onClick:function(){c.goBack()}},"Cancel"))}function _t(e){var t=localStorage.getItem("userID")===e.location.state.uploaderID;return l.a.createElement(l.a.Fragment,null,l.a.createElement(G,null),l.a.createElement(mt,{userID:e.location.state.uploaderID,displayMyProfile:t}))}a(182),a(183),a(184);var yt=a(114),It=a.n(yt),Nt=function(e){Object(H.a)(a,e);var t=Object(J.a)(a);function a(e){var n;return Object(W.a)(this,a),(n=t.call(this,e)).setSpans=function(){if(null!=n.imageRef.current){var e=n.imageRef.current.clientHeight,t=Math.ceil(e/10);n.setState({spans:t})}},n.setAddedToCartModal=function(e){n.setState({openCartAddedModal:e})},n.setCartStatus=function(e){n.setState({cartStatus:e})},n.setOpenPostModal=function(e){n.setState({openPostModal:e})},n.setNumLikes=function(e){n.setState({numLikes:e})},n.setNumLikesDummy=function(){console.log("dummy like for related image")},n.setRelatedImagesClicked=function(e){console.log(e),n.setState({relatedImageClicked:e,openPostModal:!1,openRelatedPostModal:!0})},n.handleBuyClicked=function(e){e.stopPropagation();u()({url:"http://localhost:5000/item_is_in_cart",params:{image_id:n.props.image.id}}).then((function(e){var t,a,l;console.log(e),e.data.result?function(e,t,a){u()({method:"POST",url:"http://localhost:5000/delete_item_from_cart",params:{image_id:String(e)}}).then((function(e){!1!==e.data.result&&(t(!0),a("removed"))}))}(n.props.image.id,n.setAddedToCartModal,n.setCartStatus):(t=n.props.image.id,a=n.setAddedToCartModal,l=n.setCartStatus,u()({method:"POST",url:"http://localhost:5000/add_purchase",params:{save_for_later:0,purchased:0,image_id:String(t)}}).then((function(e){!1!==e.data.result&&(a(!0),l("added"))})))}))},n.handleImageClicked=function(e){n.setState({openPostModal:!0})},n.handleDeleteClicked=function(e){u()({method:"GET",url:"http://localhost:5000/delete_photo_from_collection",params:{collection_id:n.collection_id,image_id:n.image_id}}).then((function(e){console.log(e)})),e.stopPropagation(),window.location.reload()},n.imageRef=l.a.createRef(),n.setOpenPostModal=n.setOpenPostModal.bind(Object($.a)(n)),n.setAddedToCartModal=n.setAddedToCartModal.bind(Object($.a)(n)),n.setCartStatus=n.setCartStatus.bind(Object($.a)(n)),n.setNumLikesDummy=n.setNumLikesDummy.bind(Object($.a)(n)),n.setNumLikes=n.setNumLikes.bind(Object($.a)(n)),n.setRelatedImagesClicked=n.setRelatedImagesClicked.bind(Object($.a)(n)),n.state={openPostModal:!1,openRelatedPostModal:!1,openCartAddedModal:!1,cartStatus:"",spans:0,animateImages:"",numLikes:n.props.image.num_likes,relatedImageClicked:{}},n.collection_id=e.image.collection_id,n.image_id=e.image.id,n}return Object(Y.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.imageRef.current.addEventListener("load",this.setSpans),setTimeout((function(){e.setState({animateImages:"image-container-animate"})}),100),console.log("isMyCollection=".concat(this.props.isMyCollection))}},{key:"render",value:function(){var e,t=this;return e=l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"image-container ".concat(this.state.animateImages),onClick:this.handleImageClicked},l.a.createElement("div",{className:"icon-bar"}),l.a.createElement("img",{className:"image-size",ref:this.imageRef,src:"data:image/jpg;base64,".concat(this.props.image.img),alt:this.props.caption}),l.a.createElement(E.a,{classes:{root:"".concat(this.props.classes.root," ").concat(this.props.classes.likeButton)},variant:"contained",onClick:this.handleLikeClicked},l.a.createElement(X.a,{classes:{root:this.props.classes.likeSize}}),l.a.createElement("div",{className:"num-likes"},this.state.numLikes)),l.a.createElement(E.a,{classes:{root:"".concat(this.props.classes.root," ").concat(this.props.classes.buy)},variant:"contained",onClick:this.handleBuyClicked},l.a.createElement(ae.a,null)),"true"===this.props.isMyCollection?l.a.createElement(E.a,{variant:"contained",classes:{root:"".concat(this.props.classes.root," ").concat(this.props.classes.remove)},onClick:this.handleDeleteClicked},l.a.createElement(It.a,{classes:{root:"".concat(this.props.classes.removeIcon)}})):null),this.state.openPostModal?l.a.createElement("div",{className:"modal-wrapper",onClick:function(){t.setState({openPostModal:!1})}},l.a.createElement(Se,{openModal:!0,setOpenModal:this.setOpenPostModal,imageID:this.props.image.id,url:this.props.image.img,caption:this.props.image.caption,price:this.props.image.price,title:this.props.image.title,uploader:this.props.image.uploader,setNumLikes:this.setNumLikes,setRelatedImagesClicked:this.setRelatedImagesClicked})):null,this.state.openRelatedPostModal?l.a.createElement("div",{className:"modal-wrapper",onClick:function(){t.setState({openRelatedPostModal:!1})}},"this.state.relatedImageClicked ?",l.a.createElement(Se,{openModal:!0,setOpenModal:this.setOpenPostModal,imageID:this.state.relatedImageClicked.id,url:this.state.relatedImageClicked.img,caption:this.state.relatedImageClicked.caption,price:this.state.relatedImageClicked.price,title:this.state.relatedImageClicked.title,uploader:this.state.relatedImageClicked.uploader,setNumLikes:this.setNumLikesDummy,setRelatedImagesClicked:this.setRelatedImagesClicked})):null,this.state.openCartAddedModal?l.a.createElement("div",{className:"modal-wrapper",onClick:function(){t.setState({openCartAddedModal:!1})}},l.a.createElement(_e,{openModal:!0,cartStatus:this.state.cartStatus})):null),l.a.createElement(l.a.Fragment,null,e)}}]),a}(n.Component),Pt=Object(Q.a)({root:{position:"absolute",color:"rgba(255, 255, 255,1)"},likeIcon:{width:"50%",height:"10%"},removeIcon:{width:"95%",height:"10%"},likeButton:{bottom:"0%",left:"5%",width:"20%",height:"15%"},buy:{bottom:"0%",left:"80%",width:"20%",height:"15%"},remove:{right:"0%",top:"0%",width:"15%",height:"25%","&:hover":{backgroundColor:"rgba(234, 241, 223, 0.26)"}}})(Nt),wt=function(e){var t=Object(n.useState)([]),a=Object(i.a)(t,2),o=a[0],c=a[1],r=Object(n.useState)(!1),s=Object(i.a)(r,2),u=s[0],m=s[1],d=e.retrievedImgs;return Object(n.useEffect)((function(){c(d)}),[d]),l.a.createElement(l.a.Fragment,null,0===o.length&&!1===e.loading?l.a.createElement("h1",{style:{textAlign:"center"}},"There are no photos in this collection"):l.a.createElement("div",{className:"image-grid"},o.map((function(t,a){return null===t?null:l.a.createElement(Pt,{key:a,image:t,openBookmarkModal:u,setOpenBookmarkModal:m,isMyCollection:e.isMyCollection})}))))};function Mt(e){var t=Object(n.useState)(e.location.state.creator_id),a=Object(i.a)(t,2),o=a[0],c=a[1],r=Object(n.useState)([]),s=Object(i.a)(r,2),h=s[0],f=s[1],b=Object(n.useState)(!0),E=Object(i.a)(b,2),O=E[0],v=E[1],j=Object(n.useState)(e.location.state.private),k=Object(i.a)(j,2),C=k[0],S=k[1],_=Object(m.g)();Object(n.useEffect)((function(){u()({url:"http://localhost:5000/get_user_username",params:{user_id:e.location.state.creator_id}}).then((function(e){e.data.result&&c(e.data.result)}))}),[]);var y=Object(n.useState)(null),I=Object(i.a)(y,2),N=I[0],P=I[1],w=e.location.state.collection_id;console.log(e.location.state),Object(n.useEffect)((function(){console.log("getting collections data");u()({method:"GET",url:"http://localhost:5000/get_collection_data",params:{collection_id:w}}).then((function(e){console.log(e),e.data.result&&f(e.data.result),v(!1)}))}),[C,w]);var M=function(t){u()({method:"POST",url:"http://localhost:5000/update_collections_private",params:{collection_id:e.location.state.collection_id,private:t}}).then((function(e){console.log(e),S(0===t?"false":"true")}))},T=function(){M("true"===C?0:1)};return l.a.createElement(l.a.Fragment,null,l.a.createElement(G,null),l.a.createElement("div",{className:"collectionDataWrapper"},l.a.createElement("div",{className:"circle-wrapper"},l.a.createElement("div",{className:"circleBase"},l.a.createElement("div",{className:"collection-info"},"true"===C?l.a.createElement(lt.a,null):null,l.a.createElement("h1",null,e.location.state.collection_name),l.a.createElement("p",null,"by @",o),l.a.createElement("p",null,"Total photos: ",h.length),"true"===e.location.state.isMyCollection?l.a.createElement(d.a,{"aria-controls":"simple-menu","aria-haspopup":"true",variant:"outlined",color:"primary",onClick:function(e){P(e.currentTarget)}},"Edit collection"):null,l.a.createElement(p.a,{id:"simple-menu",anchorEl:N,keepMounted:!0,open:Boolean(N),onClose:function(){P(null)}},"true"===C?l.a.createElement(g.a,{onClick:T},"Make Public"):l.a.createElement(g.a,{onClick:T},"Make Private"),l.a.createElement(g.a,{onClick:function(){u()({method:"POST",url:"http://localhost:5000/delete_collection",params:{collection_id:e.location.state.collection_id}}).then((function(e){console.log(e),e.data.result&&_.goBack()}))}},"Delete collection"))))),l.a.createElement(wt,{retrievedImgs:h,isMyCollection:e.location.state.isMyCollection,loading:O})),l.a.createElement("h2",{style:{textAlign:"center"}},O&&"Loading..."))}a(185);function Tt(e){var t=function(t){u()({method:"POST",url:"http://localhost:5000/update_user_purchases_details",params:{save_for_later:t,purchased:0,image_id:e.image_id}}).then((function(t){console.log(t),!1!==t.data.result&&e.setMoveButtonClicked(!e.moveButtonClicked)}))};return console.log(e.save_for_later),l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"shopping-item"},l.a.createElement("div",{className:"shopping-item-grid"},l.a.createElement("div",{className:"image"},l.a.createElement("img",{src:"data:image/jpg;base64,".concat(e.img),alt:e.caption})),l.a.createElement("div",{className:"image-info"},l.a.createElement("h2",null,"Title: ",e.title),l.a.createElement("h2",null,"Caption:"),l.a.createElement("p",null,e.caption),l.a.createElement("h3",null,"Price: $",e.price),l.a.createElement(d.a,{variant:"outlined",color:"primary",onClick:function(){console.log("save later clicked"),!0===e.save_for_later?(console.log("save_for_later is true->change to move to cart"),t(0)):t(1)}},!0===e.save_for_later?"Move to Cart":"Save for Later"),l.a.createElement(d.a,{variant:"outlined",color:"primary",onClick:function(){u()({method:"POST",url:"http://localhost:5000/delete_item_from_cart",params:{image_id:e.image_id}}).then((function(t){!1!==t.data.result&&(console.log(t),e.setDeleteButtonClicked(!e.deleteButtonClicked))}))}},"Delete")))))}a(186);function Ft(){var e=Object(n.useState)(!1),t=Object(i.a)(e,2),a=t[0],o=t[1],c=Object(n.useState)([]),r=Object(i.a)(c,2),s=r[0],p=r[1],g=Object(n.useState)([]),h=Object(i.a)(g,2),f=h[0],b=h[1],E=Object(n.useState)(!1),O=Object(i.a)(E,2),v=O[0],j=O[1],k=Object(n.useState)(!1),C=Object(i.a)(k,2),S=C[0],_=C[1],y=function(){u()({method:"GET",url:"http://localhost:5000/get_user_purchases",params:{save_for_later:1,purchased:0}}).then((function(e){!1!==e.data.result&&(console.log(e),e.data&&(console.log(e.data.result),b(e.data.result)))}))};Object(n.useEffect)((function(){u()({method:"GET",url:"http://localhost:5000/get_user_purchases",params:{save_for_later:0,purchased:0}}).then((function(e){!1!==e.data.result&&(console.log(e),p(e.data.result)),y()})),console.log("rerendering shopping page")}),[v,S]);var I=s.map((function(e){return l.a.createElement(Tt,{key:e.image_id,caption:e.caption,image_id:e.image_id,img:e.img,price:e.price,purchased:e.purchased,save_for_later:e.save_for_later,title:e.title,setMoveButtonClicked:j,moveButtonClicked:v,setDeleteButtonClicked:_,deleteButtonClicked:S})})),N=f.map((function(e){return l.a.createElement(Tt,{key:e.image_id,caption:e.caption,image_id:e.image_id,img:e.img,price:e.price,purchased:e.purchased,save_for_later:e.save_for_later,title:e.title,setMoveButtonClicked:j,moveButtonClicked:v,setDeleteButtonClicked:_,deleteButtonClicked:S})})),P=0;s.forEach((function(e){P+=parseFloat(e.price)})),console.log(P);var w,M=l.a.createElement(m.a,{push:!0,to:{pathname:"/checkout",state:{totalPrice:"".concat(Number(P).toFixed(2))}}});return console.log(I),w=a?M:l.a.createElement("div",{className:"shopping-cart-page"},l.a.createElement("div",{className:"shopping-cart"},l.a.createElement("h1",null,"My Shopping Cart"),l.a.createElement("div",{className:"shopping-cart-grid"},l.a.createElement("div",{className:"shopping-cart-items"},I),l.a.createElement("div",{className:"shopping-cart-subtotal"},l.a.createElement("h2",null,"Subtotal (",s.length," items): $",Number(P).toFixed(2)),s.length>0?l.a.createElement(d.a,{variant:"outlined",color:"primary",onClick:function(){o(!0)}},"Proceed to Checkout"):null))),l.a.createElement("div",{className:"save-for-later"},l.a.createElement("h1",null,"Saved for later"),l.a.createElement("div",{className:"shopping-cart-grid"},l.a.createElement("div",{className:"shopping-cart-items"},N)))),l.a.createElement(l.a.Fragment,null,l.a.createElement(G,null),l.a.createElement("div",{className:"shopping-cart-wrapper"},w))}a(187),a(188);function xt(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"shopping-item"},l.a.createElement("div",{className:"shopping-item-grid"},l.a.createElement("div",{className:"image"},l.a.createElement("img",{src:"data:image/jpg;base64,".concat(e.img),alt:e.caption})),l.a.createElement("div",{className:"image-info"},l.a.createElement("h2",null,"Title: ",e.title),l.a.createElement("h3",null,"Price: $",Number(e.price).toFixed(2))))))}a(189);function Dt(e){var t=Object(m.g)();return e.isOpen?c.a.createPortal(l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"overlay-styles"}),l.a.createElement("div",{className:"confirmation-modal"},l.a.createElement("h3",null,"You order has been approved! Please visit 'My Purchases' in your profile tab to download."),l.a.createElement(d.a,{variant:"contained",color:"primary",onClick:function(){t.replace("/")}},"Return to Main Page"))),document.getElementById("portal")):null}function Lt(e){var t=Object(n.useState)(""),a=Object(i.a)(t,2),o=a[0],c=a[1],r=Object(n.useState)(""),s=Object(i.a)(r,2),u=s[0],m=s[1],d=Object(n.useState)(!1),p=Object(i.a)(d,2),g=p[0],h=p[1],f=Object(n.useState)(!0),b=Object(i.a)(f,2),E=b[0],O=b[1],v=e.placeOrderClicked;Object(n.useEffect)((function(){O(!1)}),[]),Object(n.useEffect)((function(){if(!1===E){var t=j(o);e.setCardNameValidated(t)}}),[v]);var j=function(e){return e.length>0&&/\w+\s\w+/.test(e)?(h(!1),m(""),!0):(m("Enter your card name [first name + last name]"),h(!0),!1)};return l.a.createElement(l.a.Fragment,null,l.a.createElement("h3",null,"NAME ON CARD"),l.a.createElement(S.a,{required:!0,error:g,helperText:u,onChange:function(e){c(e.target.value),j(e.target.value)},id:"outlined-required",label:"Required",variant:"outlined"}))}function Rt(e){var t=Object(n.useState)(""),a=Object(i.a)(t,2),o=a[0],c=a[1],r=Object(n.useState)(""),s=Object(i.a)(r,2),u=s[0],m=s[1],d=Object(n.useState)(!1),p=Object(i.a)(d,2),g=p[0],h=p[1],f=Object(n.useState)(!0),b=Object(i.a)(f,2),E=b[0],O=b[1],v=e.placeOrderClicked;Object(n.useEffect)((function(){O(!1)}),[]),Object(n.useEffect)((function(){if(!1===E){var t=j(o);e.setCardNumValidated(t)}}),[v]);var j=function(e){return 16===e.length&&/\d+/.test(e)?(h(!1),m(""),!0):(m("Bank Account should be 16 digits only"),h(!0),!1)};return l.a.createElement(l.a.Fragment,null,l.a.createElement("h3",null,"CARD NUMBER"),l.a.createElement(S.a,{required:!0,error:g,id:"outlined-required",label:"Required",variant:"outlined",helperText:u,onChange:function(e){c(e.target.value),j(e.target.value)}}))}function Bt(e){var t=Object(n.useState)(""),a=Object(i.a)(t,2),o=a[0],c=a[1],r=Object(n.useState)(""),s=Object(i.a)(r,2),u=s[0],m=s[1],d=Object(n.useState)(!1),p=Object(i.a)(d,2),g=p[0],h=p[1],f=Object(n.useState)(!0),b=Object(i.a)(f,2),E=b[0],O=b[1],v=e.placeOrderClicked;Object(n.useEffect)((function(){O(!1)}),[]),Object(n.useEffect)((function(){if(!1===E){var t=j(o);e.setCardMonthValidated(t)}}),[v]);var j=function(e){return parseInt(e)>0&&parseInt(e)<=12?(h(!1),m(""),!0):(m("Input the correct month [1-12]"),h(!0),!1)};return l.a.createElement(l.a.Fragment,null,l.a.createElement("h3",null,"EXPIRY DATE"),l.a.createElement("div",null,l.a.createElement(S.a,{required:!0,error:g,helperText:u,onChange:function(e){c(e.target.value),j(e.target.value)},id:"outlined-number",label:"Month",type:"number",InputLabelProps:{shrink:!0},variant:"outlined"})))}var Vt=function(e){var t=Object(n.useState)(""),a=Object(i.a)(t,2),o=a[0],c=a[1],r=Object(n.useState)(""),s=Object(i.a)(r,2),u=s[0],m=s[1],d=Object(n.useState)(!1),p=Object(i.a)(d,2),g=p[0],h=p[1],f=Object(n.useState)(!0),b=Object(i.a)(f,2),E=b[0],O=b[1],v=e.placeOrderClicked;Object(n.useEffect)((function(){O(!1)}),[]),Object(n.useEffect)((function(){if(!1===E){var t=j(o);e.setCardYearValidated(t)}}),[v]);var j=function(e){return parseInt(e)>=2020?(h(!1),m(""),!0):(m("Input the correct year [2020+]"),h(!0),!1)};return console.log(u),l.a.createElement(l.a.Fragment,null,l.a.createElement("div",null,l.a.createElement(S.a,{required:!0,error:g,helperText:u,onChange:function(e){c(e.target.value),j(e.target.value)},id:"outlined-number",label:"Year",type:"number",InputLabelProps:{shrink:!0},variant:"outlined"})))},At=function(e){var t=Object(n.useState)(""),a=Object(i.a)(t,2),o=a[0],c=a[1],r=Object(n.useState)(""),s=Object(i.a)(r,2),u=s[0],m=s[1],d=Object(n.useState)(!1),p=Object(i.a)(d,2),g=p[0],h=p[1],f=Object(n.useState)(!0),b=Object(i.a)(f,2),E=b[0],O=b[1],v=e.placeOrderClicked;Object(n.useEffect)((function(){O(!1)}),[]),Object(n.useEffect)((function(){if(!1===E){var t=j(o);e.setCardCvvValidated(t)}}),[v]);var j=function(e){return 3===parseInt(e.length)&/\d+/.test(e)?(h(!1),m(""),!0):(m("Input the correct CVV [3 digits]"),h(!0),!1)};return l.a.createElement(l.a.Fragment,null,l.a.createElement("h3",null,"CVC"),l.a.createElement("div",{style:{marginBottom:"10%"}},l.a.createElement(S.a,{required:!0,error:g,helperText:u,onChange:function(e){c(e.target.value),j(e.target.value)},id:"outlined-required",label:"Required",variant:"outlined"})))},zt=Object(h.a)((function(e){return{root:{"& .MuiTextField-root":{margin:e.spacing(1),width:"ch"}}}}));function qt(e){var t=Object(n.useState)([]),a=Object(i.a)(t,2),o=a[0],c=a[1],r=Object(n.useState)(!1),s=Object(i.a)(r,2),p=s[0],g=s[1],h=Object(n.useState)(!1),f=Object(i.a)(h,2),b=f[0],E=f[1],O=Object(n.useState)(!1),v=Object(i.a)(O,2),j=v[0],k=v[1],C=Object(n.useState)(!1),S=Object(i.a)(C,2),_=S[0],y=S[1],I=Object(n.useState)(!1),N=Object(i.a)(I,2),P=N[0],w=N[1],M=Object(n.useState)(!1),T=Object(i.a)(M,2),F=T[0],x=T[1],D=Object(n.useState)(!1),L=Object(i.a)(D,2),R=L[0],B=L[1],V=Object(n.useState)(!1),A=Object(i.a)(V,2),z=A[0],q=A[1],U=zt(),W=Object(m.g)();Object(n.useEffect)((function(){u()({method:"GET",url:"http://localhost:5000/get_user_purchases",params:{save_for_later:0,purchased:0}}).then((function(e){!1!==e.data.result&&(console.log(e),c(e.data.result))}))}),[]),Object(n.useEffect)((function(){b&&P&&_&&j&&F&&(q(!0),o.forEach((function(e){var t;console.log(e.image_id),t=e.image_id,u()({method:"POST",url:"http://localhost:5000/update_user_purchases_details",params:{save_for_later:0,purchased:1,image_id:t}}).then((function(e){console.log(e),B(!0),q(!1)}))})))}),[b,j,P,_,F]);var Y=o.map((function(e){return l.a.createElement(xt,{key:e.image_id,image_id:e.image_id,img:e.img,price:e.price,title:e.title})}));return l.a.createElement(l.a.Fragment,null,l.a.createElement(G,null),l.a.createElement("div",{className:"checkout-wrapper",style:{marginTop:"15%"}},l.a.createElement("h1",null,"Checkout"),l.a.createElement("div",{className:"checkout-grid"},l.a.createElement("div",{className:"payment-info"},l.a.createElement("form",{className:U.root,noValidate:!0,autoComplete:"off"},l.a.createElement("div",{className:"cart-details-grid"},l.a.createElement(Rt,{placeOrderClicked:p,setCardNumValidated:E}),l.a.createElement(Lt,{placeOrderClicked:p,setCardNameValidated:k}),l.a.createElement(Bt,{placeOrderClicked:p,setCardMonthValidated:y}),l.a.createElement(Vt,{placeOrderClicked:p,setCardYearValidated:w}),l.a.createElement(At,{placeOrderClicked:p,setCardCvvValidated:x}),l.a.createElement(d.a,{variant:"contained",color:"primary",size:"large",onClick:function(){g(!p)}},"PLACE ORDER"),l.a.createElement("h2",null,z&&"Purchase in progress, please wait...")))),l.a.createElement("div",{className:"purchase-info"},l.a.createElement(d.a,{color:"primary",onClick:function(){W.push("/shopping-cart")}},"Edit"),l.a.createElement("h2",null,"Total number of item(s): ",o.length),l.a.createElement("h2",null,"TOTAL TO PAY: $",Number(e.location.state.totalPrice).toFixed(2)),l.a.createElement("div",{className:"purchased-items"},Y)))),R?l.a.createElement(Dt,{isOpen:!0}):null)}a(190),a(191),a(192);var Gt=a(115),Ut=a.n(Gt);a(193);function Wt(e){return e.openModal?c.a.createPortal(l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"photo-modal-overlay"}),l.a.createElement("div",{className:"photo-modal",onClick:function(e){e.stopPropagation()}},l.a.createElement("img",{className:"photo-modal-image",src:"data:image/jpg;base64,".concat(e.image),alt:e.caption}))),document.getElementById("portal")):null}a(194);function Yt(e){return e.openModal?c.a.createPortal(l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"download-confirmation-overlay"}),l.a.createElement("div",{className:"download-confirmation-modal",onClick:function(e){e.stopPropagation()}},l.a.createElement("h3",null,"Your photo is currently being downloaded. Please check your computers Downloads folder to see your unwatermarked photo!"))),document.getElementById("confirmationPortal3")):null}var $t=function(e){Object(H.a)(a,e);var t=Object(J.a)(a);function a(e){var n;return Object(W.a)(this,a),(n=t.call(this,e)).setSpans=function(){if(null!=n.imageRef.current){var e=n.imageRef.current.clientHeight,t=Math.ceil(e/10);n.setState({spans:t})}},n.handleImageClicked=function(e){n.setState({openPhotoModal:!0})},n.handleDownloadClicked=function(e){console.log("download clicked"),u()({method:"GET",url:"http://localhost:5000/download",params:{image_id:n.props.image.image_id}}).then((function(e){console.log(e),e.data.result&&n.setState({openDownloadConfirmationModal:!0})})),e.stopPropagation()},n.imageRef=l.a.createRef(),n.state={openPhotoModal:!1,openDownloadConfirmationModal:!1,spans:0,animateImages:""},n.image_id=e.image.id,n}return Object(Y.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.imageRef.current.addEventListener("load",this.setSpans),setTimeout((function(){e.setState({animateImages:"image-container-animate"})}),100)}},{key:"render",value:function(){var e=this;return document.body.style.overflow=this.state.openPhotoModal?"hidden":"unset",l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"image-container ".concat(this.state.animateImages),onClick:this.handleImageClicked},l.a.createElement("div",{className:"icon-bar"}),l.a.createElement("img",{className:"image-size",ref:this.imageRef,src:"data:image/jpg;base64,".concat(this.props.image.img),alt:this.props.caption}),l.a.createElement(E.a,{classes:{root:"".concat(this.props.classes.root," ").concat(this.props.classes.buy)},variant:"contained",onClick:this.handleDownloadClicked},l.a.createElement(Ut.a,null))),this.state.openPhotoModal?l.a.createElement("div",{className:"photo-modal-wrapper",onClick:function(){e.setState({openPhotoModal:!1})}},l.a.createElement(Wt,{openModal:!0,image:this.props.image.img,caption:this.props.caption})):null,this.state.openDownloadConfirmationModal?l.a.createElement("div",{className:"photo-modal-wrapper",onClick:function(){e.setState({openDownloadConfirmationModal:!1})}},l.a.createElement(Yt,{openModal:!0})):null)}}]),a}(n.Component),Ht=Object(Q.a)({root:{position:"absolute",color:"rgba(255, 255, 255,1)"},likeIcon:{width:"50%",height:"10%"},removeIcon:{width:"95%",height:"10%"},likeButton:{bottom:"0%",left:"5%",width:"20%",height:"15%"},buy:{bottom:"0%",left:"80%",width:"20%",height:"15%"},remove:{right:"0%",top:"0%",width:"15%",height:"25%","&:hover":{backgroundColor:"rgba(234, 241, 223, 0.26)"}}})($t),Jt=function(e){var t=Object(n.useState)([]),a=Object(i.a)(t,2),o=a[0],c=a[1],r=e.retrievedImgs;return Object(n.useEffect)((function(){c(r)}),[r]),console.log(o),l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"image-grid"},o.map((function(e){return null===e?null:l.a.createElement(Ht,{key:e.image_id,image:e})}))))};function Qt(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),a=t[0],o=t[1];Object(n.useEffect)((function(){c()}),[]);var c=function(){u()({method:"GET",url:"http://localhost:5000/get_user_purchases",params:{save_for_later:0,purchased:1}}).then((function(e){!1!==e.data.result&&(console.log(e),o(e.data.result))}))};return l.a.createElement(l.a.Fragment,null,l.a.createElement(G,null),l.a.createElement("div",{className:"my-purchases-wrapper",style:{marginTop:"15%"}},l.a.createElement("h1",null,"My purchases"),l.a.createElement("div",{className:"my-purchases-feed"},l.a.createElement(Jt,{retrievedImgs:a}))))}a(195);var Kt=function(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),a=t[0],o=t[1],c=Object(n.useState)(null),r=Object(i.a)(c,2),s=r[0],m=r[1],d=Object(n.useState)(!1),p=Object(i.a)(d,2),g=p[0],h=p[1],f=Object(n.useState)(0),b=Object(i.a)(f,2),E=b[0],O=b[1],v=Object(n.useState)(!0),j=Object(i.a)(v,2),k=j[0],C=j[1],S=Object(n.useState)(!1),_=Object(i.a)(S,2),y=_[0],I=_[1],N=localStorage.getItem("userLoggedIn"),P=Object(n.useRef)(!1),w=Object(n.useRef)(),M=Object(n.useRef)(),T=Object(n.useCallback)((function(e){y||(M.current&&M.current.disconnect(),M.current=new IntersectionObserver((function(e){e[0].isIntersecting&&k&&(I(!0),setTimeout((function(){F()}),1500))})),e&&M.current.observe(e))}),[y,k]);Object(n.useEffect)((function(){return P.current=!1,I(!0),setTimeout((function(){F()}),150),function(){null!=w.current&&w.current(),P.current=!0,o([]),C(!0)}}),[]);var F=function(){console.log("fetching recommendation with a score of ".concat(s)),u()({method:"GET",url:"http://localhost:5000/get_recommended_images",params:{score:s,batch_size:10},cancelToken:new u.a.CancelToken((function(e){return w.current=e}))}).then((function(e){console.log(e),!1===e.data.result||P.current?P.current||(console.log("no more images to return"),I(!1),C(!1)):(console.log("setting score to ".concat(e.data.score)),m(e.data.score),C(!0),I(!1),o((function(t){return[].concat(Object(U.a)(t),Object(U.a)(e.data.result))})))})).catch((function(e){u.a.isCancel(e)}))};return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"image-grid"},a.map((function(e,t){return null===e?null:a.length===t+1?l.a.createElement(l.a.Fragment,{key:t},l.a.createElement(xe,{key:e.id,image:e,setOpenBookmarkModal:h,setPhotoId:O,userLoggedIn:N}),l.a.createElement("div",{key:t,ref:T,style:{position:"relative",bottom:"200px",height:"0%"}})):l.a.createElement(xe,{key:e.id,image:e,setOpenBookmarkModal:h,setPhotoId:O,userLoggedIn:N})}))),l.a.createElement("h2",{style:{textAlign:"center"}},y&&"Loading..."),l.a.createElement("h2",{style:{textAlign:"center"}},!k&&"No more images to display"),g?l.a.createElement(Ce,{openModal:!0,setOpenModal:h,photoId:E}):null)};var Xt=function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(G,null),l.a.createElement("div",{className:"recommendation-gap"}),l.a.createElement("h1",{className:"recommendation-text"},"Photos recommended for you!"),l.a.createElement(Kt,null))};a(196);function Zt(e){var t=Object(n.useState)(null),a=Object(i.a)(t,2),o=a[0],c=a[1],r=Object(n.useState)([]),s=Object(i.a)(r,2),p=s[0],g=s[1],h=Object(n.useState)(!1),f=Object(i.a)(h,2),b=f[0],E=f[1],O=Object(m.g)();function v(){return(v=Object(N.a)(I.a.mark((function e(){var t,a;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=new FormData).append("image",o),e.next=4,u.a.post("http://localhost:5000/post_profile_photo",t);case 4:return a=e.sent,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var j=function(){u()({method:"POST",url:"http://localhost:5000/delete_profile_photo"}).then((function(e){console.log(e),function(){return v.apply(this,arguments)}().then((function(e){console.log(e),!0===e.data.result&&(console.log("Uploaded successfully"),null!==o&&(E(!0),setTimeout((function(){O.goBack()}),500)))}))}))};return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"upload-image-wrapper"},l.a.createElement(Ot.a,{withIcon:!0,buttonText:"Choose image",onChange:function(e,t){g(p.concat(e)),c(t[0])},imgExtension:[".jpg",".png",".jpeg"],maxFileSize:5242880,withPreview:!0,singleImage:!0,withLabel:!0}),!0===b?l.a.createElement("h2",{style:{textAlign:"center",color:"grey"}},"Profile photo is uploaded successfully!"):null,l.a.createElement("div",{className:"profile-button-wrapper"},l.a.createElement("div",null,l.a.createElement(d.a,{variant:"contained",color:"primary",size:"large",onClick:function(){j()}},"Save Profile Photo")),l.a.createElement("div",{style:{marginBottom:"10%"}},l.a.createElement(d.a,{variant:"outlined",color:"primary",size:"large",onClick:function(){O.goBack()}},"Cancel")))))}var ea=function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(m.d,null,l.a.createElement(m.b,{path:"/",exact:!0},l.a.createElement(Ze,null)),l.a.createElement(m.b,{path:"/signup"},l.a.createElement(et,null)),l.a.createElement(m.b,{path:"/changepassword",component:Ct}),l.a.createElement(m.b,{path:"/forgotpassword",component:St}),l.a.createElement(m.b,{path:"/profile/:userID",component:dt}),l.a.createElement(m.b,{path:"/uploadphoto",component:kt}),l.a.createElement(m.b,{path:"/post-:id",component:pt}),l.a.createElement(m.b,{path:"/collections/:userID",component:_t}),l.a.createElement(m.b,{path:"/collection-:id",component:Mt}),l.a.createElement(m.b,{path:"/shopping-cart",component:Ft}),l.a.createElement(m.b,{path:"/checkout",component:qt}),l.a.createElement(m.b,{path:"/my-purchases",component:Qt}),l.a.createElement(m.b,{path:"/recommendations",component:Xt}),l.a.createElement(m.b,{path:"/upload-profile-photo",component:Zt})))};c.a.render(l.a.createElement(r.a,null,l.a.createElement(ea,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}]),[[125,1,2]]]);
//# sourceMappingURL=main.d82076eb.chunk.js.map