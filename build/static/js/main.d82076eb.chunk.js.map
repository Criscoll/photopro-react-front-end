{"version":3,"sources":["logo/logo-new.png","background/1.jpg","background/2.jpg","background/3.jpg","background/4.jpg","background/5.jpg","background/6.jpg","background/7.jpg","background/user-background/user-background.jpg","serviceWorker.js","components/toolbar/notifications/notifications.jsx","components/Modals/ForgotPasswordModal/ForgotPasswordModal.jsx","components/Modals/LoginModal/LoginModal.jsx","components/Modals/SignupModal/Textfields/Email.jsx","components/Modals/SignupModal/Textfields/FirstName.jsx","components/Modals/SignupModal/Textfields/LastName.jsx","components/Modals/SignupModal/Textfields/Password.jsx","components/Modals/SignupModal/Textfields/Username.jsx","components/Modals/SignupModal/SignupModal.jsx","components/Modals/DeleteAccountModal/DeleteAccountModal.jsx","components/toolbar/toolbar.jsx","components/follow/followButton.jsx","components/likes/Likes.jsx","components/comments/comment/replyComments/replyComment/ReplyComment.jsx","components/comments/comment/replyComments/ReplyComments.jsx","components/comments/comment/Comment.jsx","components/comments/Comments.jsx","components/Modals/BookmarkModal/collectionFolder/CollectionFolder.jsx","components/Modals/BookmarkModal/BookmarkConfirmationModal/BookmarkConfirmationModal.jsx","components/Modals/BookmarkModal/BookmarkModal.jsx","components/Modals/PostModal/PostModal.jsx","components/Modals/AddedToCartModal/AddedToCartModal.jsx","components/Modals/EditPostModal/textfields/TitleField.jsx","components/Modals/EditPostModal/textfields/CaptionField.jsx","components/Modals/EditPostModal/textfields/TagsField.jsx","components/Modals/EditPostModal/textfields/PriceField.jsx","components/Modals/EditPostModal/EditPostModal.jsx","components/feed/ImageCard/ImageCard.jsx","components/feed/feed.jsx","components/searchbar/searchBarInput.jsx","components/searchbar/searchbar.jsx","pages/MainPage.jsx","pages/RegistrationPage.jsx","components/userPhotos/UserPhotos.jsx","components/collections/collection/Collection.jsx","components/collections/collections.jsx","pages/ProfilePage.jsx","pages/PostInfo/PostInfo.jsx","pages/UploadPhotoPage/Textfields/TitleField.jsx","pages/UploadPhotoPage/Textfields/CaptionField.jsx","pages/UploadPhotoPage/Textfields/TagsField.jsx","pages/UploadPhotoPage/Textfields/PriceField.jsx","pages/UploadPhotoPage/PostConfirmationModal/PostConfirmationModal.jsx","pages/UploadPhotoPage/CapturePhotoPage.jsx","pages/ChangePasswordPage.jsx","pages/ForgotPasswordPage.jsx","pages/collections/CollectionsPage.jsx","components/collections/collection/collectionImage/CollectionImage.jsx","components/collections/collection/collectionDataPage/CollectionFeed.jsx","pages/collections/CollectionsDataPage.jsx","pages/shoppingCartPage/shoppingItem/ShoppingItem.jsx","pages/shoppingCartPage/ShoppingCartPage.jsx","pages/checkoutPage/checkoutItem/CheckoutItem.jsx","pages/checkoutPage/ConfirmationModal/ConfirmationModal.jsx","pages/checkoutPage/textfields/CardName.jsx","pages/checkoutPage/textfields/CardNum.jsx","pages/checkoutPage/textfields/CardMonth.jsx","pages/checkoutPage/textfields/CardYear.jsx","pages/checkoutPage/textfields/CardCvv.jsx","pages/checkoutPage/CheckoutPage.jsx","components/Modals/PhotoModal/PhotoModal.jsx","components/Modals/DownloadConfirmationModal/DownloadConfirmation.jsx","pages/myPurchases/myPurchasesFeed/purchasedImage/PurchasedImage.jsx","pages/myPurchases/myPurchasesFeed/MyPurchasesFeed.jsx","pages/myPurchases/MyPurchases.jsx","components/feed/RecommendationFeed/RecommendationFeed.jsx","pages/RecommendationsPage/RecommendationsPage.jsx","pages/uploadProfilePage/UploadProfilePage.jsx","App.js","index.js"],"names":["module","exports","Boolean","window","location","hostname","match","Notifications","useState","notifications","setNotifications","anchorEl","setAnchorEl","open","console","log","handleClose","handleClearNotifications","axios","url","params","then","res","IconButton","aria-label","aria-controls","aria-haspopup","onClick","event","currentTarget","data","result","style","color","Menu","id","keepMounted","onClose","PaperProps","maxHeight","ITEM_HEIGHT","width","length","map","notification","index","notifMessage","type","sender","image_id","key","MenuItem","fontWeight","ForgotPassword","props","email","setEmail","errorText","setErrorText","hashValue","setHashValue","errorValue","setErrorValue","enterEmailToVerifyOpen","setEnterEmailToVerifyOpen","verifyOpen","setVerifyOpen","newPasswordFormOpen","setNewPasswordFormOpen","successfulPasswordUpdate","setSuccessfulPasswordUpdate","codeVerified","setCodeVerified","enteredCode","setEnteredCode","enteredEmail","setEnteredEmail","enteredNewPassword","setEnteredNewPassword","loading","setLoading","handleEmailInput","text","includes","openForgotPasswordModal","ReactDom","createPortal","Fragment","className","e","stopPropagation","TextField","required","error","helperText","onChange","target","value","label","defaultValue","oldTitle","variant","Button","size","method","response","setOpenForgotPasswordModal","new_password","document","getElementById","LoginModal","set_email","password","set_password","loginFailed","setLoginFailed","history","useHistory","a","preventDefault","get","localStorage","setItem","user_id","push","go","openLoginModal","onSubmit","FormGroup","controlId","bsSize","FormLabel","FormControl","autoFocus","block","disabled","setForgotPasswordModalIsOpen","setOpenLoginModal","Email","setText","firstRender","setFirstRender","submitFormClicked","useEffect","setEmailValidated","InputLabelProps","shrink","FirstName","handleFirstNameInput","setFirstNameValidated","LastName","handleLastNameInput","setLastNameValidated","Password","handlePasswordInput","setPasswordValidated","handleUsernameInput","setUsernameValidated","RegistrationPage","setSubmitFormClicked","firstNameValidated","lastNameValidated","setLastNamedValidated","emailValidated","passwordValidated","usernameValidated","codeGenerated","setCodeGenerated","emailConfirmed","setEmailConfirmed","userRegistered","setUserRegistered","verifyLoading","setverifyLoading","openSignupModal","marginBottom","first","last","username","useStyles","makeStyles","theme","root","margin","spacing","DeleteAccountModal","setPassword","showButtons","setShowButtons","credentialsValidated","setCredentialsValidated","classes","openDeleteAccountModal","setOpenDeleteAccountModal","noValidate","autoComplete","clear","border","button","Toolbar","loggedIn","getItem","setUsername","loginModalIsOpen","setLoginModalIsOpen","forgotPasswordModalIsOpen","signupModalIsOpen","setSignupModalIsOpen","deleteAcountModalIsOpen","setDeleteAccountModalIsOpen","buttons","handleAccountClose","userID","pathname","state","uploaderID","startIcon","src","logo","alt","setOpenSignupModal","FollowButton","following","setFollowing","mounted","uploader","handleFollowClicked","to_follow","height","liked","backgroundColor","unliked","Likes","num_likes","set_num_likes","postLiked","setPostLiked","imageID","setNumLikes","buttonClass","post_likes","prevState","parseInt","uploader_id","delete_likes","textAlign","ReplyComment","deleteButton","String","replies_info","commenter","deleteComment","comment_id","commentID","updateReplies","comment","created_at","ReplyComments","replies","set_replies","replyUpdated","newReply","setShowViewReplies","updateComments","batch_size","replies_components","reply","Comment","reply_input","set_reply_input","show_reply_form","set_show_reply_form","showViewReplies","setNewReply","usersProfilePhoto","setUsersProfilePhoto","comment_info","commenterID","post_reply_comments","count","textField","Comments","comment_input","set_comment_input","comments","comments_list","handlePostClick","postComments","concat","multiline","rowsMax","onKeyPress","fullWidth","CollectionFolder","collectionInfo","addPhotoToCollections","collection_id","collection_name","BookmarkConfirmationModal","openModal","BookmarkModal","bookmarkConfirmationModalOpen","setBookmarkConfirmationModalOpen","modalCollectionName","setModalCollectionName","enteredCollection","setEnteredCollection","usersCollections","setUsersCollections","showCreateCollectionButton","setShowCreateCollectionButton","privateCollection","setPrivateCollection","hasCollections","setHasCollections","getUsersCollections","col_id","photoId","collection","filter","private","FormControlLabel","control","Checkbox","checked","name","photoID","PostModal","setComments","addedToCart","setAddedToCart","tags","setTags","commentUpdated","bookmarkModalIsOpen","setBookmarkModalIsOpen","relatedImages","setRelatedImages","relatedImagesLoading","setRelatedImagesLoading","hasRelatedImages","setHasRelatedImages","cancelAxiosRequest","useRef","cancelToken","CancelToken","c","current","fetchTags","handleBuyButton","apiRemovePurchase","save_for_later","purchased","apiAddPurchase","caption","images","setRelatedImagesClicked","img","marginTop","marginRight","marginLeft","title","fontSize","tag","price","setOpenModal","AddedToCartModal","cartStatus","TitleField","saveButtonClicked","setTitleValidated","handleTitleInput","CaptionField","oldCaption","setCaptionValidated","handleCaptionInput","TagsField","oldTags","textFieldRef","setTagsValidated","handleTagsInput","ref","toString","PriceField","oldPrice","setPriceValidated","handlePriceInput","parseFloat","EditPostPage","setSaveButtonClicked","titleValidated","captionValidated","priceValidated","tagsValidated","setOldTags","edit_post","deletePostRequest","ImageCard","setSpans","imageRef","clientHeight","spansRows","Math","ceil","setState","spans","setAddedToCartModal","newState","openCartAddedModal","setCartStatus","setOpenPostModal","openPostModal","setOpenEditPostModal","openEditPostModal","numLikes","setNumLikesDummy","relatedImageClicked","openRelatedPostModal","handleImageClicked","handleLikeClicked","handleBookmarkClicked","setOpenBookmarkModal","setPhotoId","image","handleBuyClicked","setModal","apiRemoveFromCart","handleDeleteClicked","reload","handleEditClicked","React","createRef","bind","animateImages","this","addEventListener","setTimeout","component","body","overflow","delete","editButton","edit","like","likeSize","userLoggedIn","displayMyProfile","bookmark","buy","Component","withStyles","position","bottom","left","iconSize","top","Feed","imgs","setImgs","modalIsOpen","setModalIsOpen","photoIdBookmarked","setPhotoIdBookmarked","hasMore","setHasMore","score","setScore","fetchIsCancelled","observer","lastImageRef","useCallback","node","disconnect","IntersectionObserver","entries","isIntersecting","fetchImages","query","observe","term","paramScore","prevImgs","catch","isCancel","SearchBarInput","searchVal","setSearchVal","setQuery","SearchBar","backgroundImages","img1","img2","img3","img4","img5","img6","img7","floor","random","backgroundImage","MainPage","first_name","set_first_name","last_name","set_last_name","set_username","UserPhotos","profileImgs","setProfileImgs","hasPhotos","setHasPhotos","lastID","setLastID","fetchProfilePhotos","scrollTo","last_id","display","flexWrap","minWidth","breakpoints","down","zIndex","opacity","focusVisible","imageButton","right","alignItems","justifyContent","palette","common","white","imageSrc","backgroundSize","backgroundPosition","imageBackdrop","black","transition","transitions","create","imageTitle","padding","imageMarked","Collection","replace","setCollectionClicked","setCollectionIdClicked","setCollectionNameClicked","setCollectionPrivateClicked","setCollectionNumPhotosClicked","num_photos","setCollectionCreatorClicked","creator_id","ButtonBase","focusRipple","focusVisibleClassName","Typography","Collections","allCollections","setAllCollections","collectionClicked","collectionIdClicked","collectionNameClicked","collectionPrivateClicked","collectionNumPhotosClicked","collectionCreatorClicked","profileImg","setProfileImg","find","componentsRender","collectionsComponents","collectionData","to","isMyCollection","Userbackground","ProfilePage","getProfilePhoto","ID","undefined","PostInfo","fetchRelatedImgs","varient","Title","uploadButtonClicked","handleCaptionText","handleTagsText","PostConfirmationModal","isOpen","form_data","FormData","append","post","CapturePhotoPage","setImg","pictures","setPictures","setUploadButtonClicked","confirmationModalOpen","setConfirmationModalOpen","attemptPost","withIcon","buttonText","pictureFiles","pictureDataURLs","imgExtension","maxFileSize","withPreview","singleImage","withLabel","goBack","ChangePasswordPage","set_new_password","new_confirmed_password","set_new_confirmed_password","ForgotPasswordPage","CollectionsPage","CollectionImage","likeButton","remove","removeIcon","likeIcon","CollectionFeed","collectionImgs","setCollectionImgs","retrievedImgs","openBookmarkModal","CollectionDataPage","collectionImages","setCollectionImages","collectionID","updateCollectionsPrivate","privValue","handleChangePrivateClicked","ShoppingItem","updatePurchase","save_later_value","setMoveButtonClicked","moveButtonClicked","setDeleteButtonClicked","deleteButtonClicked","ShoppingCart","checkoutButtonClicked","setCheckoutButtonClicked","shoppingCartItems","setShoppingCartItems","savedLaterItems","setSavedLaterItems","getUserSavedLaterItems","shoppingItems","item","savedLaterItemsComponents","subTotal","forEach","checkoutComponent","totalPrice","Number","toFixed","CheckoutItem","CheckoutConfirmationModal","CardName","placeOrderClicked","handleNameCardInput","setCardNameValidated","test","CardNum","handleCardNumberInput","setCardNumValidated","CardMonth","handleMonthInput","setCardMonthValidated","handleYearInput","setCardYearValidated","handleCvvInput","setCardCvvValidated","CheckoutPage","setPlaceOrderClicked","cardNumValidated","cardNameValidated","cardMonthValidated","cardYearValidated","cardCvvValidated","img_id","checkoutItemsComponents","CardYear","CardCvv","PhotoModal","PurchasedImage","openPhotoModal","handleDownloadClicked","openDownloadConfirmationModal","MyPurchasedFeed","purchasedImgs","setPurchasedImgs","MyPurchases","boughtItems","setBoughtItems","getUserNotPaidItems","RecommendationFeed","fetchRecommendations","RecommendationPage","UploadProfilePage","uploadedSuccessfully","setUploadedSuccessfully","deleteProfilePhoto","postProfilePhoto","App","path","exact","ShoppingCartPage","RecommendationsPage","ReactDOM","render","navigator","serviceWorker","ready","registration","unregister","message"],"mappings":"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","file":"static/js/main.d82076eb.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo-new.6654b17d.png\";","module.exports = __webpack_public_path__ + \"static/media/1.d5557220.jpg\";","module.exports = __webpack_public_path__ + \"static/media/2.bb17d48f.jpg\";","module.exports = __webpack_public_path__ + \"static/media/3.6f8a47e0.jpg\";","module.exports = __webpack_public_path__ + \"static/media/4.8c1b91ae.jpg\";","module.exports = __webpack_public_path__ + \"static/media/5.e40cb402.jpg\";","module.exports = __webpack_public_path__ + \"static/media/6.eaa61dac.jpg\";","module.exports = __webpack_public_path__ + \"static/media/7.3ddaa75f.jpg\";","module.exports = __webpack_public_path__ + \"static/media/user-background.4163fbe9.jpg\";","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React, { useState } from 'react';\nimport axios from 'axios';\nimport IconButton from '@material-ui/core/IconButton';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport NotificationsIcon from '@material-ui/icons/Notifications';\n\nconst ITEM_HEIGHT = 60;\n\nexport default function Notifications() {\n  const [notifications, setNotifications] = useState([]);\n  const [anchorEl, setAnchorEl] = useState(null);\n  const open = Boolean(anchorEl);\n\n  console.log(notifications);\n\n  const handleClick = (event) => {\n    const fetchNotifications = () => {\n      axios({\n        url: 'http://localhost:5000/fetch_notification',\n        params: {},\n      }).then((res) => {\n        console.log(res);\n        if (res.data.result) {\n          console.log('setting notifications');\n          setNotifications(res.data.result);\n        }\n      });\n    };\n\n    setAnchorEl(event.currentTarget);\n    fetchNotifications();\n  };\n\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n\n  const handleClearNotifications = () => {\n    console.log('clear notifications');\n    const clearNotifications = () => {\n      axios({\n        url: 'http://localhost:5000/clear_notifications',\n        params: {},\n      }).then((res) => {\n        console.log(res);\n      });\n    };\n\n    clearNotifications();\n    setNotifications([]);\n  };\n\n  return (\n    <div>\n      <IconButton\n        aria-label=\"more\"\n        aria-controls=\"long-menu\"\n        aria-haspopup=\"true\"\n        onClick={handleClick}\n      >\n        <NotificationsIcon style={{ color: 'rgba(224, 224, 224, 0.74)' }} />\n      </IconButton>\n      <Menu\n        id=\"long-menu\"\n        anchorEl={anchorEl}\n        keepMounted\n        open={open}\n        onClose={handleClose}\n        PaperProps={{\n          style: {\n            maxHeight: ITEM_HEIGHT * 4.5,\n            width: '50ch',\n          },\n        }}\n      >\n        {notifications.length > 0 ? (\n          notifications.map((notification, index) => {\n            let notifMessage = null;\n            if (notification.type === 'like') {\n              notifMessage = `@${notification.sender} liked your post - '${notification.image_id}'`;\n            } else if (notification.type === 'comment') {\n              notifMessage = `@${notification.sender} commented on your post - '${notification.image_id}'`;\n            } else if (notification.type === 'posted') {\n              notifMessage = `@${notification.sender} has uploaded a new post - '${notification.image_id}'`;\n            } else if (notification.type === 'purchased') {\n              notifMessage = `@${notification.sender} has purchased your photo - '${notification.image_id}'`;\n            } else {\n              notifMessage = `@${notification.sender} started following you`;\n            }\n            if (index === 0) {\n              return (\n                <div key={index}>\n                  <MenuItem\n                    key={index}\n                    onClick={handleClearNotifications}\n                    style={{ fontWeight: 'bold' }}\n                  >\n                    Clear Notifications\n                  </MenuItem>\n                  <MenuItem key={index + 1} onClick={handleClose}>\n                    <div>{notifMessage}</div>\n                  </MenuItem>\n                </div>\n              );\n            }\n            return (\n              <MenuItem key={index + 1} onClick={handleClose}>\n                <div>{notifMessage}</div>\n              </MenuItem>\n            );\n          })\n        ) : (\n          <MenuItem onClick={handleClose}>\n            No Notifications at this time\n          </MenuItem>\n        )}\n      </Menu>\n    </div>\n  );\n}\n","import React, { useState } from 'react';\nimport ReactDom from 'react-dom';\nimport './ForgotPasswordModal.css';\nimport axios from 'axios';\n\nimport TextField from '@material-ui/core/TextField';\nimport Button from '@material-ui/core/Button';\n\nexport default function ForgotPassword(props) {\n  const [email, setEmail] = useState('');\n  const [errorText, setErrorText] = useState('');\n  const [hashValue, setHashValue] = useState('');\n  const [errorValue, setErrorValue] = useState(false);\n  const [enterEmailToVerifyOpen, setEnterEmailToVerifyOpen] = useState(true);\n  const [verifyOpen, setVerifyOpen] = useState(false);\n  const [newPasswordFormOpen, setNewPasswordFormOpen] = useState(false);\n\n  const [successfulPasswordUpdate, setSuccessfulPasswordUpdate] = useState(\n    false\n  );\n\n  const [codeVerified, setCodeVerified] = useState(null);\n\n  const [enteredCode, setEnteredCode] = useState('');\n  const [enteredEmail, setEnteredEmail] = useState('');\n  const [enteredNewPassword, setEnteredNewPassword] = useState('');\n  const [loading, setLoading] = useState(false);\n\n  const handleEmailInput = (text) => {\n    if (\n      text.length > 10 &&\n      text.length < 50 &&\n      text.includes('@') &&\n      text.includes('.com')\n    ) {\n      setErrorValue(false);\n      setErrorText('');\n      return true;\n    } else {\n      setErrorText('Email must be entered and include an @ and .com');\n      setErrorValue(true);\n      return false;\n    }\n  };\n\n  const forgotPasswordGetLink = () => {\n    setLoading(true);\n    axios({\n      method: 'POST',\n      url: 'http://localhost:5000/forgot_password_get_change_password_link',\n      params: {\n        email: email,\n      },\n    }).then((response) => {\n      if (response.data.result !== false) {\n        console.log(response);\n        setHashValue(response.data.result);\n        setEnterEmailToVerifyOpen(false);\n        setVerifyOpen(true);\n      }\n      setLoading(false);\n    });\n  };\n\n  const handleSendEmailClicked = () => {\n    forgotPasswordGetLink();\n  };\n\n  const forgotPasswordCodeSubmit = () => {\n    axios({\n      method: 'POST',\n      url: 'http://localhost:5000/reset_password',\n      params: {\n        email: enteredEmail,\n        new_password: enteredNewPassword,\n      },\n    }).then((response) => {\n      if (response.data.result !== false) {\n        console.log(response);\n        setNewPasswordFormOpen(false);\n        setSuccessfulPasswordUpdate(true);\n      }\n    });\n  };\n\n  const handleCodeSubmitEntered = (e) => {\n    e.stopPropagation();\n    // compare the user's code with our code\n    if (enteredCode === hashValue) {\n      console.log('code is the same!');\n      setCodeVerified(true);\n      setVerifyOpen(false);\n      setNewPasswordFormOpen(true);\n    } else {\n      console.log('code is the same!');\n      setCodeVerified(false);\n    }\n  };\n\n  const handNewPasswordSubmitted = () => {\n    forgotPasswordCodeSubmit();\n  };\n\n  if (!props.openForgotPasswordModal) {\n    return null;\n  } else {\n    return ReactDom.createPortal(\n      <React.Fragment>\n        <div className=\"overlayStyles\" />\n        <div\n          className=\"forgotPasswordModal\"\n          onClick={(e) => {\n            e.stopPropagation();\n          }}\n        >\n          {enterEmailToVerifyOpen ? (\n            <React.Fragment>\n              <h1>Forgot Password</h1>\n              <h3>If you forgot your password, you can reset it here.</h3>\n              <h3>\n                Please enter your email and you will receive an email with\n                further instructions.\n              </h3>\n\n              <h2>Email</h2>\n              <div>\n                <TextField\n                  required\n                  error={errorValue}\n                  helperText={errorText}\n                  onChange={(e) => {\n                    setEmail(e.target.value);\n                    handleEmailInput(e.target.value);\n                  }}\n                  id=\"outlined-required\"\n                  label=\"Required\"\n                  defaultValue={props.oldTitle}\n                  variant=\"outlined\"\n                />\n              </div>\n              <h3>{loading && 'Loading...'}</h3>\n              <div>\n                <Button\n                  variant=\"contained\"\n                  color=\"primary\"\n                  size=\"large\"\n                  onClick={handleSendEmailClicked}\n                >\n                  SEND EMAIL\n                </Button>\n              </div>\n              <div>\n                <Button\n                  variant=\"contained\"\n                  color=\"default\"\n                  size=\"large\"\n                  onClick={() => {\n                    props.setOpenForgotPasswordModal(false);\n                  }}\n                >\n                  Cancel\n                </Button>\n              </div>\n            </React.Fragment>\n          ) : null}\n\n          {verifyOpen ? (\n            <React.Fragment>\n              <h1>Verify that it's you</h1>\n              <h3>\n                An email with a verification code was just sent to {email}\n              </h3>\n              <h2>Enter code</h2>\n              <div>\n                <TextField\n                  required\n                  // error={errorValue}\n                  // helperText={errorText}\n                  onChange={(e) => {\n                    setEnteredCode(e.target.value);\n                    // handleCodeInput(e.target.value);\n                  }}\n                  id=\"outlined-required\"\n                  label=\"Required\"\n                  defaultValue={props.oldTitle}\n                  variant=\"outlined\"\n                />\n              </div>\n\n              <div>\n                <Button\n                  variant=\"contained\"\n                  color=\"primary\"\n                  size=\"large\"\n                  onClick={handleCodeSubmitEntered}\n                >\n                  Submit\n                </Button>\n              </div>\n            </React.Fragment>\n          ) : null}\n\n          {newPasswordFormOpen ? (\n            <React.Fragment>\n              <h1>Code is verified!</h1>\n              <h2>Now, enter your new password</h2>\n              <h2>Email</h2>\n              <div>\n                <TextField\n                  required\n                  // error={errorValue}\n                  // helperText={errorText}\n                  onChange={(e) => {\n                    setEnteredEmail(e.target.value);\n                    handleEmailInput(e.target.value);\n                  }}\n                  id=\"outlined-required\"\n                  label=\"Required\"\n                  defaultValue={props.oldTitle}\n                  variant=\"outlined\"\n                />\n              </div>\n\n              <h2>New Password</h2>\n              <div>\n                <TextField\n                  required\n                  type=\"password\"\n                  onChange={(e) => {\n                    setEnteredNewPassword(e.target.value);\n                    // handleCodeInput(e.target.value);\n                  }}\n                  id=\"outlined-required\"\n                  label=\"Required\"\n                  defaultValue={props.oldTitle}\n                  variant=\"outlined\"\n                />\n              </div>\n\n              <div>\n                <Button\n                  variant=\"contained\"\n                  type=\"password\"\n                  color=\"primary\"\n                  size=\"large\"\n                  onClick={handNewPasswordSubmitted}\n                >\n                  Submit\n                </Button>\n              </div>\n            </React.Fragment>\n          ) : null}\n          {successfulPasswordUpdate ? (\n            <React.Fragment>\n              <h1 style={{ color: 'grey' }}>\n                Your password is successfully updated!\n              </h1>\n              <h2>You can now log in with your new password</h2>\n            </React.Fragment>\n          ) : null}\n\n          {codeVerified === false ? (\n            <h2 style={{ color: 'red' }}>Incorrect Code</h2>\n          ) : null}\n        </div>\n      </React.Fragment>,\n      document.getElementById('toolbarPortal')\n    );\n  }\n}\n","import React, { useState } from 'react';\nimport ReactDom from 'react-dom';\nimport './LoginModal.css';\nimport { Button, FormGroup, FormControl, FormLabel } from 'react-bootstrap';\nimport axios from 'axios';\nimport { useHistory } from 'react-router-dom';\n\nexport default function LoginModal(props) {\n  const [email, set_email] = useState('');\n  const [password, set_password] = useState('');\n  const [loginFailed, setLoginFailed] = useState(false);\n  let history = useHistory(); // router hook which provides access to dom history (allows for page transitions)\n\n  function validate_email() {\n    return email.length > 0 && email.length < 50;\n  }\n\n  function validate_password() {\n    return password.length >= 8 && password.length < 16;\n  }\n\n  async function attempt_login(event) {\n    event.preventDefault();\n\n    const response = await axios.get('http://localhost:5000/login', {\n      params: { email: email, password: password },\n    });\n\n    if (response.data.result) {\n      localStorage.setItem('userLoggedIn', true);\n      localStorage.setItem('userID', response.data.user_id);\n      history.push('/');\n      history.go(0);\n    } else {\n      setLoginFailed(true);\n    }\n  }\n\n  function handleForgotPasswordClicked() {\n    // history.push('/forgotpassword');\n    props.setForgotPasswordModalIsOpen(true);\n    props.setOpenLoginModal(false);\n  }\n\n  if (!props.openLoginModal) {\n    return null;\n  } else {\n    return ReactDom.createPortal(\n      <React.Fragment>\n        <div className=\"overlayStyles\" />\n        <div\n          className=\"loginModal\"\n          onClick={(e) => {\n            e.stopPropagation();\n          }}\n        >\n          <div className=\"login-wrapper\">\n            <h1>Login</h1>\n            <form onSubmit={attempt_login}>\n              <FormGroup controlId=\"email\" bsSize=\"large\">\n                <div>\n                  <FormLabel>Email</FormLabel>\n                </div>\n\n                <FormControl\n                  autoFocus\n                  type=\"email\"\n                  value={email}\n                  onChange={(e) => set_email(e.target.value)}\n                />\n              </FormGroup>\n\n              <FormGroup controlId=\"password\" bsSize=\"large\">\n                <div>\n                  <FormLabel>Password</FormLabel>\n                </div>\n\n                <FormControl\n                  value={password}\n                  onChange={(e) => set_password(e.target.value)}\n                  type=\"password\"\n                />\n              </FormGroup>\n              <div className=\"login-button\">\n                <Button\n                  block\n                  bsSize=\"large\"\n                  disabled={!validate_email() || !validate_password()}\n                  type=\"submit\"\n                >\n                  Login\n                </Button>\n              </div>\n            </form>\n            <Button block bsSize=\"large\" onClick={handleForgotPasswordClicked}>\n              Forgot Password\n            </Button>\n            <div>\n              <Button\n                block\n                bsSize=\"large\"\n                type=\"submit\"\n                onClick={() => {\n                  props.setOpenLoginModal(false);\n                }}\n              >\n                Cancel\n              </Button>\n            </div>\n            {loginFailed ? (\n              <p style={{ color: 'red' }}>Incorrect email or password</p>\n            ) : (\n              <p></p>\n            )}\n          </div>\n        </div>\n      </React.Fragment>,\n      document.getElementById('toolbarPortal')\n    );\n  }\n}\n","import React, { useState, useEffect } from 'react';\nimport TextField from '@material-ui/core/TextField';\n\nexport default function Email(props) {\n  const [text, setText] = useState('');\n  const [errorText, setErrorText] = useState('');\n  const [errorValue, setErrorValue] = useState(false);\n  const [firstRender, setFirstRender] = useState(true);\n\n  const { submitFormClicked } = props;\n\n  useEffect(() => {\n    setFirstRender(false);\n  }, []);\n\n  useEffect(() => {\n    if (firstRender === false) {\n      const result = handleEmailInput(text);\n      props.setEmailValidated([result, text]);\n    }\n    // eslint-disable-next-line\n  }, [submitFormClicked]);\n\n  const handleEmailInput = (text) => {\n    if (\n      text.length > 10 &&\n      text.length < 50 &&\n      text.includes('@') &&\n      text.includes('.com')\n    ) {\n      setErrorValue(false);\n      setErrorText('');\n      return true;\n    } else {\n      setErrorText('Email must be entered and include an @ and .com');\n      setErrorValue(true);\n      return false;\n    }\n  };\n\n  return (\n    <React.Fragment>\n      <TextField\n        required\n        error={errorValue}\n        helperText={errorText}\n        onChange={(e) => {\n          setText(e.target.value);\n          handleEmailInput(e.target.value);\n        }}\n        label=\"Email\"\n        InputLabelProps={{\n          shrink: true,\n        }}\n      />\n    </React.Fragment>\n  );\n}\n","import React, { useState, useEffect } from 'react';\nimport TextField from '@material-ui/core/TextField';\n\nexport default function FirstName(props) {\n  const [text, setText] = useState('');\n  const [errorText, setErrorText] = useState('');\n  const [errorValue, setErrorValue] = useState(false);\n  const [firstRender, setFirstRender] = useState(true);\n\n  const { submitFormClicked } = props;\n\n  useEffect(() => {\n    setFirstRender(false);\n  }, []);\n\n  useEffect(() => {\n    if (firstRender === false) {\n      const result = handleFirstNameInput(text);\n      props.setFirstNameValidated([result, text]);\n    }\n    // eslint-disable-next-line\n  }, [submitFormClicked]);\n\n  const handleFirstNameInput = (text) => {\n    if (text.length > 0) {\n      setErrorValue(false);\n      setErrorText('');\n      return true;\n    } else {\n      setErrorText('First name must be included');\n      setErrorValue(true);\n      return false;\n    }\n  };\n  return (\n    <React.Fragment>\n      <TextField\n        required\n        error={errorValue}\n        helperText={errorText}\n        onChange={(e) => {\n          setText(e.target.value);\n          handleFirstNameInput(e.target.value);\n        }}\n        label=\"First name\"\n        InputLabelProps={{\n          shrink: true,\n        }}\n      />\n    </React.Fragment>\n  );\n}\n","import React, { useState, useEffect } from 'react';\nimport TextField from '@material-ui/core/TextField';\n\nexport default function LastName(props) {\n  const [text, setText] = useState('');\n  const [errorText, setErrorText] = useState('');\n  const [errorValue, setErrorValue] = useState(false);\n  const [firstRender, setFirstRender] = useState(true);\n\n  const { submitFormClicked } = props;\n\n  useEffect(() => {\n    setFirstRender(false);\n  }, []);\n\n  useEffect(() => {\n    if (firstRender === false) {\n      const result = handleLastNameInput(text);\n      props.setLastNameValidated([result, text]);\n    }\n    // eslint-disable-next-line\n  }, [submitFormClicked]);\n\n  const handleLastNameInput = (text) => {\n    if (text.length > 0) {\n      setErrorValue(false);\n      setErrorText('');\n      return true;\n    } else {\n      setErrorText('Last name must be included');\n      setErrorValue(true);\n      return false;\n    }\n  };\n  return (\n    <React.Fragment>\n      <div>\n        <TextField\n          required\n          error={errorValue}\n          helperText={errorText}\n          onChange={(e) => {\n            setText(e.target.value);\n            handleLastNameInput(e.target.value);\n          }}\n          label=\"Last name\"\n          InputLabelProps={{\n            shrink: true,\n          }}\n        />\n      </div>\n    </React.Fragment>\n  );\n}\n","import React, { useState, useEffect } from 'react';\nimport TextField from '@material-ui/core/TextField';\n\nexport default function Password(props) {\n  const [text, setText] = useState('');\n  const [errorText, setErrorText] = useState('');\n  const [errorValue, setErrorValue] = useState(false);\n  const [firstRender, setFirstRender] = useState(true);\n\n  const { submitFormClicked } = props;\n\n  useEffect(() => {\n    setFirstRender(false);\n  }, []);\n\n  useEffect(() => {\n    if (firstRender === false) {\n      const result = handlePasswordInput(text);\n      props.setPasswordValidated([result, text]);\n    }\n    // eslint-disable-next-line\n  }, [submitFormClicked]);\n\n  const handlePasswordInput = (text) => {\n    if (text.length >= 8 && text.length < 16) {\n      setErrorValue(false);\n      setErrorText('');\n      return true;\n    } else {\n      setErrorText('Password must be between 8 and 16 characters long');\n      setErrorValue(true);\n      return false;\n    }\n  };\n  return (\n    <React.Fragment>\n      <TextField\n        type=\"password\"\n        required\n        error={errorValue}\n        helperText={errorText}\n        onChange={(e) => {\n          setText(e.target.value);\n          handlePasswordInput(e.target.value);\n        }}\n        label=\"Password\"\n        InputLabelProps={{\n          shrink: true,\n        }}\n      />\n    </React.Fragment>\n  );\n}\n","import React, { useState, useEffect } from 'react';\nimport TextField from '@material-ui/core/TextField';\n\nexport default function FirstName(props) {\n  const [text, setText] = useState('');\n  const [errorText, setErrorText] = useState('');\n  const [errorValue, setErrorValue] = useState(false);\n  const [firstRender, setFirstRender] = useState(true);\n\n  const { submitFormClicked } = props;\n\n  useEffect(() => {\n    setFirstRender(false);\n  }, []);\n\n  useEffect(() => {\n    if (firstRender === false) {\n      const result = handleUsernameInput(text);\n      props.setUsernameValidated([result, text]);\n    }\n    // eslint-disable-next-line\n  }, [submitFormClicked]);\n\n  const handleUsernameInput = (text) => {\n    if (text.length > 0 && text.length < 32) {\n      setErrorValue(false);\n      setErrorText('');\n      return true;\n    } else {\n      setErrorText('Username must be between 0 and 32 characters long ');\n      setErrorValue(true);\n      return false;\n    }\n  };\n  return (\n    <React.Fragment>\n      <TextField\n        required\n        error={errorValue}\n        helperText={errorText}\n        onChange={(e) => {\n          setText(e.target.value);\n          handleUsernameInput(e.target.value);\n        }}\n        label=\"Username\"\n        InputLabelProps={{\n          shrink: true,\n        }}\n      />\n    </React.Fragment>\n  );\n}\n","import React, { useState, useEffect } from 'react';\nimport ReactDom from 'react-dom';\nimport './SignupModal.css';\nimport Button from '@material-ui/core/Button';\nimport axios from 'axios';\nimport Email from './Textfields/Email';\nimport FirstName from './Textfields/FirstName';\nimport LastName from './Textfields/LastName';\nimport Password from './Textfields/Password';\nimport Username from './Textfields/Username';\nimport TextField from '@material-ui/core/TextField';\n\nexport default function RegistrationPage(props) {\n  const [submitFormClicked, setSubmitFormClicked] = useState(false);\n\n  const [firstNameValidated, setFirstNameValidated] = useState([false, '']);\n  const [lastNameValidated, setLastNamedValidated] = useState([false, '']);\n  const [emailValidated, setEmailValidated] = useState([false, '']);\n  const [passwordValidated, setPasswordValidated] = useState([false, '']);\n  const [usernameValidated, setUsernameValidated] = useState([false, '']);\n\n  const [codeGenerated, setCodeGenerated] = useState(null);\n  const [enteredCode, setEnteredCode] = useState(null);\n  const [emailConfirmed, setEmailConfirmed] = useState(null);\n  const [userRegistered, setUserRegistered] = useState(null);\n\n  const [loading, setLoading] = useState(false);\n\n  const [verifyLoading, setverifyLoading] = useState(false);\n\n  useEffect(() => {\n    const verifyUser = () => {\n      setverifyLoading(true);\n      axios({\n        method: 'POST',\n        url: 'http://localhost:5000/verify_email',\n        params: {\n          email: emailValidated[1],\n        },\n      }).then((response) => {\n        console.log(response);\n        if (response.data.result) {\n          setCodeGenerated(response.data.result);\n        } else {\n          setCodeGenerated(false);\n        }\n        setverifyLoading(false);\n      });\n    };\n\n    if (\n      firstNameValidated[0] &&\n      lastNameValidated[0] &&\n      emailValidated[0] &&\n      passwordValidated[0] &&\n      usernameValidated[0]\n    ) {\n      verifyUser();\n    }\n  }, [\n    firstNameValidated,\n    lastNameValidated,\n    emailValidated,\n    passwordValidated,\n    usernameValidated,\n  ]);\n\n  const registerUser = () => {\n    setLoading(true);\n    axios({\n      method: 'POST',\n      url: 'http://localhost:5000/create_user',\n      params: {\n        email: emailValidated[1],\n        password: passwordValidated[1],\n        first: firstNameValidated[1],\n        last: lastNameValidated[1],\n        username: usernameValidated[1],\n      },\n    }).then((response) => {\n      console.log(response);\n      if (response.data.result) {\n        setUserRegistered(true);\n      }\n      setLoading(false);\n    });\n  };\n\n  const handleCodeEntered = () => {\n    if (codeGenerated === enteredCode) {\n      setEmailConfirmed(true);\n      registerUser();\n    } else {\n      setEmailConfirmed(false);\n    }\n  };\n\n  if (!props.openSignupModal) {\n    return null;\n  } else {\n    return ReactDom.createPortal(\n      <React.Fragment>\n        <div className=\"overlayStyles\" />\n        <div\n          className=\"signupModal\"\n          onClick={(e) => {\n            e.stopPropagation();\n          }}\n        >\n          {codeGenerated === null ? (\n            <React.Fragment>\n              <h1>Join PhotoPro</h1>\n              <FirstName\n                submitFormClicked={submitFormClicked}\n                setFirstNameValidated={setFirstNameValidated}\n              />\n              <LastName\n                submitFormClicked={submitFormClicked}\n                setLastNameValidated={setLastNamedValidated}\n              />\n              <Email\n                submitFormClicked={submitFormClicked}\n                setEmailValidated={setEmailValidated}\n              />\n              <Username\n                submitFormClicked={submitFormClicked}\n                setUsernameValidated={setUsernameValidated}\n              />\n              <Password\n                submitFormClicked={submitFormClicked}\n                setPasswordValidated={setPasswordValidated}\n              />\n              <h3 style={{ color: 'grey' }}>{verifyLoading && 'Loading...'}</h3>\n              <div className=\"register-button\">\n                <Button\n                  variant=\"outlined\"\n                  color=\"primary\"\n                  block\n                  bsSize=\"large\"\n                  onClick={() => {\n                    setSubmitFormClicked(!submitFormClicked);\n                  }}\n                >\n                  Confirm Details\n                </Button>\n              </div>\n            </React.Fragment>\n          ) : null}\n\n          {codeGenerated === false ? (\n            <h2 style={{ color: 'red' }}>Invalid email provided</h2>\n          ) : null}\n\n          {codeGenerated !== null && userRegistered !== true ? (\n            <React.Fragment>\n              <div>\n                <h1 style={{ color: 'grey' }}>Please verify your email </h1>\n                <h2>Enter the code we've just sent to {emailValidated[1]}:</h2>\n                <div style={{ marginBottom: '5%' }}>\n                  <TextField\n                    required\n                    // error={errorValue}\n                    // helperText={errorText}\n                    onChange={(e) => {\n                      setEnteredCode(e.target.value);\n                    }}\n                    label=\"Code\"\n                    InputLabelProps={{\n                      shrink: true,\n                    }}\n                  />\n                </div>\n                <h3 style={{ color: 'grey' }}>{loading && 'Loading...'}</h3>\n                <div>\n                  <Button\n                    variant=\"contained\"\n                    color=\"primary\"\n                    size=\"large\"\n                    onClick={handleCodeEntered}\n                  >\n                    Confirm Code\n                  </Button>\n                </div>\n              </div>\n            </React.Fragment>\n          ) : null}\n\n          {emailConfirmed === false ? (\n            <h2>Incorrect code, try again.</h2>\n          ) : null}\n\n          {userRegistered === true ? (\n            <React.Fragment>\n              <h1 style={{ color: 'grey' }}>\n                Your email is verified, welcome to PhotoPro!\n              </h1>\n              <h2> Sign in with your details.</h2>\n            </React.Fragment>\n          ) : null}\n        </div>\n      </React.Fragment>,\n      document.getElementById('toolbarPortal')\n    );\n  }\n}\n","import React, { useState } from 'react';\nimport axios from 'axios';\nimport ReactDom from 'react-dom';\nimport './DeleteAccountModal.css';\nimport Button from '@material-ui/core/Button';\nimport { useHistory } from 'react-router-dom';\nimport TextField from '@material-ui/core/TextField';\n\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    '& .MuiTextField-root': {\n      margin: theme.spacing(1),\n      width: 'ch',\n    },\n  },\n}));\n\nexport default function DeleteAccountModal(props) {\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n\n  const [showButtons, setShowButtons] = useState(true);\n  const [credentialsValidated, setCredentialsValidated] = useState('');\n\n  const history = useHistory();\n  const classes = useStyles();\n\n  const handleDeleteAccountClickedApi = () => {\n    axios({\n      method: 'POST',\n      url: 'http://localhost:5000/delete_user',\n      params: {\n        email: email,\n        password: password,\n      },\n    }).then((response) => {\n      console.log(response);\n      if (response.data.result !== false) {\n        localStorage.clear();\n        history.push('/');\n        history.go(0);\n      } else {\n        setCredentialsValidated('error');\n      }\n    });\n  };\n\n  const handleDeleteAccountConfirmedClicked = () => {\n    handleDeleteAccountClickedApi();\n    console.log(email);\n    console.log(password);\n  };\n\n  const handleDeleteButtonClicked = () => {\n    console.log('deleteButtonClicked');\n    setShowButtons(false);\n  };\n\n  if (!props.openDeleteAccountModal) {\n    return null;\n  } else {\n    return ReactDom.createPortal(\n      <React.Fragment>\n        <div className=\"overlay-styles\" />\n        <div\n          className=\"confirmation-modal\"\n          onClick={(e) => e.stopPropagation()}\n        >\n          <h1>Are you sure you want to delete your account?</h1>\n          <h3>\n            Deleting your account is permanent and will remove all content\n            including uploaded and purchased photos, collections and comments.\n          </h3>\n\n          {showButtons ? (\n            <React.Fragment>\n              <Button\n                variant=\"contained\"\n                color=\"secondary\"\n                onClick={handleDeleteButtonClicked}\n              >\n                Yes, delete\n              </Button>\n              <Button\n                variant=\"contained\"\n                color=\"primary\"\n                onClick={() => {\n                  props.setOpenDeleteAccountModal(false);\n                }}\n              >\n                No, don't delete\n              </Button>\n            </React.Fragment>\n          ) : null}\n\n          {!showButtons ? (\n            <React.Fragment>\n              <form className={classes.root} noValidate autoComplete=\"off\">\n                <div className=\"cart-details-grid\"></div>\n                <h2>Email</h2>\n                <div>\n                  <TextField\n                    required\n                    // error={errorValue}\n                    // helperText={errorText}\n                    onChange={(e) => {\n                      setEmail(e.target.value);\n                      //   handleTitleInput(e.target.value);\n                    }}\n                    id=\"outlined-required\"\n                    label=\"Required\"\n                    defaultValue={props.oldTitle}\n                    variant=\"outlined\"\n                  />\n                </div>\n\n                <h2>Password</h2>\n                <div onClick={(e) => e.stopPropagation()}>\n                  <TextField\n                    required\n                    // error={errorValue}\n                    // helperText={errorText}\n                    onChange={(e) => {\n                      setPassword(e.target.value);\n                      //   handleTitleInput(e.target.value);\n                    }}\n                    id=\"outlined-required\"\n                    label=\"Required\"\n                    defaultValue={props.oldTitle}\n                    variant=\"outlined\"\n                    type=\"password\"\n                  />\n                </div>\n                <div>\n                  <Button\n                    variant=\"contained\"\n                    color=\"secondary\"\n                    size=\"large\"\n                    onClick={handleDeleteAccountConfirmedClicked}\n                  >\n                    CONFIRM\n                  </Button>\n                </div>\n                <div>\n                  <Button\n                    variant=\"contained\"\n                    color=\"primary\"\n                    size=\"large\"\n                    onClick={() => {\n                      props.setOpenDeleteAccountModal(false);\n                    }}\n                  >\n                    Cancel\n                  </Button>\n                </div>\n\n                {credentialsValidated === 'error' ? (\n                  <h2 style={{ color: 'red' }}>Incorrect Email or Password</h2>\n                ) : null}\n              </form>\n            </React.Fragment>\n          ) : null}\n        </div>\n      </React.Fragment>,\n      document.getElementById('toolbarPortal')\n    );\n  }\n}\n","import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport './toolbar.css';\nimport { useHistory } from 'react-router-dom';\nimport Button from '@material-ui/core/Button';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport { makeStyles } from '@material-ui/core/styles';\nimport CloudUploadIcon from '@material-ui/icons/CloudUpload';\nimport Notifications from './notifications/notifications';\nimport logo from '../../logo/logo-new.png';\nimport ForgotPasswordModal from '../Modals/ForgotPasswordModal/ForgotPasswordModal';\n\nimport LoginModal from '../Modals/LoginModal/LoginModal';\nimport SignupModal from '../Modals/SignupModal/SignupModal';\nimport DeleteAccountModal from '../Modals/DeleteAccountModal/DeleteAccountModal';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    border: '3px solid red',\n    margin: 'auto',\n  },\n  button: {\n    color: 'rgb(83, 85, 89)',\n  },\n}));\n\nfunction Toolbar() {\n  const history = useHistory();\n  const classes = useStyles();\n  const loggedIn = localStorage.getItem('userLoggedIn');\n  const [username, setUsername] = useState('');\n\n  const [anchorEl, setAnchorEl] = useState(null);\n\n  const [loginModalIsOpen, setLoginModalIsOpen] = useState(false);\n  const [forgotPasswordModalIsOpen, setForgotPasswordModalIsOpen] = useState(\n    false\n  );\n\n  const [signupModalIsOpen, setSignupModalIsOpen] = useState(false);\n  const [deleteAcountModalIsOpen, setDeleteAccountModalIsOpen] = useState(\n    false\n  );\n\n  useEffect(() => {\n    axios({\n      url: 'http://localhost:5000/get_user_username',\n      params: { user_id: localStorage.getItem('userID') },\n    }).then((response) => {\n      if (response.data.result) {\n        console.log(response);\n        setUsername(response.data.result);\n      }\n    });\n  }, []);\n\n  const handleAccountClick = (event) => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handleAccountClose = () => {\n    setAnchorEl(null);\n  };\n\n  const handleSignInClicked = () => {\n    setLoginModalIsOpen(true);\n  };\n\n  const handleSignUpClicked = () => {\n    setSignupModalIsOpen(true);\n  };\n\n  const handleProfileClicked = function () {\n    const userID = localStorage.getItem('userID');\n    console.log(`In toolbar the userID = ${userID}`);\n    history.push({\n      pathname: `/profile/${userID}`,\n      state: { uploaderID: userID },\n    });\n  };\n\n  const handleLogoutClicked = () => {\n    localStorage.clear();\n    history.push('/');\n    history.go(0); // forces the page to re-render if you are already on it which causes it to display the right information\n  };\n\n  const handleDiscoveryClicked = () => {\n    history.push('/recommendations');\n  };\n\n  const handleUploadClicked = () => {\n    history.push('/uploadphoto');\n  };\n\n  const handleChangePassClicked = () => {\n    history.push('/changepassword');\n  };\n\n  const handleCollectionsClicked = () => {\n    const userID = localStorage.getItem('userID');\n    console.log(`In toolbar the userID = ${userID}`);\n    history.push({\n      pathname: `/collections/${userID}`,\n      state: { uploaderID: userID },\n    });\n  };\n\n  const handleCartClicked = () => {\n    history.push('/shopping-cart');\n  };\n\n  const handleMyPurchasesClicked = () => {\n    history.push('/my-purchases');\n  };\n\n  const handleLogoClicked = () => {\n    history.push('/');\n    history.go(0);\n  };\n\n  const handleDeleteAccountClicked = () => {\n    setDeleteAccountModalIsOpen(true);\n    handleAccountClose();\n  };\n\n  console.log();\n\n  let buttons;\n  if (loggedIn === 'true') {\n    buttons = (\n      <React.Fragment>\n        <div className={'flex-container-buttons-2'}>\n          <Button\n            variant=\"outlined\"\n            className={classes.button}\n            size=\"small\"\n            onClick={handleDiscoveryClicked}\n          >\n            Discovery\n          </Button>\n          <Button\n            variant=\"outlined\"\n            className={classes.button}\n            size=\"small\"\n            onClick={handleCollectionsClicked}\n          >\n            Collections\n          </Button>\n\n          <Button\n            variant=\"outlined\"\n            className={classes.button}\n            size=\"small\"\n            onClick={handleCartClicked}\n          >\n            My Cart\n          </Button>\n\n          <Button\n            variant=\"outlined\"\n            size=\"large\"\n            className={classes.button}\n            aria-controls=\"simple-menu\"\n            aria-haspopup=\"true\"\n            onClick={handleAccountClick}\n          >\n            @{username}\n          </Button>\n          <Menu\n            id=\"simple-menu\"\n            anchorEl={anchorEl}\n            keepMounted\n            open={Boolean(anchorEl)}\n            onClose={handleAccountClose}\n          >\n            <MenuItem onClick={handleProfileClicked}>Profile</MenuItem>\n            <MenuItem onClick={handleMyPurchasesClicked}>My Purchases</MenuItem>\n            <MenuItem onClick={handleChangePassClicked}>\n              Change Password\n            </MenuItem>\n            <MenuItem onClick={handleDeleteAccountClicked}>\n              Delete My Account\n            </MenuItem>\n            <MenuItem onClick={handleLogoutClicked}>Logout</MenuItem>\n          </Menu>\n          <Notifications />\n        </div>\n        <div className=\"toolbar-left\">\n          <Button\n            variant=\"outlined\"\n            size=\"large\"\n            onClick={handleUploadClicked}\n            // variant=\"outlined\"\n            color=\"primary\"\n            className={classes.button}\n            startIcon={<CloudUploadIcon />}\n          >\n            Upload Photo\n          </Button>\n        </div>\n      </React.Fragment>\n    );\n  } else {\n    buttons = (\n      <React.Fragment>\n        <div className=\"toolbar-left-placeholder\"></div>\n        <div className=\"flex-container-buttons-1\">\n          <Button\n            variant=\"outlined\"\n            size=\"large\"\n            className={classes.button}\n            onClick={handleSignInClicked}\n          >\n            Sign in\n          </Button>\n          <Button\n            variant=\"outlined\"\n            size=\"large\"\n            className={classes.button}\n            onClick={handleSignUpClicked}\n          >\n            Getting Started\n          </Button>\n        </div>\n      </React.Fragment>\n    );\n  }\n\n  return (\n    <React.Fragment>\n      <div className=\"flex-container-toolbar\">\n        <div className=\"logo\">\n          <img\n            className=\"logo\"\n            src={logo}\n            alt=\"Logo\"\n            onClick={handleLogoClicked}\n          />\n        </div>\n        {buttons}\n\n        {loginModalIsOpen ? (\n          <div\n            className=\"toolbar-modal-wrapper\"\n            onClick={() => {\n              setLoginModalIsOpen(false);\n            }}\n          >\n            <LoginModal\n              openLoginModal={true}\n              setOpenLoginModal={setLoginModalIsOpen}\n              setForgotPasswordModalIsOpen={setForgotPasswordModalIsOpen}\n            ></LoginModal>\n          </div>\n        ) : null}\n\n        {forgotPasswordModalIsOpen ? (\n          <div\n            className=\"toolbar-modal-wrapper\"\n            onClick={() => {\n              setForgotPasswordModalIsOpen(false);\n            }}\n          >\n            <ForgotPasswordModal\n              openForgotPasswordModal={true}\n              setOpenForgotPasswordModal={setForgotPasswordModalIsOpen}\n            ></ForgotPasswordModal>\n          </div>\n        ) : null}\n\n        {signupModalIsOpen ? (\n          <div\n            className=\"toolbar-modal-wrapper\"\n            onClick={() => {\n              setSignupModalIsOpen(false);\n            }}\n          >\n            <SignupModal\n              openSignupModal={true}\n              setOpenSignupModal={setSignupModalIsOpen}\n            ></SignupModal>\n          </div>\n        ) : null}\n\n        {deleteAcountModalIsOpen ? (\n          <div\n            className=\"toolbar-modal-wrapper\"\n            onClick={() => {\n              setDeleteAccountModalIsOpen(false);\n            }}\n          >\n            <DeleteAccountModal\n              openDeleteAccountModal={true}\n              setOpenDeleteAccountModal={setDeleteAccountModalIsOpen}\n            ></DeleteAccountModal>\n          </div>\n        ) : null}\n      </div>\n    </React.Fragment>\n  );\n}\n\nexport default Toolbar;\n","import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport Button from '@material-ui/core/Button';\n\nconst FollowButton = (props) => {\n  const [following, setFollowing] = useState(false);\n\n  useEffect(() => {\n    let mounted = true;\n\n    const checkIfFollowing = () => {\n      axios({\n        method: 'GET',\n        url: 'http://localhost:5000/is_following',\n        params: { following: props.uploader },\n      }).then((response) => {\n        console.log(response);\n        if (response.data.result === true && mounted) {\n          setFollowing(true);\n        } else if (mounted) {\n          setFollowing(false);\n        }\n      });\n    };\n\n    checkIfFollowing();\n\n    return () => {\n      mounted = false;\n    };\n    // eslint-disable-next-line\n  }, []);\n\n  const handleFollowClicked = () => {\n    const follow = () => {\n      axios({\n        method: 'POST',\n        url: 'http://localhost:5000/follow',\n        params: { to_follow: props.uploader },\n      }).then((response) => {\n        console.log(response);\n        if (response.data.result === true) {\n          setFollowing(true);\n        } else {\n          setFollowing(false);\n        }\n      });\n    };\n\n    const unfollow = () => {\n      axios({\n        method: 'POST',\n        url: 'http://localhost:5000/unfollow',\n        params: { following: props.uploader },\n      }).then((response) => {\n        console.log(response);\n        if (response.data.result === true) {\n          setFollowing(false);\n        } else {\n          setFollowing(true);\n        }\n      });\n    };\n\n    if (following) {\n      unfollow();\n    } else {\n      follow();\n    }\n  };\n\n  return (\n    <React.Fragment>\n      {following ? (\n        <Button\n          variant=\"contained\"\n          color=\"primary\"\n          style={{}}\n          onClick={handleFollowClicked}\n        >\n          Following\n        </Button>\n      ) : (\n        <Button\n          variant=\"outlined\"\n          color=\"primary\"\n          style={{}}\n          onClick={handleFollowClicked}\n        >\n          Follow\n        </Button>\n      )}\n    </React.Fragment>\n  );\n};\n\nexport default FollowButton;\n","import React, { useState, useEffect } from 'react';\nimport './Likes.css';\nimport axios from 'axios';\nimport IconButton from '@material-ui/core/IconButton';\nimport FavoriteIcon from '@material-ui/icons/Favorite';\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles({\n  root: {\n    width: '2rem',\n    height: '2rem',\n  },\n  liked: {\n    color: 'rgba(255, 255, 255, 1)',\n    backgroundColor: 'rgba(213, 48, 48, 1)',\n  },\n\n  unliked: {},\n});\n\nfunction Likes(props) {\n  const [num_likes, set_num_likes] = useState();\n  const [postLiked, setPostLiked] = useState(false);\n  const classes = useStyles();\n\n  const { image_id: imageID } = props;\n  let userID = localStorage.getItem('userID');\n\n  useEffect(() => {\n    axios({\n      method: 'GET',\n      url: 'http://localhost:5000/get_num_likes_of_image',\n      params: { image_id: imageID },\n    }).then((response) => {\n      if (response.data.result !== false) {\n        set_num_likes(response.data.result);\n      } else {\n        set_num_likes(0);\n      }\n    });\n  }, [imageID]);\n\n  useEffect(() => {\n    props.setNumLikes(num_likes);\n    // eslint-disable-next-line\n  }, [num_likes]);\n\n  useEffect(() => {\n    const checkIfLiked = () => {\n      axios({\n        url: 'http://localhost:5000/check_if_user_liked_photo',\n        params: { image_id: imageID },\n      }).then((response) => {\n        console.log(response);\n        if (response.data.result) {\n          setPostLiked(true);\n        } else {\n          setPostLiked(false);\n        }\n      });\n    };\n    checkIfLiked();\n  }, [userID, imageID]);\n\n  const handleLikeClicked = () => {\n    if (userID != null) {\n      if (!postLiked) {\n        post_likes();\n      } else {\n        delete_likes();\n      }\n    }\n  };\n\n  const sendLikeNotification = () => {\n    axios({\n      url: 'http://localhost:5000/send_notification',\n      params: {\n        uploader_id: props.uploader_id,\n        notification: 'like',\n        image_id: imageID,\n      },\n    }).then((response) => {\n      console.log(response);\n    });\n  };\n\n  const post_likes = () => {\n    const updateLikeRecommendation = () => {\n      axios({\n        method: 'GET',\n        url: 'http://localhost:5000/update_likes_recommendation',\n        params: { image_id: imageID },\n      }).then((res) => {\n        console.log(res);\n      });\n    };\n\n    axios({\n      method: 'GET',\n      url: 'http://localhost:5000/post_like_to_image',\n      params: { image_id: imageID },\n    }).then((response) => {\n      console.log(response);\n      if (response.data.result) {\n        set_num_likes((prevState) => parseInt(prevState) + 1);\n        setPostLiked(true);\n        sendLikeNotification();\n        updateLikeRecommendation();\n      }\n    });\n  };\n\n  const delete_likes = () => {\n    axios({\n      method: 'POST',\n      url: 'http://localhost:5000/delete_like_from_image',\n      params: { image_id: imageID },\n    }).then((response) => {\n      if (response.data.result) {\n        set_num_likes((prevState) => parseInt(prevState) - 1);\n        setPostLiked(false);\n      }\n      return response.data.result;\n    });\n  };\n\n  let buttonClass;\n  if (postLiked) {\n    buttonClass = classes.liked;\n  } else {\n    buttonClass = classes.unliked;\n  }\n\n  return (\n    <React.Fragment>\n      <div className=\"like\">\n        <div style={{ textAlign: 'center' }}>\n          <IconButton\n            classes={{ root: `${classes.root} ${buttonClass}` }}\n            onClick={handleLikeClicked}\n            disabled={\n              localStorage.getItem('userLoggedIn') &&\n              localStorage.getItem('userID') !== props.uploader_id\n                ? false\n                : true\n            }\n          >\n            <FavoriteIcon />\n          </IconButton>\n        </div>\n\n        <p>{num_likes}</p>\n      </div>\n    </React.Fragment>\n  );\n}\n\nexport default Likes;\n","import React from \"react\";\nimport \"./ReplyComment.css\";\nimport Button from \"@material-ui/core/Button\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport DeleteOutlineIcon from \"@material-ui/icons/DeleteOutline\";\nimport axios from \"axios\";\n\nexport default function ReplyComment(props) {\n  let commenterID = String(props.replies_info.commenter);\n  let userID = localStorage.getItem(\"userID\");\n\n  const handleDeleteClicked = () => {\n    deleteComment(props.replies_info.comment_id);\n    // props.updateReplies(props.replies_info.comment.concat(\"updated\"));\n  };\n\n  let deleteButton =\n    commenterID === userID ? (\n      <IconButton onClick={handleDeleteClicked}>\n        <DeleteOutlineIcon />\n      </IconButton>\n    ) : (\n      <Button></Button>\n    );\n\n  const deleteComment = (commentID) => {\n    axios({\n      method: \"POST\",\n      url: \"http://localhost:5000/post_delete_comment\",\n      params: { comment_id: commentID },\n    }).then((response) => {\n      if (response.data.result) {\n        console.log(\n          `im here in replyComment deletecomment api call ${response}`\n        );\n        props.updateReplies(props.replies_info.comment);\n      }\n    });\n  };\n\n  return (\n    <React.Fragment>\n      <div className=\"reply_comment\">\n        {/* <div className=\"reply-avatar ava\">\n          <img\n            src=\"https://images.unsplash.com/photo-1490894641324-cfac2f5cd077?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=100&q=70\"\n            alt=\"user icon\"\n          ></img>\n        </div> */}\n        <div className=\"username\">@{props.replies_info.username}</div>\n        <div className=\"date\">\n          <p>{props.replies_info.created_at}</p>\n        </div>\n        {deleteButton}\n        <div className=\"reply_content\">\n          <p>{props.replies_info.comment}</p>\n        </div>\n      </div>\n    </React.Fragment>\n  );\n}\n","import React, { useState, useEffect } from 'react';\nimport './ReplyComments.css';\nimport axios from 'axios';\nimport ReplyComment from './replyComment/ReplyComment';\n\nexport default function ReplyComments(props) {\n  const [replies, set_replies] = useState([]);\n  const [replyUpdated, updateReplies] = useState('');\n\n  const { newReply, comment_id, setShowViewReplies, updateComments } = props;\n\n  useEffect(() => {\n    const getReplies = () => {\n      axios({\n        method: 'GET',\n        url: 'http://localhost:5000/get_comments_to_comment',\n        params: {\n          comment_id: comment_id,\n          batch_size: 10,\n        },\n      }).then((response) => {\n        console.log(response);\n        if (response.data.result) {\n          set_replies(response.data.result);\n        } else {\n          console.log('NO REPLIES FOUND');\n          set_replies([]);\n          setShowViewReplies(false);\n          updateComments(comment_id);\n        }\n      });\n    };\n    getReplies();\n  }, [replyUpdated, newReply, comment_id, setShowViewReplies, updateComments]);\n\n  const replies_components = replies.map((reply) => {\n    return (\n      <ReplyComment\n        key={reply.comment_id}\n        replies_info={reply}\n        updateReplies={updateReplies}\n      />\n    );\n  });\n\n  return (\n    <React.Fragment>\n      <div className=\"reply_comments\">{replies_components}</div>\n    </React.Fragment>\n  );\n}\n","import React, { useState, useEffect } from 'react';\nimport './Comment.css';\nimport ReplyIcon from '@material-ui/icons/Reply';\nimport DeleteOutlineIcon from '@material-ui/icons/DeleteOutline';\nimport IconButton from '@material-ui/core/IconButton';\nimport Button from '@material-ui/core/Button';\nimport axios from 'axios';\nimport ReplyComments from './replyComments/ReplyComments';\n\nexport default function Comment(props) {\n  const [reply_input, set_reply_input] = useState('');\n  const [show_reply_form, set_show_reply_form] = useState(false);\n  const [showViewReplies, setShowViewReplies] = useState(false);\n  const [newReply, setNewReply] = useState('');\n\n  const [usersProfilePhoto, setUsersProfilePhoto] = useState(null);\n\n  const getProfilePhoto = () => {\n    axios({\n      method: 'GET',\n      url: 'http://localhost:5000/get_profile_photo',\n      params: {\n        user_id: props.comment_info.commenter,\n      },\n    }).then((response) => {\n      console.log(response);\n      if (response.data.result) {\n        setUsersProfilePhoto(response.data.result);\n      } else {\n        setUsersProfilePhoto(null);\n      }\n    });\n  };\n\n  useEffect(() => {\n    getProfilePhoto();\n    // eslint-disable-next-line\n  }, []);\n\n  let commenterID = String(props.comment_info.commenter);\n  let userID = localStorage.getItem('userID');\n\n  const deleteComment = (commentID) => {\n    axios({\n      method: 'POST',\n      url: 'http://localhost:5000/post_delete_comment',\n      params: { comment_id: commentID },\n    }).then((response) => {\n      if (response.data.result) {\n        console.log(`delete request ${response}`);\n        props.updateComments(props.comment_info.comment);\n        console.log(response);\n      }\n    });\n  };\n\n  const handleDeleteClicked = () => {\n    deleteComment(props.comment_info.comment_id);\n  };\n\n  let deleteButton =\n    commenterID === userID ? (\n      <IconButton onClick={handleDeleteClicked}>\n        <DeleteOutlineIcon />\n      </IconButton>\n    ) : (\n      <Button></Button>\n    );\n\n  const handleReplyClicked = () => {\n    // open the form\n    if (show_reply_form) {\n      set_show_reply_form(false);\n    } else {\n      set_show_reply_form(true);\n    }\n  };\n\n  const handleReplySubmitted = (e) => {\n    e.preventDefault();\n    post_reply_comments(reply_input);\n  };\n\n  const post_reply_comments = (reply_input) => {\n    axios({\n      method: 'POST',\n      url: 'http://localhost:5000/post_comment_to_comment',\n      params: {\n        comment_id: props.comment_info.comment_id,\n        comment: reply_input,\n        image_id: props.comment_info.image_id,\n      },\n    }).then((response) => {\n      if (response.data.result) {\n        props.updateComments(reply_input);\n        set_reply_input('');\n        if (showViewReplies === true) {\n          setNewReply(reply_input);\n        }\n        console.log('reply submitted');\n      }\n    });\n    axios({\n      method: 'GET',\n      url: 'http://localhost:5000/update_comment_recommendation',\n      params: { image_id: props.comment_info.image_id }, //user_id: 1\n    }).then((res) => {\n      console.log(res);\n    });\n  };\n\n  const handleViewRepliesClicked = () => {\n    if (showViewReplies) {\n      setShowViewReplies(false);\n    } else {\n      setShowViewReplies(true);\n    }\n  };\n\n  const handleHideRepliesClicked = () => {\n    setShowViewReplies(false);\n  };\n\n  return (\n    <div className=\"card v-card v-sheet theme--light elevation-2\">\n      <div className=\"header\">\n        <div className=\"comment-container\">\n          <div className=\"v-avatar avatar\">\n            {usersProfilePhoto !== null ? (\n              <React.Fragment>\n                <img\n                  src={`data:image/jpg;base64,${usersProfilePhoto}`}\n                  alt=\"user icon\"\n                ></img>\n              </React.Fragment>\n            ) : null}\n          </div>\n          <span className=\"displayName title\">\n            @{props.comment_info.username}\n          </span>{' '}\n          <span className=\"displayName caption\">\n            {props.comment_info.created_at}\n          </span>\n          {localStorage.getItem('userLoggedIn') ? (\n            <React.Fragment>\n              <IconButton onClick={handleReplyClicked}>\n                <ReplyIcon />\n              </IconButton>\n              {deleteButton}\n            </React.Fragment>\n          ) : null}\n        </div>\n        <div className=\"comment\">\n          <p>{props.comment_info.comment}</p>\n        </div>\n\n        {show_reply_form ? (\n          <div className=\"reply_form\">\n            <form onSubmit={handleReplySubmitted}>\n              <div>\n                <input\n                  type=\"reply\"\n                  id=\"reply_input\"\n                  value={reply_input}\n                  onChange={(e) => set_reply_input(e.target.value)}\n                  autoComplete=\"off\"\n                />\n              </div>\n            </form>\n          </div>\n        ) : null}\n\n        {props.comment_info.count > 0 && showViewReplies === false ? (\n          <div className=\"reply_form\">\n            <button onClick={handleViewRepliesClicked}>\n              View {props.comment_info.count} replies...\n            </button>\n          </div>\n        ) : null}\n\n        {showViewReplies ? (\n          <ReplyComments\n            comment_id={props.comment_info.comment_id}\n            updateComments={props.updateComments}\n            setShowViewReplies={setShowViewReplies}\n            newReply={newReply}\n          />\n        ) : null}\n\n        {showViewReplies ? (\n          <button onClick={handleHideRepliesClicked}>Hide replies</button>\n        ) : null}\n      </div>\n    </div>\n  );\n}\n","import React, { useState } from 'react';\nimport Comment from './comment/Comment';\nimport './Comments.css';\nimport axios from 'axios';\nimport TextField from '@material-ui/core/TextField';\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles((theme) => ({\n  margin: {\n    width: '70%',\n    marginBottom: '10px',\n  },\n  textField: {\n    width: '30ch',\n    backgroundColor: 'white',\n  },\n}));\n\nexport default function Comments(props) {\n  const [comment_input, set_comment_input] = useState('');\n  const classes = useStyles();\n\n  const comments = props.comments_list.map((comment) => {\n    return (\n      <Comment\n        key={comment.comment_id}\n        updateComments={props.updateComments}\n        updateReplies={props.updateReplies}\n        comment_info={comment}\n      />\n    );\n  });\n\n  const handlePostClick = (e) => {\n    e.preventDefault();\n    postComments(comment_input);\n  };\n\n  const sendCommentNotification = () => {\n    axios({\n      url: 'http://localhost:5000/send_notification',\n      params: {\n        uploader_id: props.uploader_id,\n        notification: 'comment',\n        image_id: props.image_id,\n      },\n    }).then((response) => {\n      console.log(response);\n    });\n  };\n\n  const postComments = (comment_input) => {\n    console.log(`imageid=${props.image_id}`);\n\n    const updateCommentRecommendation = () => {\n      axios({\n        method: 'GET',\n        url: 'http://localhost:5000/update_comment_recommendation',\n        params: { image_id: props.image_id },\n      }).then((res) => {\n        console.log(res);\n      });\n    };\n\n    axios({\n      method: 'POST',\n      url: 'http://localhost:5000/post_comment_to_image',\n      params: { comment: comment_input, image_id: props.image_id },\n    }).then((response) => {\n      console.log(response);\n      if (response.data.result) {\n        props.updateComments(props.comments_list.concat(comment_input));\n        set_comment_input('');\n        sendCommentNotification();\n        updateCommentRecommendation();\n      }\n    });\n  };\n\n  return (\n    <React.Fragment>\n      {localStorage.getItem('userLoggedIn') ? (\n        <form onSubmit={handlePostClick}>\n          <div className={classes.margin}>\n            <TextField\n              classes={{ root: classes.textField }}\n              id=\"outlined-multiline-flexible\"\n              label=\"Type a comment\"\n              multiline\n              rowsMax={4}\n              value={comment_input}\n              onChange={(e) => set_comment_input(e.target.value)}\n              onKeyPress={(e) => {\n                if (e.key === 'Enter') {\n                  handlePostClick(e);\n                }\n              }}\n              variant=\"outlined\"\n              size=\"small\"\n              fullWidth\n            />\n          </div>\n        </form>\n      ) : null}\n      <div className=\"comments-container\">{comments}</div>\n    </React.Fragment>\n  );\n}\n","import React from 'react';\nimport './CollectionFolder.css';\nimport Button from '@material-ui/core/Button';\n\nexport default function CollectionFolder(props) {\n  console.log(props.collectionInfo);\n\n  const handleCollectionPicked = () => {\n    props.addPhotoToCollections(props.collectionInfo.collection_id);\n  };\n\n  return (\n    <React.Fragment>\n      <div className=\"collection_folder\">\n        <Button variant=\"contained\" onClick={handleCollectionPicked}>\n          {props.collectionInfo.collection_name}\n        </Button>\n      </div>\n    </React.Fragment>\n  );\n}\n","import React from 'react';\nimport ReactDom from 'react-dom';\nimport './BookmarkConfirmationModal.css';\n\nexport default function BookmarkConfirmationModal(props) {\n  console.log('tesst');\n  if (!props.openModal) {\n    return null;\n  } else {\n    return ReactDom.createPortal(\n      <React.Fragment>\n        <div className=\"bookmark-confirmation-overlay\" />\n        <div\n          className=\"bookmark-confirmation-modal\"\n          onClick={(e) => {\n            e.stopPropagation();\n          }}\n        >\n          <h3>Photo has successfully been added to this collection!</h3>\n        </div>\n      </React.Fragment>,\n      document.getElementById('confirmationPortal2')\n    );\n  }\n}\n","import React, { useState, useEffect } from 'react';\nimport ReactDom from 'react-dom';\nimport './BookmarkModal.css';\n\nimport Button from '@material-ui/core/Button';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\n\nimport axios from 'axios';\n\nimport CollectionFolder from './collectionFolder/CollectionFolder';\nimport BookmarkConfirmationModal from './BookmarkConfirmationModal/BookmarkConfirmationModal';\n\nexport default function BookmarkModal(props) {\n  const [\n    bookmarkConfirmationModalOpen,\n    setBookmarkConfirmationModalOpen,\n  ] = useState(false);\n  const [modalCollectionName, setModalCollectionName] = useState(null);\n  const [enteredCollection, setEnteredCollection] = useState('');\n\n  const [usersCollections, setUsersCollections] = useState([]);\n\n  const [showCreateCollectionButton, setShowCreateCollectionButton] = useState(\n    true\n  );\n  const [privateCollection, setPrivateCollection] = useState(0);\n  const [loading, setLoading] = useState(true);\n  const [hasCollections, setHasCollections] = useState(false);\n\n  useEffect(() => {\n    const getUsersCollections = () => {\n      const userID = localStorage.getItem('userID');\n      axios({\n        method: 'GET',\n        url: 'http://localhost:5000/get_users_collection',\n        params: {\n          user_id: userID,\n          batch_size: 20,\n        },\n      }).then((response) => {\n        if (response.data.result !== false) {\n          setUsersCollections(response.data.result);\n          setHasCollections(true);\n        }\n        setLoading(false);\n      });\n    };\n    getUsersCollections();\n  }, []);\n\n  const addPhotoToCollections = (col_id) => {\n    axios({\n      method: 'POST',\n      url: 'http://localhost:5000/add_photo_to_collection',\n      params: {\n        collection_id: col_id,\n        image_id: props.photoId,\n      },\n    }).then((response) => {\n      console.log(response.data.result);\n      if (response.data.result) {\n        const collection = usersCollections.filter(\n          (collection) => collection.collection_id === col_id\n        );\n\n        setModalCollectionName(collection.collection_name);\n        setBookmarkConfirmationModalOpen(true);\n      }\n    });\n  };\n\n  const handleEnteredCollection = (e) => {\n    e.preventDefault();\n    const createCollections = () => {\n      axios({\n        method: 'POST',\n        url: 'http://localhost:5000/create_collection',\n        params: {\n          collection_name: enteredCollection,\n          private: privateCollection,\n        },\n      }).then((response) => {\n        if (response.data.result) {\n          addPhotoToCollections(response.data.result);\n        }\n      });\n    };\n    createCollections();\n  };\n\n  if (!props.openModal) {\n    return null;\n  } else {\n    return ReactDom.createPortal(\n      <React.Fragment>\n        <div className=\"overlayStyles\" />\n        <div\n          className=\"bookmarkModal\"\n          onClick={(e) => {\n            e.stopPropagation();\n          }}\n        >\n          <h2>Add to Collection</h2>\n\n          {showCreateCollectionButton ? (\n            <Button\n              variant=\"outlined\"\n              color=\"primary\"\n              onClick={() => {\n                setShowCreateCollectionButton(false);\n              }}\n            >\n              Create a new collection\n            </Button>\n          ) : null}\n\n          {showCreateCollectionButton ? (\n            <div className=\"collection-folders\">\n              {loading && 'Loading...'}\n              {!hasCollections && 'You have not created any collections yet'}\n              {usersCollections.map((collection) => {\n                return (\n                  <CollectionFolder\n                    key={collection.collection_id}\n                    collectionInfo={collection}\n                    photoId={props.photoId}\n                    addPhotoToCollections={addPhotoToCollections}\n                  />\n                );\n              })}\n            </div>\n          ) : null}\n\n          {!showCreateCollectionButton ? (\n            <div className=\"enteredCollection\">\n              <form onSubmit={handleEnteredCollection}>\n                <div>\n                  <input\n                    type=\"reply\"\n                    onChange={(e) => setEnteredCollection(e.target.value)}\n                  />\n                </div>\n                <div>\n                  <FormControlLabel\n                    control={\n                      <Checkbox\n                        checked={privateCollection}\n                        onChange={() => {\n                          if (privateCollection === true) {\n                            setPrivateCollection(0);\n                          } else {\n                            setPrivateCollection(1);\n                          }\n                        }}\n                        name=\"privateCheckbox\"\n                        color=\"primary\"\n                      />\n                    }\n                    label=\"Private\"\n                  />\n                </div>\n                <Button variant=\"contained\" color=\"primary\" type=\"submit\">\n                  Create collection\n                </Button>\n              </form>\n\n              <Button\n                variant=\"contained\"\n                color=\"primary\"\n                onClick={() => {\n                  setShowCreateCollectionButton(true);\n                }}\n              >\n                Cancel\n              </Button>\n            </div>\n          ) : null}\n        </div>\n\n        <div\n          onClick={() => {\n            setBookmarkConfirmationModalOpen(false);\n          }}\n        >\n          {bookmarkConfirmationModalOpen ? (\n            <BookmarkConfirmationModal\n              openModal={true}\n              photoID={props.photoId}\n              modalCollectionName={modalCollectionName}\n            />\n          ) : null}\n        </div>\n      </React.Fragment>,\n      document.getElementById('confirmationPortal')\n    );\n  }\n}\n","import ReactDom from 'react-dom';\nimport React, { useState, useEffect, useRef } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport './PostModal.css';\nimport '../../../pages/PostInfo/PostInfo.css';\nimport FollowButton from '../../follow/followButton';\nimport Likes from '../../likes/Likes';\nimport Comments from '../../comments/Comments';\nimport axios from 'axios';\nimport Button from '@material-ui/core/Button';\nimport IconButton from '@material-ui/core/IconButton';\nimport BookmarkIcon from '@material-ui/icons/Bookmark';\nimport BookmarkModal from '../BookmarkModal/BookmarkModal';\n\nexport default function PostModal(props) {\n  const [username, setUsername] = useState(props.uploader);\n  const [email, setEmail] = useState('');\n  const [comments, setComments] = useState([]);\n  const [addedToCart, setAddedToCart] = useState(false);\n  const [tags, setTags] = useState([]);\n  const [commentUpdated, updateComments] = useState('');\n  const [bookmarkModalIsOpen, setBookmarkModalIsOpen] = useState(false);\n  const [relatedImages, setRelatedImages] = useState([]);\n  const [relatedImagesLoading, setRelatedImagesLoading] = useState(true);\n  const [hasRelatedImages, setHasRelatedImages] = useState(true);\n  const cancelAxiosRequest = useRef();\n  const { imageID } = props;\n  const history = useHistory();\n\n  useEffect(() => {\n    axios({\n      url: 'http://localhost:5000/get_user_username',\n      params: { user_id: props.uploader },\n    }).then((response) => {\n      if (response.data.result) {\n        setUsername(response.data.result);\n      }\n    });\n\n    axios({\n      url: 'http://localhost:5000/item_is_in_cart',\n      params: { image_id: imageID },\n    }).then((response) => {\n      if (response.data.result) {\n        setAddedToCart(true);\n      }\n    });\n\n    axios({\n      url: 'http://localhost:5000/get_user_email',\n      params: { user_id: props.uploader },\n    }).then((response) => {\n      if (response.data.result) {\n        setEmail(response.data.result);\n      }\n    });\n\n    axios({\n      url: 'http://localhost:5000/get_related_images',\n      params: { image_id: imageID },\n    }).then((response) => {\n      console.log('~~~~~~~~~~~~Get Related Images~~~~~~~~~~~');\n      console.log(response);\n      if (response.data.result) {\n        setRelatedImages(response.data.result);\n        setHasRelatedImages(true);\n      } else {\n        setHasRelatedImages(false);\n      }\n      setRelatedImagesLoading(false);\n    });\n    // eslint-disable-next-line\n  }, []);\n\n  useEffect(() => {\n    let mounted = true;\n\n    const fetchTags = (id) => {\n      axios({\n        method: 'GET',\n        url: 'http://localhost:5000/get_tags',\n        params: { image_id: id },\n        cancelToken: new axios.CancelToken(\n          (c) => (cancelAxiosRequest.current = c)\n        ),\n      }).then((res) => {\n        if (res.data.result !== false && mounted) {\n          setTags(res.data.result);\n        } else if (mounted) {\n          setTags([]);\n        }\n      });\n    };\n\n    const fetchComments = (id) => {\n      axios({\n        method: 'GET',\n        url: 'http://localhost:5000/get_comments_to_image',\n        params: { image_id: id, batch_size: 20 },\n        cancelToken: new axios.CancelToken(\n          (c) => (cancelAxiosRequest.current = c)\n        ),\n      }).then((res) => {\n        if (res.data.result !== false && mounted) {\n          setComments(res.data.result);\n        } else if (mounted) {\n          setComments([]);\n        }\n        fetchTags(id);\n      });\n    };\n    fetchComments(imageID);\n\n    return () => {\n      cancelAxiosRequest.current();\n      mounted = false;\n    };\n  }, [commentUpdated, imageID]);\n\n  const apiAddPurchase = (imageID) => {\n    axios({\n      method: 'POST',\n      url: 'http://localhost:5000/add_purchase',\n      params: {\n        save_for_later: 0,\n        purchased: 0,\n        image_id: String(imageID),\n      },\n    }).then((response) => {\n      if (response.data.result !== false) {\n        setAddedToCart(true);\n      } else {\n        setAddedToCart(false);\n      }\n    });\n  };\n\n  const apiRemovePurchase = (imageID) => {\n    axios({\n      method: 'POST',\n      url: 'http://localhost:5000/delete_item_from_cart',\n      params: {\n        image_id: String(imageID),\n      },\n    }).then((response) => {\n      if (response.data.result !== false) {\n        setAddedToCart(false);\n      } else {\n        setAddedToCart(true);\n      }\n    });\n  };\n\n  const handleBuyButton = () => {\n    if (addedToCart) {\n      apiRemovePurchase(props.imageID);\n    } else {\n      apiAddPurchase(props.imageID);\n    }\n  };\n\n  const handleBookmarkClicked = () => {\n    setBookmarkModalIsOpen(true);\n  };\n\n  if (!props.openModal) {\n    return null;\n  } else {\n    return ReactDom.createPortal(\n      <React.Fragment>\n        <div className=\"post-modal-overlay\" />\n        <div\n          className=\"post-modal\"\n          onClick={(e) => {\n            e.stopPropagation();\n          }}\n        >\n          <div className=\"postWrapper\">\n            <div className=\"postInfo\">\n              <div className=\"username\">\n                {localStorage.getItem('userLoggedIn') ? (\n                  <React.Fragment>\n                    {parseInt(localStorage.getItem('userID')) !==\n                    props.uploader ? (\n                      <FollowButton uploader={props.uploader} />\n                    ) : null}\n                    <div className=\"bookmark-wrapper\">\n                      <IconButton\n                        variant=\"contained\"\n                        onClick={handleBookmarkClicked}\n                      >\n                        <BookmarkIcon />\n                      </IconButton>\n                    </div>\n                  </React.Fragment>\n                ) : null}\n                <Likes\n                  setNumLikes={props.setNumLikes}\n                  image_id={props.imageID}\n                  uploader_id={props.uploader}\n                />\n              </div>\n            </div>\n            <div className=\"postImage\">\n              <div className=\"main-img\">\n                <img\n                  src={`data:image/jpg;base64,${props.url}`}\n                  alt={props.caption}\n                />\n\n                <div className=\"recImages-nested\">\n                  <h1 className=\"roboto\"> Related Photos:</h1>\n\n                  {relatedImages.length > 0 ? (\n                    relatedImages.map((images, index) => {\n                      return (\n                        <div key={index} className=\"recImage\">\n                          <img\n                            onClick={() => {\n                              props.setRelatedImagesClicked(images);\n                            }}\n                            src={`data:image/jpg;base64,${images.img}`}\n                            alt={images.caption}\n                          />\n                        </div>\n                      );\n                    })\n                  ) : (\n                    <React.Fragment>\n                      <h1>\n                        {!hasRelatedImages &&\n                          'No related images could be found'}\n                      </h1>\n                      <div\n                        style={{\n                          marginTop: '20vh',\n                          marginRight: '20vh',\n                          marginLeft: '20vh',\n                        }}\n                      ></div>\n                    </React.Fragment>\n                  )}\n                </div>\n              </div>\n\n              <h2 style={{ textAlign: 'center' }}>\n                {relatedImagesLoading && 'Loading...'}\n              </h2>\n            </div>\n            <div className=\"postFeed-nested\">\n              <div className=\"title\">\n                <h1>{props.title}</h1>\n                <div className=\"username-wrapper\">\n                  <Button\n                    variant=\"outlined\"\n                    onClick={() => {\n                      history.push({\n                        pathname: `/profile/${props.uploader}`,\n                        state: { uploaderID: props.uploader },\n                      });\n                    }}\n                  >\n                    @{username}\n                  </Button>\n                </div>\n                <p\n                  className=\"roboto\"\n                  style={{ fontSize: '70%', textAlign: 'center' }}\n                >\n                  email: {email}\n                </p>\n              </div>\n\n              <h2 className=\"roboto\">{props.caption}</h2>\n              <div className=\"postTags\">\n                <h3>\n                  Tags:{' '}\n                  {tags.length < 1 ? 'this post has no tags to display' : null}\n                </h3>\n                <div className=\"flexbox-tags\">\n                  {tags.length > 0\n                    ? tags.map((tag, index) => {\n                        return (\n                          <Button key={index} variant=\"contained\">\n                            #{tag}\n                          </Button>\n                        );\n                      })\n                    : null}\n                </div>\n              </div>\n              <div className=\"postPrice\">\n                <h2 className=\"roboto\">Price: ${props.price}</h2>\n                {localStorage.getItem('userLoggedIn') ? (\n                  parseInt(localStorage.getItem('userID')) !==\n                  props.uploader ? (\n                    addedToCart ? (\n                      <Button\n                        variant=\"contained\"\n                        color=\"primary\"\n                        onClick={handleBuyButton}\n                      >\n                        Added to Cart\n                      </Button>\n                    ) : (\n                      <Button variant=\"contained\" onClick={handleBuyButton}>\n                        Add to Cart\n                      </Button>\n                    )\n                  ) : null\n                ) : null}\n              </div>\n              <div className=\"postComments\">\n                <h2 className=\"roboto\">Comments:</h2>\n                <Comments\n                  image_id={props.imageID}\n                  comments_list={comments}\n                  updateComments={updateComments}\n                  uploader_id={props.uploader}\n                />\n              </div>\n            </div>\n          </div>\n\n          <div onClick={() => setBookmarkModalIsOpen(false)}>\n            {bookmarkModalIsOpen ? (\n              <BookmarkModal\n                openModal={true}\n                setOpenModal={setBookmarkModalIsOpen}\n                photoId={props.imageID}\n              ></BookmarkModal>\n            ) : null}\n          </div>\n        </div>\n      </React.Fragment>,\n\n      document.getElementById('postPortal')\n    );\n  }\n}\n","import React from 'react';\nimport ReactDom from 'react-dom';\nimport './AddedToCartModal.css';\n\nexport default function AddedToCartModal(props) {\n  if (!props.openModal) {\n    return null;\n  } else {\n    return ReactDom.createPortal(\n      <React.Fragment>\n        <div className=\"cart-confirmation-overlay\" />\n        <div\n          className=\"cart-confirmation-modal\"\n          onClick={(e) => {\n            e.stopPropagation();\n          }}\n        >\n          {props.cartStatus === 'added' ? (\n            <h3>Photo has been added to the cart</h3>\n          ) : (\n            <h3>Photo has been removed from the cart</h3>\n          )}\n        </div>\n      </React.Fragment>,\n      document.getElementById('confirmationPortal3')\n    );\n  }\n}\n","import React, { useState, useEffect } from 'react';\nimport TextField from '@material-ui/core/TextField';\n\nexport default function TitleField(props) {\n  const [text, setText] = useState(props.oldTitle);\n  const [errorText, setErrorText] = useState('');\n  const [errorValue, setErrorValue] = useState(false);\n  const [firstRender, setFirstRender] = useState(true);\n\n  const { saveButtonClicked } = props;\n\n  useEffect(() => {\n    setFirstRender(false);\n    props.setTitleValidated([false, text]);\n    // eslint-disable-next-line\n  }, []);\n\n  useEffect(() => {\n    if (firstRender === false) {\n      const result = handleTitleInput(text);\n      props.setTitleValidated([result, text]);\n    }\n    // eslint-disable-next-line\n  }, [saveButtonClicked]);\n\n  const handleTitleInput = (text) => {\n    if (text.length > 0 && text.length < 50) {\n      setErrorValue(false);\n      return true;\n    } else {\n      setErrorValue(true);\n      setErrorText('A title must be included');\n      return false;\n    }\n  };\n\n  return (\n    <React.Fragment>\n      <h3>Title</h3>\n      <div>\n        <TextField\n          required\n          error={errorValue}\n          helperText={errorText}\n          onChange={(e) => {\n            setText(e.target.value);\n            handleTitleInput(e.target.value);\n          }}\n          id=\"outlined-required\"\n          label=\"Required\"\n          defaultValue={props.oldTitle}\n          variant=\"outlined\"\n        />\n      </div>\n    </React.Fragment>\n  );\n}\n","import React, { useState, useEffect } from 'react';\nimport TextField from '@material-ui/core/TextField';\n\nexport default function CaptionField(props) {\n  const [text, setText] = useState(props.oldCaption);\n  const [errorText, setErrorText] = useState('');\n  const [errorValue, setErrorValue] = useState(false);\n  const [firstRender, setFirstRender] = useState(true);\n\n  const { saveButtonClicked } = props;\n\n  useEffect(() => {\n    setFirstRender(false);\n    props.setCaptionValidated([false, text]);\n    // eslint-disable-next-line\n  }, []);\n\n  useEffect(() => {\n    if (firstRender === false) {\n      const result = handleCaptionInput(text);\n      props.setCaptionValidated([result, text]);\n    }\n    // eslint-disable-next-line\n  }, [saveButtonClicked]);\n\n  const handleCaptionInput = (text) => {\n    if (text.length < 50) {\n      setErrorValue(false);\n      return true;\n    } else {\n      setErrorValue(true);\n      setErrorText('Caption too long');\n      return false;\n    }\n  };\n\n  return (\n    <React.Fragment>\n      <h3>Caption</h3>\n      <div>\n        <TextField\n          error={errorValue}\n          helperText={errorText}\n          onChange={(e) => {\n            setText(e.target.value);\n            handleCaptionInput(e.target.value);\n          }}\n          id=\"outlined-required\"\n          defaultValue={props.oldCaption}\n          variant=\"outlined\"\n        />\n      </div>\n    </React.Fragment>\n  );\n}\n","import React, { useState, useEffect, useRef } from 'react';\nimport TextField from '@material-ui/core/TextField';\n\nexport default function TagsField(props) {\n  const [text, setText] = useState(props.oldTags);\n  const [errorText, setErrorText] = useState('');\n  const [errorValue, setErrorValue] = useState(false);\n  const [firstRender, setFirstRender] = useState(true);\n  const textFieldRef = useRef();\n  const { saveButtonClicked } = props;\n\n  useEffect(() => {\n    setFirstRender(false);\n    props.setTagsValidated([false, text]);\n    // eslint-disable-next-line\n  }, []);\n\n  useEffect(() => {\n    setText(props.oldTags);\n    props.setTagsValidated([false, props.oldTags]);\n    // eslint-disable-next-line\n  }, [props.oldTags]);\n\n  useEffect(() => {\n    if (firstRender === false) {\n      const result = handleTagsInput(text);\n      props.setTagsValidated([result, text]);\n    }\n    // eslint-disable-next-line\n  }, [saveButtonClicked]);\n\n  const handleTagsInput = (text) => {\n    if (text.length < 100) {\n      setErrorValue(false);\n      return true;\n    } else {\n      setErrorValue(true);\n      setErrorText('Too many tags');\n      return false;\n    }\n  };\n\n  return (\n    <React.Fragment>\n      <h3>Tags</h3>\n      <div>\n        <TextField\n          ref={textFieldRef}\n          error={errorValue}\n          helperText={errorText}\n          onChange={(e) => {\n            setText(e.target.value);\n            handleTagsInput(e.target.value);\n          }}\n          value={text}\n          id=\"outlined-required\"\n          label=\"Tags must be comma seperated\"\n          defaultValue={props.oldTags.toString()}\n          variant=\"outlined\"\n          InputLabelProps={{\n            shrink: true,\n          }}\n        />\n      </div>\n    </React.Fragment>\n  );\n}\n","import React, { useState, useEffect } from 'react';\nimport TextField from '@material-ui/core/TextField';\n\nexport default function PriceField(props) {\n  const [text, setText] = useState(props.oldPrice);\n  const [errorText, setErrorText] = useState('');\n  const [errorValue, setErrorValue] = useState(false);\n  const [firstRender, setFirstRender] = useState(true);\n\n  const { saveButtonClicked } = props;\n\n  useEffect(() => {\n    setFirstRender(false);\n    props.setPriceValidated([false, text]);\n    // eslint-disable-next-line\n  }, []);\n\n  useEffect(() => {\n    if (firstRender === false) {\n      const result = handlePriceInput(text);\n      console.log(text);\n      props.setPriceValidated([result, text]);\n    }\n    // eslint-disable-next-line\n  }, [saveButtonClicked]);\n\n  const handlePriceInput = (text) => {\n    if (parseFloat(text) > 0) {\n      setErrorValue(false);\n      return true;\n    } else {\n      setErrorValue(true);\n      setErrorText('A price must be included');\n      return false;\n    }\n  };\n\n  return (\n    <React.Fragment>\n      <h3>Price</h3>\n      <div>\n        <TextField\n          required\n          error={errorValue}\n          helperText={errorText}\n          onChange={(e) => {\n            setText(e.target.value);\n            handlePriceInput(e.target.value);\n          }}\n          id=\"outlined-required\"\n          label=\"Required\"\n          type=\"number\"\n          defaultValue={parseInt(props.oldPrice)}\n          variant=\"outlined\"\n        />\n      </div>\n    </React.Fragment>\n  );\n}\n","import React, { useState, useEffect } from 'react';\nimport ReactDom from 'react-dom';\nimport Button from '@material-ui/core/Button';\nimport axios from 'axios';\nimport { useHistory } from 'react-router-dom';\nimport './EditPostModal.css';\n\nimport TitleField from './textfields/TitleField';\nimport CaptionField from './textfields/CaptionField';\nimport TagsField from './textfields/TagsField';\nimport PriceField from './textfields/PriceField';\n\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    '& .MuiTextField-root': {\n      margin: theme.spacing(1),\n      width: 'ch',\n    },\n  },\n}));\n\nexport default function EditPostPage(props) {\n  const [saveButtonClicked, setSaveButtonClicked] = useState(false);\n  const [titleValidated, setTitleValidated] = useState([false, props.title]);\n  const [captionValidated, setCaptionValidated] = useState([\n    false,\n    props.caption,\n  ]);\n  const [priceValidated, setPriceValidated] = useState([false, props.price]);\n  const [tagsValidated, setTagsValidated] = useState([false, []]);\n  const [oldTags, setOldTags] = useState([]);\n\n  useEffect(() => {\n    axios({\n      url: 'http://localhost:5000/get_tags',\n      params: { image_id: props.imageID },\n    }).then((res) => {\n      console.log(res);\n      if (res.data.result) {\n        setOldTags(res.data.result);\n        setTagsValidated([false, res.data.result]);\n      }\n    });\n    // eslint-disable-next-line\n  }, []);\n\n  // const { match } = props;\n  const history = useHistory();\n\n  const classes = useStyles();\n\n  async function edit_post() {\n    // event.preventDefault();\n\n    var response = await axios.get('http://localhost:5000/edit_post', {\n      params: {\n        image_id: props.imageID,\n        title: titleValidated[1],\n        price: priceValidated[1],\n        caption: captionValidated[1],\n        tags: tagsValidated[1].toString(),\n      },\n    });\n    return response;\n  }\n\n  useEffect(() => {\n    console.log(titleValidated);\n    console.log(captionValidated);\n    console.log(priceValidated);\n    console.log(tagsValidated);\n\n    if (\n      titleValidated[0] &&\n      captionValidated[0] &&\n      priceValidated[0] &&\n      tagsValidated[0]\n    ) {\n      console.log('APPROVED');\n      const response = edit_post();\n      response.then((res) => {\n        console.log(res);\n        if (res.data.result) {\n          history.go(0);\n        }\n      });\n    }\n    // eslint-disable-next-line\n  }, [titleValidated, captionValidated, priceValidated, tagsValidated]);\n\n  const handleSaveButton = () => {\n    setSaveButtonClicked(!saveButtonClicked);\n  };\n\n  if (!props.openModal) {\n    return null;\n  } else {\n    return ReactDom.createPortal(\n      <React.Fragment>\n        <div className=\"overlayStyles\" />\n        <div\n          className=\"editPostModal\"\n          onClick={(e) => {\n            e.stopPropagation();\n          }}\n        >\n          <div className=\"grid-container-editpost\">\n            <div className=\"grid-item-image\">\n              <img\n                src={`data:image/jpg;base64,${props.url}`}\n                alt={props.caption}\n              />\n            </div>\n            <form className={classes.root} noValidate autoComplete=\"off\">\n              <div className=\"edit-post-details\">\n                <TitleField\n                  saveButtonClicked={saveButtonClicked}\n                  setTitleValidated={setTitleValidated}\n                  oldTitle={props.title}\n                />\n                <CaptionField\n                  saveButtonClicked={saveButtonClicked}\n                  setCaptionValidated={setCaptionValidated}\n                  oldCaption={props.caption}\n                />\n                <TagsField\n                  saveButtonClicked={saveButtonClicked}\n                  setTagsValidated={setTagsValidated}\n                  oldTags={oldTags}\n                />\n                <PriceField\n                  saveButtonClicked={saveButtonClicked}\n                  setPriceValidated={setPriceValidated}\n                  oldPrice={props.price}\n                />\n\n                <Button\n                  variant=\"contained\"\n                  color=\"primary\"\n                  size=\"large\"\n                  onClick={handleSaveButton}\n                >\n                  SAVE\n                </Button>\n                <Button\n                  variant=\"contained\"\n                  color=\"primary\"\n                  size=\"large\"\n                  onClick={() => {\n                    props.setOpenModal(false);\n                  }}\n                >\n                  Cancel\n                </Button>\n              </div>\n            </form>\n            {/* <form className=\"grid-item-form\" onSubmit={edit_post}>\n              <FormGroup controlId=\"title\" bsSize=\"large\">\n                <div>\n                  <FormLabel>Title</FormLabel>\n                </div>\n\n                <FormControl\n                  Type=\"title\"\n                  value={title}\n                  onChange={(e) => set_title(e.target.value)}\n                  defaultValue={\"HELLLLOOOOO\"}\n                />\n              </FormGroup>\n\n              <FormGroup controlId=\"price\" bsSize=\"large\">\n                <div>\n                  <FormLabel>Price</FormLabel>\n                </div>\n\n                <FormControl\n                  Type=\"price\"\n                  value={price}\n                  onChange={(e) => set_price(e.target.value)}\n                />\n              </FormGroup>\n\n              <FormGroup controlId=\"caption\" bsSize=\"large\">\n                <div>\n                  <FormLabel>Caption</FormLabel>\n                </div>\n\n                <FormControl\n                  Type=\"caption\"\n                  value={caption}\n                  onChange={(e) => set_caption(e.target.value)}\n                />\n              </FormGroup>\n\n              <FormGroup controlId=\"tags\" bsSize=\"large\">\n                <div>\n                  <FormLabel>tags</FormLabel>\n                </div>\n\n                <FormControl\n                  Type=\"tags\"\n                  value={tags}\n                  onChange={(e) => set_tags(e.target.value)}\n                />\n              </FormGroup>\n\n              <div>\n                <Button\n                  variant=\"primary\"\n                  disabled={\n                    !validate_caption() ||\n                    !validate_title() ||\n                    !validate_price() ||\n                    !validate_tags()\n                  }\n                  type=\"submit\"\n                >\n                  Submit\n                </Button>\n              </div>\n\n              <Button\n                onClick={() => {\n                  history.push(\"/profile\");\n                }}\n              >\n                Cancel\n              </Button>\n            </form> */}\n            {/* <div className=\"grid-item-old-values\">\n              <h1>Current title: {props.title}</h1>\n              <h1>Current Caption: {props.caption}</h1>\n              <h1>Current Price: ${props.price}</h1>\n              <h1>Current Tags: ${props.tags}</h1>\n            </div> */}\n          </div>\n        </div>\n      </React.Fragment>,\n      document.getElementById('editPostPortal')\n    );\n  }\n}\n","import React, { Component } from 'react';\nimport axios from 'axios';\nimport './ImageCard.css';\nimport IconButton from '@material-ui/core/IconButton';\nimport { withStyles } from '@material-ui/core';\nimport FavoriteIcon from '@material-ui/icons/Favorite';\nimport BookmarkIcon from '@material-ui/icons/Bookmark';\nimport ShoppingCartIcon from '@material-ui/icons/ShoppingCart';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport EditIcon from '@material-ui/icons/Edit';\nimport PostModal from '../../Modals/PostModal/PostModal';\nimport AddedToCartModal from '../../Modals/AddedToCartModal/AddedToCartModal';\nimport EditPostModal from '../../Modals/EditPostModal/EditPostModal';\n\nconst deletePostRequest = async function (imageID) {\n  const response = await axios.get('http://localhost:5000/delete_image_post', {\n    params: { image_id: String(imageID) }, //user_id: 1\n  });\n\n  return response;\n};\n\n// matrial-ui component style override\nconst styles = {\n  root: {\n    position: 'absolute',\n    bottom: '0%',\n    left: '50%',\n    color: 'rgba(255, 255, 255,1)',\n    height: '15%',\n    width: '15%',\n  },\n  iconSize: {\n    width: '60%',\n    height: '60%',\n  },\n  likeSize: {\n    width: '80%',\n    height: '80%',\n  },\n  like: {\n    left: '5%',\n  },\n  bookmark: {\n    left: '60%',\n  },\n  buy: {\n    left: '80%',\n  },\n  delete: {\n    left: '4%',\n    top: '10%',\n    width: '16%',\n    height: '20%',\n    '&:hover': {\n      backgroundColor: 'rgba(180, 65, 65, 0.82)',\n    },\n  },\n  edit: {\n    left: '82%',\n    top: '10%',\n    width: '14%',\n    height: '18%',\n    '&:hover': {\n      backgroundColor: 'rgba(6, 149, 193, 0.7)',\n    },\n  },\n};\n\nclass ImageCard extends Component {\n  constructor(props) {\n    super(props);\n\n    // CreateRef is used to access the DOM\n    // after accessing the DOM, we can get the height of each ImageCard\n    this.imageRef = React.createRef();\n    this.setOpenPostModal = this.setOpenPostModal.bind(this);\n    this.setOpenEditPostModal = this.setOpenEditPostModal.bind(this);\n    this.setAddedToCartModal = this.setAddedToCartModal.bind(this);\n    this.setCartStatus = this.setCartStatus.bind(this);\n    this.setNumLikesDummy = this.setNumLikesDummy.bind(this);\n    this.setNumLikes = this.setNumLikes.bind(this);\n\n    this.setRelatedImagesClicked = this.setRelatedImagesClicked.bind(this);\n\n    this.state = {\n      openPostModal: false,\n      openEditPostModal: false,\n      openRelatedPostModal: false,\n      openCartAddedModal: false,\n      cartStatus: '',\n      spans: 0,\n      animateImages: '',\n      numLikes: this.props.image.num_likes,\n      relatedImageClicked: {},\n    };\n  }\n\n  componentDidMount() {\n    this.imageRef.current.addEventListener('load', this.setSpans);\n    setTimeout(() => {\n      this.setState({\n        animateImages: 'image-container-animate',\n      });\n    }, 100);\n  }\n\n  setSpans = () => {\n    if (this.imageRef.current != null) {\n      const height = this.imageRef.current.clientHeight;\n      const spansRows = Math.ceil(height / 10);\n      this.setState({ spans: spansRows });\n    }\n  };\n\n  setAddedToCartModal = (newState) => {\n    this.setState({ openCartAddedModal: newState });\n  };\n\n  setCartStatus = (newState) => {\n    this.setState({ cartStatus: newState });\n  };\n\n  setOpenPostModal = (newState) => {\n    this.setState({ openPostModal: newState });\n  };\n\n  setOpenEditPostModal = (newState) => {\n    this.setState({ openEditPostModal: newState });\n  };\n\n  setNumLikes = (newState) => {\n    this.setState({ numLikes: newState });\n  };\n\n  setNumLikesDummy = (newState) => {\n    console.log('dummy like for related image');\n  };\n\n  setRelatedImagesClicked = (newState) => {\n    this.setState({\n      relatedImageClicked: newState,\n      openPostModal: false,\n      openRelatedPostModal: true,\n    });\n  };\n\n  handleImageClicked = (e) => {\n    this.setState({ openPostModal: true });\n  };\n\n  handleLikeClicked = (e) => {\n    e.stopPropagation();\n  };\n\n  handleBookmarkClicked = (e) => {\n    e.stopPropagation();\n    this.props.setOpenBookmarkModal(true);\n    this.props.setPhotoId(parseInt(this.props.image.id));\n  };\n\n  handleBuyClicked = (e) => {\n    e.stopPropagation();\n\n    const apiAddToCart = (imageID, setModal, setCartStatus) => {\n      axios({\n        method: 'POST',\n        url: 'http://localhost:5000/add_purchase',\n        params: {\n          save_for_later: 0,\n          purchased: 0,\n          image_id: String(imageID),\n        },\n      }).then((response) => {\n        if (response.data.result !== false) {\n          setModal(true);\n          setCartStatus('added');\n        }\n      });\n    };\n\n    const apiRemoveFromCart = (imageID, setModal, setCartStatus) => {\n      axios({\n        method: 'POST',\n        url: 'http://localhost:5000/delete_item_from_cart',\n        params: {\n          image_id: String(imageID),\n        },\n      }).then((response) => {\n        if (response.data.result !== false) {\n          setModal(true);\n          setCartStatus('removed');\n        }\n      });\n    };\n\n    axios({\n      url: 'http://localhost:5000/item_is_in_cart',\n      params: { image_id: this.props.image.id },\n    }).then((response) => {\n      if (!response.data.result) {\n        apiAddToCart(\n          this.props.image.id,\n          this.setAddedToCartModal,\n          this.setCartStatus\n        );\n      } else {\n        apiRemoveFromCart(\n          this.props.image.id,\n          this.setAddedToCartModal,\n          this.setCartStatus\n        );\n      }\n    });\n  };\n\n  handleDeleteClicked = (e) => {\n    deletePostRequest(this.props.image.id);\n    e.stopPropagation();\n    window.location.reload();\n  };\n\n  handleEditClicked = (e) => {\n    e.stopPropagation();\n    this.setState({ openEditPostModal: true });\n  };\n\n  render() {\n    document.body.style.overflow = this.state.openPostModal\n      ? 'hidden'\n      : 'unset';\n\n    let component;\n\n    let uploaderID = String(this.props.image.uploader);\n    let userID = localStorage.getItem('userID');\n\n    let deleteButton =\n      uploaderID === userID ? (\n        <IconButton\n          variant=\"contained\"\n          classes={{\n            root: `${this.props.classes.root} ${this.props.classes.delete}`,\n          }}\n          onClick={this.handleDeleteClicked}\n        >\n          <DeleteIcon />\n        </IconButton>\n      ) : null;\n\n    let editButton =\n      uploaderID === userID ? (\n        <IconButton\n          variant=\"contained\"\n          classes={{\n            root: `${this.props.classes.root} ${this.props.classes.edit}`,\n          }}\n          onClick={this.handleEditClicked}\n        >\n          <EditIcon />\n        </IconButton>\n      ) : null;\n\n    component = (\n      <React.Fragment>\n        {/* // <div style={{ gridRowEnd: `span ${this.state.spans}` }}> */}\n        <div\n          className={`image-container ${this.state.animateImages}`}\n          onClick={this.handleImageClicked}\n        >\n          <div className=\"icon-bar\"></div>\n          <img\n            className=\"image-size\"\n            ref={this.imageRef}\n            src={`data:image/jpg;base64,${this.props.image.img}`}\n            alt={this.props.caption}\n          />\n          <IconButton\n            classes={{\n              root: `${this.props.classes.root} ${this.props.classes.like}`,\n            }}\n            variant=\"contained\"\n            onClick={this.handleLikeClicked}\n          >\n            <FavoriteIcon classes={{ root: this.props.classes.likeSize }} />\n            <div className=\"num-likes\">{this.state.numLikes}</div>\n          </IconButton>\n          {this.props.userLoggedIn ? (\n            <React.Fragment>\n              {!this.props.displayMyProfile ? (\n                <React.Fragment>\n                  <IconButton\n                    classes={{\n                      root: `${this.props.classes.root} ${this.props.classes.bookmark}`,\n                    }}\n                    variant=\"contained\"\n                    onClick={this.handleBookmarkClicked}\n                  >\n                    <BookmarkIcon />\n                  </IconButton>\n\n                  {parseInt(localStorage.getItem('userID')) !==\n                  this.props.image.uploader ? (\n                    <IconButton\n                      classes={{\n                        root: `${this.props.classes.root} ${this.props.classes.buy}`,\n                      }}\n                      variant=\"contained\"\n                      onClick={this.handleBuyClicked}\n                    >\n                      <ShoppingCartIcon />\n                    </IconButton>\n                  ) : null}\n                </React.Fragment>\n              ) : null}\n              {deleteButton}\n              {editButton}\n            </React.Fragment>\n          ) : null}\n        </div>\n        {this.state.openPostModal ? (\n          <div\n            className=\"modal-wrapper\"\n            onClick={() => {\n              this.setState({ openPostModal: false });\n            }}\n          >\n            <PostModal\n              openModal={true}\n              setOpenModal={this.setOpenPostModal}\n              imageID={this.props.image.id}\n              url={this.props.image.img}\n              caption={this.props.image.caption}\n              price={this.props.image.price}\n              title={this.props.image.title}\n              uploader={this.props.image.uploader}\n              setNumLikes={this.setNumLikes}\n              setRelatedImagesClicked={this.setRelatedImagesClicked}\n            />\n          </div>\n        ) : null}\n\n        {this.state.openRelatedPostModal ? (\n          <div\n            className=\"modal-wrapper\"\n            onClick={() => {\n              this.setState({ openRelatedPostModal: false });\n            }}\n          >\n            this.state.relatedImageClicked ?\n            <PostModal\n              openModal={true}\n              setOpenModal={this.setOpenPostModal}\n              imageID={this.state.relatedImageClicked.id}\n              url={this.state.relatedImageClicked.img}\n              caption={this.state.relatedImageClicked.caption}\n              price={this.state.relatedImageClicked.price}\n              title={this.state.relatedImageClicked.title}\n              uploader={this.state.relatedImageClicked.uploader}\n              setNumLikes={this.setNumLikesDummy}\n              setRelatedImagesClicked={this.setRelatedImagesClicked}\n            />\n          </div>\n        ) : null}\n\n        {this.state.openEditPostModal ? (\n          <div\n            className=\"modal-wrapper\"\n            onClick={() => {\n              this.setState({ openEditPostModal: false });\n            }}\n          >\n            <EditPostModal\n              openModal={this.state.openEditPostModal}\n              setOpenModal={this.setOpenEditPostModal}\n              imageID={this.props.image.id}\n              url={this.props.image.img}\n              caption={this.props.image.caption}\n              price={this.props.image.price}\n              title={this.props.image.title}\n              uploader={this.props.image.uploader}\n            />\n          </div>\n        ) : null}\n\n        {this.state.openCartAddedModal ? (\n          <div\n            className=\"modal-wrapper\"\n            onClick={() => {\n              this.setState({ openCartAddedModal: false });\n            }}\n          >\n            <AddedToCartModal\n              openModal={true}\n              cartStatus={this.state.cartStatus}\n            />\n          </div>\n        ) : null}\n      </React.Fragment>\n    );\n\n    return <React.Fragment>{component}</React.Fragment>;\n  }\n}\n\nexport default withStyles(styles)(ImageCard);\n","import React, { useState, useEffect, useRef, useCallback } from 'react';\nimport './feed.css';\nimport axios from 'axios';\nimport ImageCard from './ImageCard/ImageCard';\nimport BookmarkModal from '../Modals/BookmarkModal/BookmarkModal';\n\nconst Feed = (props) => {\n  const [imgs, setImgs] = useState([]);\n  const [modalIsOpen, setModalIsOpen] = useState(false);\n  const [photoIdBookmarked, setPhotoIdBookmarked] = useState(0);\n  const [hasMore, setHasMore] = useState(true);\n  const [loading, setLoading] = useState(false);\n  const [score, setScore] = useState(null);\n  const userLoggedIn = localStorage.getItem('userLoggedIn');\n  const fetchIsCancelled = useRef(false);\n  const cancelAxiosRequest = useRef();\n  const observer = useRef();\n  const lastImageRef = useCallback(\n    (node) => {\n      if (loading) return;\n      if (observer.current) observer.current.disconnect();\n      observer.current = new IntersectionObserver((entries) => {\n        if (entries[0].isIntersecting && hasMore) {\n          setLoading(true);\n          fetchImages(props.query, score);\n        }\n      });\n\n      if (node) observer.current.observe(node);\n    },\n    // eslint-disable-next-line\n    [loading, hasMore, props.query]\n  );\n\n  useEffect(() => {\n    fetchIsCancelled.current = false;\n    setLoading(true);\n\n    setTimeout(() => {\n      fetchImages(props.query, score);\n    }, 150);\n\n    return () => {\n      if (cancelAxiosRequest.current != null) cancelAxiosRequest.current();\n\n      fetchIsCancelled.current = true;\n      setImgs([]);\n      setHasMore(true);\n    };\n    // eslint-disable-next-line\n  }, [props.query]);\n\n  const fetchImages = (term, paramScore) => {\n    if (term === null) {\n      console.log(`called get_global_recommendations with score ${paramScore}`);\n      axios({\n        method: 'GET',\n        url: 'http://localhost:5000/get_global_recommendations',\n        params: { score: paramScore, batch_size: 10 }, //user_id: 1\n        cancelToken: new axios.CancelToken(\n          (c) => (cancelAxiosRequest.current = c)\n        ),\n      })\n        .then((res) => {\n          if (res.data.result !== false && !fetchIsCancelled.current) {\n            setScore(res.data.score);\n            setHasMore(true);\n            setLoading(false);\n            setImgs((prevImgs) => {\n              return [...prevImgs, ...res.data.result];\n            });\n          } else if (!fetchIsCancelled.current) {\n            setLoading(false);\n            setHasMore(false);\n          }\n        })\n        .catch((e) => {\n          if (axios.isCancel(e)) {\n            return;\n          }\n        });\n    } else {\n      axios({\n        method: 'GET',\n        url: 'http://localhost:5000/discovery',\n        params: { query: term, batch_size: 10 }, //user_id: 1\n        cancelToken: new axios.CancelToken(\n          (c) => (cancelAxiosRequest.current = c)\n        ),\n      })\n        .then((res) => {\n          if (res.data.result !== false && !fetchIsCancelled.current) {\n            setHasMore(true);\n            setLoading(false);\n            setImgs((prevImgs) => {\n              return [...prevImgs, ...res.data.result];\n            });\n          } else if (!fetchIsCancelled.current) {\n            setLoading(false);\n            setHasMore(false);\n          }\n        })\n        .catch((e) => {\n          if (axios.isCancel(e)) {\n            return;\n          }\n        });\n    }\n  };\n\n  return (\n    <React.Fragment>\n      {/* <h2>Found Images: {imgs.length}</h2> */}\n\n      <div className=\"image-grid\">\n        {imgs.map((image, index) => {\n          if (image === null) {\n            return null;\n          }\n\n          if (imgs.length === index + 1) {\n            return (\n              <React.Fragment key={index}>\n                <ImageCard\n                  key={image.id}\n                  image={image}\n                  setOpenBookmarkModal={setModalIsOpen}\n                  setPhotoId={setPhotoIdBookmarked}\n                  userLoggedIn={userLoggedIn}\n                />\n                <div\n                  key={index}\n                  ref={lastImageRef}\n                  style={{\n                    position: 'relative',\n                    bottom: '200px',\n                    // border: '3px solid red',\n                    height: '0%',\n                  }}\n                ></div>\n              </React.Fragment>\n            );\n          } else {\n            return (\n              <ImageCard\n                key={image.id}\n                image={image}\n                setOpenBookmarkModal={setModalIsOpen}\n                setPhotoId={setPhotoIdBookmarked}\n                userLoggedIn={userLoggedIn}\n              />\n            );\n          }\n        })}\n      </div>\n      <h2 style={{ textAlign: 'center' }}>{loading && 'Loading...'}</h2>\n      <h2 style={{ textAlign: 'center' }}>\n        {!hasMore && 'No more images to display'}\n      </h2>\n\n      <div\n        onClick={() => {\n          setModalIsOpen(false);\n        }}\n      >\n        {modalIsOpen ? (\n          <BookmarkModal\n            openModal={true}\n            photoId={photoIdBookmarked}\n          ></BookmarkModal>\n        ) : null}\n      </div>\n    </React.Fragment>\n  );\n};\n\nexport default Feed;\n","import React, { useState } from \"react\";\nimport \"./searchbar.css\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport TextField from \"@material-ui/core/TextField\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    margin: theme.spacing(1),\n    width: \"100ch\",\n    backgroundColor: \"white\",\n  },\n}));\n\nfunction SearchBarInput(props) {\n  const [searchVal, setSearchVal] = useState(\"\");\n  const classes = useStyles();\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    setTimeout(() => {\n      if ((searchVal.match(/[/[\\s]/g) || []).length === searchVal.length) {\n        props.setQuery(null);\n      } else {\n        props.setQuery(searchVal);\n      }\n    }, 100);\n  };\n\n  return (\n    <React.Fragment>\n      <div className=\"searchBar\">\n        <form\n          onSubmit={handleSubmit}\n          className={classes.root}\n          noValidate\n          autoComplete=\"off\"\n        >\n          <TextField\n            className={classes.text}\n            id=\"outlined-basic\"\n            label=\"Search for stock photos\"\n            variant=\"outlined\"\n            size=\"small\"\n            fullWidth\n            value={searchVal}\n            onChange={(event) => setSearchVal(event.target.value)}\n          />\n        </form>\n      </div>\n    </React.Fragment>\n  );\n}\n\nexport default SearchBarInput;\n","import React, { useState, useEffect } from 'react';\nimport './searchbar.css';\nimport axios from 'axios';\nimport Feed from '../feed/feed';\nimport SearchBarInput from './searchBarInput';\n\nimport img1 from '../../background/1.jpg';\nimport img2 from '../../background/2.jpg';\nimport img3 from '../../background/3.jpg';\nimport img4 from '../../background/4.jpg';\nimport img5 from '../../background/5.jpg';\nimport img6 from '../../background/6.jpg';\nimport img7 from '../../background/7.jpg';\n\nfunction SearchBar() {\n  const [query, setQuery] = useState(null);\n\n  useEffect(() => {\n    if (query !== null) {\n      const updateSearchRecommendation = () => {\n        axios({\n          url: 'http://localhost:5000/update_search_recommendation',\n          params: { query: query },\n        }).then((response) => {\n          console.log(response);\n        });\n      };\n      updateSearchRecommendation();\n    }\n    console.log(`The query is - ${query}`);\n  }, [query]);\n\n  let backgroundImages = [];\n  let index = 0;\n\n  backgroundImages[0] = img1;\n  backgroundImages[1] = img2;\n  backgroundImages[2] = img3;\n  backgroundImages[3] = img4;\n  backgroundImages[4] = img5;\n  backgroundImages[5] = img6;\n  backgroundImages[6] = img7;\n  index = Math.floor(Math.random() * backgroundImages.length);\n  console.log(index);\n\n  return (\n    <React.Fragment>\n      <div\n        className=\"bar\"\n        style={{ backgroundImage: `url(${backgroundImages[index]})` }}\n      >\n        <SearchBarInput setQuery={setQuery} />\n      </div>\n\n      <Feed query={query} />\n    </React.Fragment>\n  );\n}\n\nexport default SearchBar;\n","import React from 'react';\n\nimport Toolbar from '../components/toolbar/toolbar';\nimport SearchBar from '../components/searchbar/searchbar';\n\nfunction MainPage() {\n  return (\n    <React.Fragment>\n      <Toolbar />\n      <SearchBar />\n    </React.Fragment>\n  );\n}\n\nexport default MainPage;\n","import React, { useState } from \"react\";\nimport { Button, FormGroup, FormControl, FormLabel } from \"react-bootstrap\";\nimport axios from \"axios\";\nimport { useHistory } from \"react-router-dom\";\n\nexport default function RegistrationPage() {\n  const history = useHistory();\n\n  const [email, set_email] = useState(\"\");\n  const [password, set_password] = useState(\"\");\n  const [first_name, set_first_name] = useState(\"\");\n  const [last_name, set_last_name] = useState(\"\");\n  const [username, set_username] = useState(\"\");\n\n  function validate_email() {\n    return email.length > 0 && email.length < 50;\n  }\n\n  function validate_password() {\n    return password.length >= 8 && password.length < 16;\n  }\n\n  function validate_first_name() {\n    return email.length > 0 && email.length < 50;\n  }\n\n  function validate_last_name() {\n    return password.length > 0 && password.length < 50;\n  }\n\n  function validate_username() {\n    return password.length > 0 && password.length < 32;\n  }\n\n  async function attempt_registration(event) {\n    event.preventDefault();\n\n    const response = await axios.get(\"http://localhost:5000/create_user\", {\n      params: {\n        email: email,\n        password: password,\n        first: first_name,\n        last: last_name,\n        username: username,\n      },\n    });\n    console.log(response);\n    // const verify_response = await axios.get('http://localhost:5000/verify_email', {\n    //   params: { email: email },\n    // });\n\n    if (response.data.result !== false) {\n      history.push(\"/\");\n    }\n  }\n\n  return (\n    <div>\n      <form onSubmit={attempt_registration}>\n        <FormGroup controlId=\"first_name\" bsSize=\"large\">\n          <FormLabel>First Name</FormLabel>\n          <FormControl\n            autoFocus\n            value={first_name}\n            onChange={(e) => set_first_name(e.target.value)}\n          />\n        </FormGroup>\n\n        <FormGroup controlId=\"last_name\" bsSize=\"large\">\n          <FormLabel>Last Name</FormLabel>\n          <FormControl\n            value={last_name}\n            onChange={(e) => set_last_name(e.target.value)}\n          />\n        </FormGroup>\n\n        <FormGroup controlId=\"username\" bsSize=\"large\">\n          <FormLabel>Username</FormLabel>\n          <FormControl\n            value={username}\n            onChange={(e) => set_username(e.target.value)}\n          />\n        </FormGroup>\n\n        <FormGroup controlId=\"email\" bsSize=\"large\">\n          <FormLabel>Email</FormLabel>\n          <FormControl\n            autoFocus\n            type=\"email\"\n            value={email}\n            onChange={(e) => set_email(e.target.value)}\n          />\n        </FormGroup>\n\n        <FormGroup controlId=\"password\" bsSize=\"large\">\n          <FormLabel>Password</FormLabel>\n\n          <FormControl\n            value={password}\n            onChange={(e) => set_password(e.target.value)}\n            type=\"password\"\n          />\n        </FormGroup>\n\n        <Button\n          block\n          bsSize=\"large\"\n          disabled={\n            !validate_first_name() ||\n            !validate_last_name() ||\n            !validate_email() ||\n            !validate_password() ||\n            !validate_username()\n          }\n          type=\"submit\"\n        >\n          Register\n        </Button>\n      </form>\n    </div>\n  );\n}\n","import React, { useState, useEffect, useCallback, useRef } from 'react';\nimport './UserPhotos.css';\nimport axios from 'axios';\nimport ImageCard from '../feed/ImageCard/ImageCard';\nimport BookmarkModal from '../Modals/BookmarkModal/BookmarkModal';\n\nconst UserPhotos = (props) => {\n  const [profileImgs, setProfileImgs] = useState([]);\n  const [modalIsOpen, setModalIsOpen] = useState(false);\n  const [photoIdBookmarked, setPhotoIdBookmarked] = useState(0);\n  const [loading, setLoading] = useState(false);\n  const [hasMore, setHasMore] = useState(true);\n  const [hasPhotos, setHasPhotos] = useState(true);\n  const { userID } = props;\n  const displayMyProfile =\n    localStorage.getItem('userID') === userID ? true : false;\n  const userLoggedIn = localStorage.getItem('userLoggedIn');\n  const [lastID, setLastID] = useState(null);\n  const fetchIsCancelled = useRef(false);\n  const cancelAxiosRequest = useRef();\n  const observer = useRef();\n  const lastImageRef = useCallback(\n    (node) => {\n      if (loading) return;\n      if (observer.current) observer.current.disconnect();\n      observer.current = new IntersectionObserver((entries) => {\n        if (entries[0].isIntersecting && hasMore) {\n          setLoading(true);\n          console.log(`called with last_id of ${lastID}`);\n          setTimeout(() => {\n            fetchProfilePhotos(lastID);\n          }, 1000);\n        }\n      });\n\n      if (node) observer.current.observe(node);\n    },\n    // eslint-disable-next-line\n    [loading, hasMore]\n  );\n\n  useEffect(() => {\n    if (profileImgs.length === 0) {\n      setHasPhotos(false);\n    }\n  }, [profileImgs]);\n\n  useEffect(() => {\n    window.scrollTo(0, 0);\n\n    axios({\n      url: 'http://localhost:5000/get_user_username',\n      params: { user_id: userID },\n    }).then((response) => {\n      // if (response.data.result) {\n      //   setUsername(response.data.result);\n      // }\n    });\n    // eslint-disable-next-line\n  }, []);\n\n  useEffect(() => {\n    setTimeout(() => {\n      // temp fix to api call the clashes with another and which both modify file = \"image.jpg\"\n      fetchProfilePhotos();\n    }, 700);\n\n    return () => {\n      if (cancelAxiosRequest.current != null) cancelAxiosRequest.current();\n\n      fetchIsCancelled.current = true;\n      setProfileImgs([]);\n      setHasMore(true);\n    };\n    // eslint-disable-next-line\n  }, [userID]);\n\n  const fetchProfilePhotos = (last_id) => {\n    setLoading(true);\n\n    axios({\n      method: 'GET',\n      url: 'http://localhost:5000/profile_photos',\n      params: { user_id: userID, batch_size: 5, last_id: last_id },\n      cancelToken: new axios.CancelToken(\n        (c) => (cancelAxiosRequest.current = c)\n      ),\n    })\n      .then((res) => {\n        console.log(res);\n        if (res.data.result !== false && !fetchIsCancelled.current) {\n          setLastID(res.data.last_id);\n          setHasMore(true);\n          setLoading(false);\n          setProfileImgs((prevImgs) => {\n            return [...prevImgs, ...res.data.result];\n          });\n        } else if (!fetchIsCancelled.current) {\n          setLoading(false);\n          setHasMore(false);\n        }\n      })\n      .catch((e) => {\n        if (axios.isCancel(e)) {\n          return;\n        }\n      });\n  };\n\n  return (\n    <React.Fragment>\n      {displayMyProfile ? (\n        <h2 style={{ marginTop: '10%', marginLeft: '9%' }}>\n          Uploaded Images: {profileImgs.length}\n        </h2>\n      ) : (\n        <h2 style={{ marginTop: '10%', marginLeft: '9%' }}>\n          Uploads: {profileImgs.length}\n        </h2>\n      )}\n\n      <div className=\"image-grid\">\n        {profileImgs.map((image, index) => {\n          if (image === null) {\n            return null;\n          }\n\n          if (profileImgs.length === index + 1) {\n            return (\n              <React.Fragment key={index}>\n                <ImageCard\n                  key={image.id}\n                  image={image}\n                  setOpenBookmarkModal={setModalIsOpen}\n                  setPhotoId={setPhotoIdBookmarked}\n                  userLoggedIn={userLoggedIn}\n                />\n                <div\n                  key={index}\n                  ref={lastImageRef}\n                  style={{\n                    position: 'relative',\n                    bottom: '200px',\n                    // border: '3px solid red',\n                    height: '0%',\n                  }}\n                ></div>\n              </React.Fragment>\n            );\n          } else {\n            return (\n              <ImageCard\n                key={image.id}\n                image={image}\n                setOpenBookmarkModal={setModalIsOpen}\n                setPhotoId={setPhotoIdBookmarked}\n                userLoggedIn={userLoggedIn}\n              />\n            );\n          }\n        })}\n      </div>\n      <h2 style={{ textAlign: 'center' }}>{loading && 'Loading...'}</h2>\n      {hasPhotos ? (\n        <h2 style={{ textAlign: 'center' }}>\n          You haven't uploaded any photos!\n        </h2>\n      ) : (\n        <React.Fragment>\n          <h2 style={{ textAlign: 'center' }}>\n            {!hasMore && 'No more images to display'}\n          </h2>\n        </React.Fragment>\n      )}\n\n      {modalIsOpen ? (\n        <BookmarkModal\n          openModal={modalIsOpen}\n          setOpenModal={setModalIsOpen}\n          photoId={photoIdBookmarked}\n        ></BookmarkModal>\n      ) : null}\n    </React.Fragment>\n  );\n};\n\nexport default UserPhotos;\n","import React from \"react\";\nimport LockIcon from \"@material-ui/icons/Lock\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport ButtonBase from \"@material-ui/core/ButtonBase\";\nimport Typography from \"@material-ui/core/Typography\";\n\nimport \"./Collection.css\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    display: \"flex\",\n    flexWrap: \"wrap\",\n    minWidth: 300,\n    width: \"100%\",\n  },\n  image: {\n    position: \"relative\",\n    height: 200,\n    [theme.breakpoints.down(\"xs\")]: {\n      width: \"100% !important\", // Overrides inline-style\n      height: 100,\n    },\n    \"&:hover, &$focusVisible\": {\n      zIndex: 1,\n      \"& $imageBackdrop\": {\n        opacity: 0.15,\n      },\n      \"& $imageMarked\": {\n        opacity: 0,\n      },\n      \"& $imageTitle\": {\n        border: \"4px solid currentColor\",\n      },\n    },\n  },\n  focusVisible: {},\n  imageButton: {\n    position: \"absolute\",\n    left: 0,\n    right: 0,\n    top: 0,\n    bottom: 0,\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    color: theme.palette.common.white,\n  },\n  imageSrc: {\n    position: \"absolute\",\n    left: 0,\n    right: 0,\n    top: 0,\n    bottom: 0,\n    backgroundSize: \"cover\",\n    backgroundPosition: \"center 40%\",\n  },\n  imageBackdrop: {\n    position: \"absolute\",\n    left: 0,\n    right: 0,\n    top: 0,\n    bottom: 0,\n    backgroundColor: theme.palette.common.black,\n    opacity: 0.4,\n    transition: theme.transitions.create(\"opacity\"),\n  },\n  imageTitle: {\n    position: \"relative\",\n    padding: `${theme.spacing(2)}px ${theme.spacing(4)}px ${\n      theme.spacing(1) + 6\n    }px`,\n    fontSize: 28,\n    fontWeight: \"bold\",\n  },\n  imageMarked: {\n    height: 3,\n    width: 18,\n    backgroundColor: theme.palette.common.white,\n    position: \"absolute\",\n    bottom: -2,\n    left: \"calc(50% - 9px)\",\n    transition: theme.transitions.create(\"opacity\"),\n  },\n}));\n\nexport default function Collection(props) {\n  const handleCollectionClicked = () => {\n    props.setCollectionClicked(true);\n    props.setCollectionIdClicked(props.collection.collection_id);\n    props.setCollectionNameClicked(props.collection.collection_name);\n    props.setCollectionPrivateClicked(props.collection.private);\n    props.setCollectionNumPhotosClicked(props.collection.num_photos);\n    props.setCollectionCreatorClicked(props.collection.creator_id);\n  };\n\n  const classes = useStyles();\n\n  const image = {\n    url: props.collection.img,\n    title: props.collection.collection_name,\n    width: \"100%\",\n  };\n\n  let img = \"data:image;base64,\" + image.url.replace(/(\\r\\n|\\n|\\r)/gm, \"\");\n\n  // console.log(img);\n\n  return (\n    <React.Fragment>\n      <div className=\"collection-box\" onClick={handleCollectionClicked}>\n        <div className={classes.root}>\n          <ButtonBase\n            focusRipple\n            key={image.title}\n            className={classes.image}\n            focusVisibleClassName={classes.focusVisible}\n            style={{\n              width: image.width,\n            }}\n          >\n            <span\n              className={classes.imageSrc}\n              style={{\n                backgroundImage: `url(${img})`,\n              }}\n            />\n            <span className={classes.imageBackdrop} />\n            <span className={classes.imageButton}>\n              <Typography\n                component=\"span\"\n                variant=\"subtitle1\"\n                color=\"inherit\"\n                className={classes.imageTitle}\n              >\n                {props.collection.private === true ? <LockIcon /> : null}\n                {image.title}\n\n                <span className={classes.imageMarked} />\n              </Typography>\n            </span>\n          </ButtonBase>\n        </div>\n        {/* {props.collection.private === true ? <LockIcon /> : null} */}\n        {/* {props.collection.collection_name} */}\n      </div>\n    </React.Fragment>\n  );\n}\n","import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport './collections.css';\nimport { Redirect } from 'react-router-dom';\nimport Collection from './collection/Collection';\nimport Userbackground from '../../background/user-background/user-background.jpg';\n\nexport default function Collections(props) {\n  const [username, setUsername] = useState([props.userID]);\n  const [email, setEmail] = useState('');\n  const [allCollections, setAllCollections] = useState([]);\n  const [collectionClicked, setCollectionClicked] = useState(false);\n  const [collectionIdClicked, setCollectionIdClicked] = useState(null);\n  const [collectionNameClicked, setCollectionNameClicked] = useState(null);\n  const [collectionPrivateClicked, setCollectionPrivateClicked] = useState(\n    null\n  );\n  const [collectionNumPhotosClicked, setCollectionNumPhotosClicked] = useState(\n    null\n  );\n  const [collectionCreatorClicked, setCollectionCreatorClicked] = useState(\n    null\n  );\n\n  const [loading, setLoading] = useState(true);\n  const [hasCollections, setHasCollections] = useState(true);\n\n  const { userID, displayMyProfile } = props;\n\n  const [profileImg, setProfileImg] = useState(null);\n\n  useEffect(() => {\n    axios({\n      url: 'http://localhost:5000/get_user_username',\n      params: { user_id: userID },\n    }).then((response) => {\n      if (response.data.result) {\n        setUsername(response.data.result);\n      }\n    });\n    axios({\n      url: 'http://localhost:5000/get_user_email',\n      params: { user_id: userID },\n    }).then((response) => {\n      if (response.data.result) {\n        setEmail(response.data.result);\n      }\n    });\n    // eslint-disable-next-line\n  }, []);\n\n  useEffect(() => {\n    const getUsersCollections = () => {\n      axios({\n        method: 'GET',\n        url: 'http://localhost:5000/get_users_collection',\n        params: {\n          user_id: userID,\n          batch_size: 20,\n        },\n      }).then((response) => {\n        console.log(response);\n        if (response.data.result !== false) {\n          setAllCollections(response.data.result);\n          if (\n            response.data.result.find(\n              (collection) => collection.private === false\n            ) ||\n            displayMyProfile === true\n          ) {\n            setHasCollections(true);\n          } else {\n            setHasCollections(false);\n          }\n        } else {\n          setHasCollections(false);\n        }\n\n        setLoading(false);\n      });\n    };\n    getUsersCollections();\n    // eslint-disable-next-line\n  }, [userID]);\n\n  const getProfilePhoto = () => {\n    axios({\n      method: 'GET',\n      url: 'http://localhost:5000/get_profile_photo',\n      params: {\n        user_id: userID,\n      },\n    }).then((response) => {\n      console.log(response);\n      if (response.data.result) {\n        setProfileImg(response.data.result);\n      } else {\n        setProfileImg(null);\n      }\n    });\n  };\n\n  useEffect(() => {\n    getProfilePhoto();\n    // eslint-disable-next-line\n  }, []);\n\n  console.log(profileImg);\n\n  const collectionsComponents = allCollections.map((collection) => {\n    if (displayMyProfile === true || collection.private === false) {\n      return (\n        <Collection\n          key={collection.collection_id}\n          collection={collection}\n          setCollectionClicked={setCollectionClicked}\n          setCollectionIdClicked={setCollectionIdClicked}\n          setCollectionNameClicked={setCollectionNameClicked}\n          setCollectionPrivateClicked={setCollectionPrivateClicked}\n          setCollectionNumPhotosClicked={setCollectionNumPhotosClicked}\n          setCollectionCreatorClicked={setCollectionCreatorClicked}\n        />\n      );\n    }\n    return null;\n  });\n\n  const collectionData = (\n    <Redirect\n      push\n      to={{\n        pathname: `/collection-${collectionIdClicked}`,\n        state: {\n          collection_id: `${collectionIdClicked}`,\n          collection_name: `${collectionNameClicked}`,\n          private: `${collectionPrivateClicked}`,\n          num_photos: `${collectionNumPhotosClicked}`,\n          creator_id: `${collectionCreatorClicked}`,\n          isMyCollection: `${displayMyProfile}`,\n        },\n      }}\n    />\n  );\n\n  let componentsRender;\n  if (collectionClicked) {\n    componentsRender = collectionData;\n  } else {\n    componentsRender = (\n      <div className=\"collectionsPageWrapper\">\n        {!props.displayMyProfile ? (\n          <React.Fragment>\n            <div\n              className=\"userpage-username\"\n              style={{\n                backgroundImage: `url(${Userbackground})`,\n              }}\n            >\n              {profileImg !== null ? (\n                <div className=\"users-profile-pic\">\n                  <div className=\"dp-photo-wrapper\">\n                    <div className=\"dp-photo\">\n                      <img\n                        src={`data:image/jpg;base64,${profileImg}`}\n                        alt=\"collection\"\n                      />\n                    </div>\n                  </div>\n                </div>\n              ) : null}\n\n              {!props.displayMyProfile ? (\n                <h1 style={{ textAlign: 'center', margin: '0' }}>{username}</h1>\n              ) : null}\n\n              {!props.displayMyProfile ? (\n                <h3 style={{ textAlign: 'center' }}>Email: {email}</h3>\n              ) : null}\n            </div>\n          </React.Fragment>\n        ) : null}\n\n        <div className=\"title\">\n          {props.displayMyProfile ? (\n            <h2\n              className=\"quicksand\"\n              style={{ marginTop: '10%', textAlign: 'center' }}\n            >\n              My collections\n            </h2>\n          ) : (\n            <h2\n              className=\"quicksand\"\n              style={{\n                marginTop: '10%',\n                marginBottom: '8%',\n                textAlign: 'center',\n              }}\n            >\n              Public Collections\n            </h2>\n          )}\n        </div>\n        <div className=\"collectionsWrapper\">{collectionsComponents}</div>\n      </div>\n    );\n  }\n\n  return (\n    <React.Fragment>\n      {componentsRender}\n      <h1 style={{ textAlign: 'center' }}>{loading && 'Loading...'} </h1>\n      <h2 style={{ textAlign: 'center' }}>\n        {!hasCollections && 'This user does not have any public collections'}\n      </h2>\n    </React.Fragment>\n  );\n}\n","import React, { useState, useEffect } from 'react';\nimport Toolbar from '../components/toolbar/toolbar';\nimport UserPhotos from '../components/userPhotos/UserPhotos';\nimport Collections from '../components/collections/collections';\nimport Button from '@material-ui/core/Button';\nimport './ProfilePage.css';\nimport { useHistory } from 'react-router-dom';\nimport axios from 'axios';\n\nfunction ProfilePage(props) {\n  const [profileImg, setProfileImg] = useState(null);\n\n  const history = useHistory();\n  const handleUploadPhotoClicked = () => {\n    history.push('/upload-profile-photo');\n  };\n\n  const getProfilePhoto = (ID) => {\n    axios({\n      method: 'GET',\n      url: 'http://localhost:5000/get_profile_photo',\n      params: {\n        user_id: ID,\n      },\n    }).then((response) => {\n      console.log(response);\n      if (response.data.result) {\n        setProfileImg(response.data.result);\n      } else {\n        setProfileImg(null);\n      }\n    });\n  };\n\n  useEffect(() => {\n    if (localStorage.getItem('userID') === props.location.state.uploaderID) {\n      getProfilePhoto(localStorage.getItem('userID'));\n    } else {\n      getProfilePhoto(props.location.state.uploaderID);\n    }\n    // eslint-disable-next-line\n  }, []);\n\n  if (props.location.state === undefined) {\n    return (\n      <React.Fragment>\n        <Toolbar />\n        <h1>Nothing found</h1>\n      </React.Fragment>\n    );\n  } else {\n    // This variable helps certain components decide what information they should display.\n    const displayMyProfile =\n      localStorage.getItem('userID') === props.location.state.uploaderID\n        ? true\n        : false;\n\n    // Tries to move the page to the top when the profile page is rendered\n    document.body.style.overflow = 'unset';\n    return (\n      <React.Fragment>\n        <Toolbar />\n\n        {displayMyProfile ? (\n          <React.Fragment>\n            <div className=\"users-profile-pic\" style={{ marginTop: '20%' }}>\n              <div className=\"dp-photo-wrapper\">\n                {profileImg !== null ? (\n                  <React.Fragment>\n                    <div className=\"dp-photo\">\n                      <img\n                        src={`data:image/jpg;base64,${profileImg}`}\n                        alt=\"profile\"\n                      />\n                    </div>\n                  </React.Fragment>\n                ) : null}\n              </div>\n\n              <div className=\"upload-dp-button\" style={{ textAlign: 'center' }}>\n                <Button variant=\"outlined\" onClick={handleUploadPhotoClicked}>\n                  Update Profile Photo\n                </Button>\n              </div>\n            </div>\n          </React.Fragment>\n        ) : null}\n\n        <div className=\"profile-wrapper\" style={{ marginTop: '20%' }}>\n          {displayMyProfile ? null : (\n            <Collections\n              userID={props.location.state.uploaderID}\n              displayMyProfile={displayMyProfile}\n            />\n          )}\n          <UserPhotos\n            userID={props.location.state.uploaderID}\n            userLoggedIn={localStorage.getItem('userLoggedIn')}\n          />\n        </div>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default ProfilePage;\n","import React, { useState, useEffect, useRef } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport './PostInfo.css';\nimport Toolbar from '../../components/toolbar/toolbar';\nimport FollowButton from '../../components/follow/followButton';\nimport Likes from '../../components/likes/Likes';\nimport Comments from '../../components/comments/Comments';\nimport axios from 'axios';\nimport Button from '@material-ui/core/Button';\nimport IconButton from '@material-ui/core/IconButton';\nimport BookmarkIcon from '@material-ui/icons/Bookmark';\nimport BookmarkModal from '../../components/Modals/BookmarkModal/BookmarkModal';\n\nconst PostInfo = (props) => {\n  const [comments, setComments] = useState([]);\n  const [tags, setTags] = useState([]);\n  const [commentUpdated, updateComments] = useState('');\n  const [bookmarkModalIsOpen, setBookmarkModalIsOpen] = useState(false);\n  const cancelAxiosRequest = useRef();\n  const {\n    location: {\n      state: { id: imageID },\n    },\n  } = props;\n  const history = useHistory();\n\n  useEffect(() => {\n    let mounted = true;\n\n    const fetchTags = (id) => {\n      axios({\n        method: 'GET',\n        url: 'http://localhost:5000/get_tags',\n        params: { image_id: id },\n        cancelToken: new axios.CancelToken(\n          (c) => (cancelAxiosRequest.current = c)\n        ),\n      }).then((res) => {\n        console.log(res);\n        if (res.data.result !== false && mounted) {\n          console.log(res.data.result);\n          setTags(res.data.result);\n        } else if (mounted) {\n          setTags([]);\n        }\n      });\n    };\n    const fetchRelatedImgs = (id) => {\n      axios({\n          method: 'GET',\n          url: 'http://localhost:5000/get_related_images',\n          params: { image_id: id}, //user_id: 1\n\n        }).then((res) => {\n          console.log(res);\n        });\n    }\n\n    const fetchComments = (id) => {\n      axios({\n        method: 'GET',\n        url: 'http://localhost:5000/get_comments_to_image',\n        params: { image_id: id, batch_size: 20 },\n        cancelToken: new axios.CancelToken(\n          (c) => (cancelAxiosRequest.current = c)\n        ),\n      }).then((res) => {\n        if (res.data.result !== false && mounted) {\n          setComments(res.data.result);\n        } else if (mounted) {\n          setComments([]);\n        }\n        fetchTags(id);\n      });\n    };\n\n    fetchComments(imageID);\n    fetchRelatedImgs(imageID);\n\n    return () => {\n      console.log('CLEAN UP - PostInfo');\n      cancelAxiosRequest.current();\n      mounted = false;\n    };\n  }, [commentUpdated, imageID]);\n\n  const apiAddPurchase = (imageID) => {\n    axios({\n      method: 'POST',\n      url: 'http://localhost:5000/add_purchase',\n      params: {\n        save_for_later: 0,\n        purchased: 0,\n        image_id: String(imageID),\n      },\n    }).then((response) => {\n      if (response.data.result !== false) {\n        console.log(response);\n      }\n    });\n  };\n\n  const handleBuyButton = () => {\n    apiAddPurchase(props.location.state.id);\n  };\n\n  const handleBookmarkClicked = () => {\n    setBookmarkModalIsOpen(true);\n  };\n\n  return (\n    <React.Fragment>\n      <Toolbar />\n      <div className=\"postWrapper\">\n        <div className=\"postInfo\">\n          <div className=\"username\">\n            <div className=\"username-wrapper\">\n              <Button\n                varient=\"outlined\"\n                onClick={() => {\n                  history.push({\n                    pathname: `/profile/${props.location.state.uploader}`,\n                    state: { uploaderID: props.location.state.uploader },\n                  });\n                }}\n              >\n                @{props.location.state.uploader}\n              </Button>\n            </div>\n            {localStorage.getItem('userLoggedIn') ? (\n              <React.Fragment>\n                {localStorage.getItem('userID') !==\n                props.location.state.uploader ? (\n                  <FollowButton uploader={props.location.state.uploader} />\n                ) : null}\n                <div className=\"bookmark-wrapper\">\n                  <IconButton\n                    variant=\"contained\"\n                    onClick={handleBookmarkClicked}\n                  >\n                    <BookmarkIcon />\n                  </IconButton>\n                </div>\n              </React.Fragment>\n            ) : null}\n            <Likes\n              num_likes={props.location.state.num_likes}\n              image_id={props.location.state.id}\n              uploader_id={props.location.state.uploader}\n            />\n          </div>\n        </div>\n        <div className=\"postImage\">\n          <img\n            src={`data:image/jpg;base64,${props.location.state.url}`}\n            alt={props.location.state.caption}\n          />\n\n          <div className=\"recImages-nested\">\n            <h1 className=\"roboto\"> Related Photos:</h1>\n            <div className=\"recImage\"></div>\n            <div className=\"recImage\"></div>\n            <div className=\"recImage\"></div>\n          </div>\n        </div>\n        <div className=\"postFeed-nested\">\n          <h1>{props.location.state.title}</h1>\n          <h2 className=\"roboto\">{props.location.state.caption}</h2>\n          <div className=\"postTags\">\n            <h3>\n              Tags:{' '}\n              {tags.length < 1 ? 'this post has no tags to display' : null}\n            </h3>\n            <div className=\"flexbox-tags\">\n              {tags.length > 0\n                ? tags.map((tag, index) => {\n                    return (\n                      <Button key={index} variant=\"contained\">\n                        #{tag}\n                      </Button>\n                    );\n                  })\n                : null}\n            </div>\n          </div>\n          <div className=\"postPrice\">\n            <h2 className=\"roboto\">Price: ${props.location.state.price}</h2>\n            <Button variant=\"contained\" onClick={handleBuyButton}>\n              Add to Cart\n            </Button>\n          </div>\n          <div className=\"postComments\">\n            <h2 className=\"roboto\">Comments:</h2>\n            <Comments\n              image_id={props.location.state.id}\n              comments_list={comments}\n              updateComments={updateComments}\n              uploader_id={props.location.state.uploader}\n            />\n          </div>\n        </div>\n      </div>\n      {bookmarkModalIsOpen ? (\n        <BookmarkModal\n          openModal={true}\n          setOpenModal={setBookmarkModalIsOpen}\n          photoId={props.location.state.id}\n        ></BookmarkModal>\n      ) : null}\n    </React.Fragment>\n  );\n};\n\nexport default PostInfo;\n","import React, { useState, useEffect } from 'react';\nimport TextField from '@material-ui/core/TextField';\n\nexport default function Title(props) {\n  const [text, setText] = useState('');\n  const [errorText, setErrorText] = useState('');\n  const [errorValue, setErrorValue] = useState(false);\n  const [firstRender, setFirstRender] = useState(true);\n\n  const { uploadButtonClicked } = props;\n\n  useEffect(() => {\n    setFirstRender(false);\n  }, []);\n\n  useEffect(() => {\n    if (firstRender === false) {\n      const result = handleTitleInput(text);\n      props.setTitleValidated([result, text]);\n    }\n    // eslint-disable-next-line\n  }, [uploadButtonClicked]);\n\n  const handleTitleInput = (text) => {\n    if (text.length > 0) {\n      setErrorValue(false);\n      setErrorText('');\n      return true;\n    } else {\n      setErrorText('Title must be included');\n      setErrorValue(true);\n      return false;\n    }\n  };\n\n  return (\n    <React.Fragment>\n      <TextField\n        required\n        error={errorValue}\n        helperText={errorText}\n        onChange={(e) => {\n          setText(e.target.value);\n          handleTitleInput(e.target.value);\n        }}\n        label=\"Title\"\n        InputLabelProps={{\n          shrink: true,\n        }}\n      />\n    </React.Fragment>\n  );\n}\n","import React, { useState, useEffect } from 'react';\nimport TextField from '@material-ui/core/TextField';\n\nexport default function Password(props) {\n  const [text, setText] = useState('');\n  const [errorText, setErrorText] = useState('');\n  const [errorValue, setErrorValue] = useState(false);\n  const [firstRender, setFirstRender] = useState(true);\n\n  const { uploadButtonClicked } = props;\n\n  useEffect(() => {\n    setFirstRender(false);\n  }, []);\n\n  useEffect(() => {\n    if (firstRender === false) {\n      const result = handleCaptionText(text);\n      props.setCaptionValidated([result, text]);\n    }\n    // eslint-disable-next-line\n  }, [uploadButtonClicked]);\n\n  const handleCaptionText = (text) => {\n    setErrorValue(false);\n    setErrorText('');\n    return true;\n  };\n  return (\n    <React.Fragment>\n      <TextField\n        error={errorValue}\n        helperText={errorText}\n        onChange={(e) => {\n          setText(e.target.value);\n          handleCaptionText(e.target.value);\n        }}\n        label=\"Caption\"\n        InputLabelProps={{\n          shrink: true,\n        }}\n      />\n    </React.Fragment>\n  );\n}\n","import React, { useState, useEffect } from 'react';\nimport TextField from '@material-ui/core/TextField';\n\nexport default function FirstName(props) {\n  const [text, setText] = useState('');\n  const [errorText, setErrorText] = useState('');\n  const [errorValue, setErrorValue] = useState(false);\n  const [firstRender, setFirstRender] = useState(true);\n\n  const { uploadButtonClicked } = props;\n\n  useEffect(() => {\n    setFirstRender(false);\n  }, []);\n\n  useEffect(() => {\n    if (firstRender === false) {\n      const result = handleTagsText(text);\n      props.setTagsValidated([result, text]);\n    }\n    // eslint-disable-next-line\n  }, [uploadButtonClicked]);\n\n  const handleTagsText = (text) => {\n    setErrorValue(false);\n    setErrorText('');\n    return true;\n  };\n  return (\n    <React.Fragment>\n      <TextField\n        error={errorValue}\n        helperText={errorText}\n        onChange={(e) => {\n          setText(e.target.value);\n          handleTagsText(e.target.value);\n        }}\n        label=\"Tags - Must be comma seperated (e.g. 'nature','trees','green')\"\n        InputLabelProps={{\n          shrink: true,\n        }}\n      />\n    </React.Fragment>\n  );\n}\n","import React, { useState, useEffect } from 'react';\nimport TextField from '@material-ui/core/TextField';\n\nexport default function LastName(props) {\n  const [text, setText] = useState('');\n  const [errorText, setErrorText] = useState('');\n  const [errorValue, setErrorValue] = useState(false);\n  const [firstRender, setFirstRender] = useState(true);\n\n  const { uploadButtonClicked } = props;\n\n  useEffect(() => {\n    setFirstRender(false);\n  }, []);\n\n  useEffect(() => {\n    if (firstRender === false) {\n      const result = handlePriceInput(text);\n      props.setPriceValidated([result, text]);\n    }\n    // eslint-disable-next-line\n  }, [uploadButtonClicked]);\n\n  const handlePriceInput = (text) => {\n    if (parseFloat(text) > 0) {\n      setErrorValue(false);\n      setErrorText('');\n      return true;\n    } else {\n      setErrorText('Price must be included');\n      setErrorValue(true);\n      return false;\n    }\n  };\n  return (\n    <React.Fragment>\n      <div>\n        <TextField\n          required\n          error={errorValue}\n          helperText={errorText}\n          onChange={(e) => {\n            setText(e.target.value);\n            handlePriceInput(e.target.value);\n          }}\n          label=\"Price\"\n          type=\"number\"\n          InputLabelProps={{\n            shrink: true,\n          }}\n        />\n      </div>\n    </React.Fragment>\n  );\n}\n","import React from 'react';\nimport ReactDom from 'react-dom';\nimport './PostConfirmationModal.css';\nimport Button from '@material-ui/core/Button';\nimport { useHistory } from 'react-router-dom';\n\nexport default function PostConfirmationModal(props) {\n  const history = useHistory();\n  if (!props.isOpen) {\n    return null;\n  } else {\n    return ReactDom.createPortal(\n      <React.Fragment>\n        <div className=\"overlay-styles\" />\n        <div className=\"confirmation-modal\">\n          <h3>\n            You post has been uploaded successfully! Please check your profile\n            page under the profile tab to see your uploads.\n          </h3>\n          <Button\n            variant=\"contained\"\n            color=\"primary\"\n            onClick={() => {\n              history.replace('/');\n            }}\n          >\n            Return to Main Page\n          </Button>\n        </div>\n      </React.Fragment>,\n      document.getElementById('portal')\n    );\n  }\n}\n","import React, { useState, useEffect } from 'react';\nimport ReactDom from 'react-dom';\nimport Button from '@material-ui/core/Button';\nimport axios from 'axios';\nimport { useHistory } from 'react-router-dom';\nimport './CapturePhotoPage.css';\n\nimport TitleField from './Textfields/TitleField';\nimport CaptionField from './Textfields/CaptionField';\nimport TagsField from './Textfields/TagsField';\nimport PriceField from './Textfields/PriceField';\nimport ImageUploader from 'react-images-upload';\nimport PostConfirmationModal from './PostConfirmationModal/PostConfirmationModal';\n\nasync function attemptPost(img, title, caption, price, tags) {\n  const form_data = new FormData();\n  form_data.append('image', img);\n  form_data.append('caption', caption);\n  form_data.append('title', title);\n  form_data.append('price', price);\n  form_data.append('tags', tags);\n\n  const response = await axios.post('http://localhost:5000/post', form_data);\n  return response;\n}\n\nexport default function CapturePhotoPage(props) {\n  const [img, setImg] = useState(null);\n  const [pictures, setPictures] = useState([]);\n  const [uploadButtonClicked, setUploadButtonClicked] = useState(false);\n  const [titleValidated, setTitleValidated] = useState(false);\n  const [captionValidated, setCaptionValidated] = useState(false);\n  const [priceValidated, setPriceValidated] = useState(false);\n  const [tagsValidated, setTagsValidated] = useState(false);\n  const [confirmationModalOpen, setConfirmationModalOpen] = useState(false);\n  const [loading, setLoading] = useState(false);\n\n  const history = useHistory();\n\n  const onDrop = (pictureFiles, pictureDataURLs) => {\n    setPictures(pictures.concat(pictureFiles));\n    setImg(pictureDataURLs[0]);\n  };\n\n  useEffect(() => {\n    console.log('called');\n\n    if (\n      titleValidated[0] &&\n      captionValidated[0] &&\n      priceValidated[0] &&\n      tagsValidated[0] &&\n      img !== null\n    ) {\n      console.log('approved');\n      setLoading(true);\n      const response = attemptPost(\n        img,\n        titleValidated[1],\n        captionValidated[1],\n        priceValidated[1],\n        tagsValidated[1]\n      );\n\n      response.then((res) => {\n        console.log(res);\n        if (res.data.result) {\n          setConfirmationModalOpen(true);\n        }\n        setLoading(false);\n      });\n    }\n    // eslint-disable-next-line\n  }, [titleValidated, captionValidated, priceValidated, tagsValidated]);\n\n  const formSubmit = (event) => {\n    setUploadButtonClicked(!uploadButtonClicked);\n  };\n\n  return ReactDom.createPortal(\n    <React.Fragment>\n      <div className=\"grid-container-editpost\">\n        <div className=\"grid-item-image\">\n          <ImageUploader\n            withIcon={true}\n            buttonText=\"Choose image\"\n            onChange={onDrop}\n            imgExtension={['.jpg', '.png', '.jpeg']}\n            maxFileSize={5242880}\n            withPreview={true}\n            singleImage={true}\n            withLabel={true}\n          />\n        </div>\n        <div className=\"edit-post-details\">\n          <TitleField\n            uploadButtonClicked={uploadButtonClicked}\n            setTitleValidated={setTitleValidated}\n          />\n          <CaptionField\n            uploadButtonClicked={uploadButtonClicked}\n            setCaptionValidated={setCaptionValidated}\n          />\n          <PriceField\n            uploadButtonClicked={uploadButtonClicked}\n            setPriceValidated={setPriceValidated}\n          />\n          <TagsField\n            uploadButtonClicked={uploadButtonClicked}\n            setTagsValidated={setTagsValidated}\n          />\n          <h4>\n            Tags are important to allow our system to match users with your\n            photos. We encourage the use of tags but they are not optional. Upon\n            submission our system will auto-tag your image to improve its search\n            appearance but you may choose to remove these by editing your post.\n          </h4>\n          <div className=\"capture-form-buttons\">\n            <Button\n              variant=\"contained\"\n              color=\"primary\"\n              size=\"large\"\n              onClick={formSubmit}\n            >\n              SAVE\n            </Button>\n            <Button\n              variant=\"contained\"\n              color=\"primary\"\n              size=\"large\"\n              onClick={() => {\n                history.goBack();\n              }}\n            >\n              Cancel\n            </Button>\n          </div>\n          <h2 style={{ textAlign: 'center' }}>\n            {loading && 'Upload in progress, please wait...'}\n          </h2>\n        </div>\n      </div>\n      {confirmationModalOpen ? <PostConfirmationModal isOpen={true} /> : null}\n    </React.Fragment>,\n    document.getElementById('editPostPortal')\n  );\n}\n","import React, { useState } from 'react';\nimport { Button, FormGroup, FormControl, FormLabel } from 'react-bootstrap';\nimport { useHistory } from 'react-router-dom';\nimport axios from 'axios';\n\nexport default function ChangePasswordPage() {\n  const [email, set_email] = useState('');\n  const [password, set_password] = useState('');\n  const [new_password, set_new_password] = useState('');\n  const [new_confirmed_password, set_new_confirmed_password] = useState('');\n\n  const history = useHistory();\n\n  function validate_email() {\n    return email.length > 0 && email.length < 50;\n  }\n\n  function validate_password() {\n    return password.length >= 8 && password.length < 16;\n  }\n\n  function validate_new_password() {\n    return new_password.length >= 8 && new_password.length < 16;\n  }\n\n  function validate_new_confirmed_password() {\n    return (\n      new_confirmed_password.length >= 8 &&\n      new_confirmed_password.length < 16 &&\n      new_confirmed_password === new_password\n    );\n  }\n\n  async function attempt_password_change(event) {\n    event.preventDefault();\n\n    var response = await axios.get('http://localhost:5000/login', {\n      params: { email: email, password: password },\n    });\n    console.log(response);\n    if (response.data.result) {\n      response = await axios.get('http://localhost:5000/change_password', {\n        params: {\n          email: email,\n          password: password,\n          new_password: new_password,\n        },\n      });\n      console.log(response);\n\n      if (response.data.result) {\n        history.push('/');\n      }\n    }\n  }\n\n  return (\n    <div>\n      <form onSubmit={attempt_password_change}>\n        <FormGroup controlId=\"email\" bsSize=\"large\">\n          <FormLabel>Email</FormLabel>\n          <FormControl\n            autoFocus\n            type=\"email\"\n            value={email}\n            onChange={(e) => set_email(e.target.value)}\n          />\n        </FormGroup>\n\n        <FormGroup controlId=\"password\" bsSize=\"large\">\n          <FormLabel>Password</FormLabel>\n\n          <FormControl\n            value={password}\n            onChange={(e) => set_password(e.target.value)}\n            type=\"password\"\n          />\n        </FormGroup>\n\n        <FormGroup controlId=\"new_password\" bsSize=\"large\">\n          <FormLabel>New Password</FormLabel>\n\n          <FormControl\n            value={new_password}\n            onChange={(e) => set_new_password(e.target.value)}\n            type=\"password\"\n          />\n        </FormGroup>\n\n        <FormGroup controlId=\"new_confirmed_password\" bsSize=\"large\">\n          <FormLabel>Confirm New Password</FormLabel>\n\n          <FormControl\n            value={new_confirmed_password}\n            onChange={(e) => set_new_confirmed_password(e.target.value)}\n            type=\"password\"\n          />\n        </FormGroup>\n\n        <Button\n          block\n          bsSize=\"large\"\n          disabled={\n            !validate_new_password() ||\n            !validate_new_confirmed_password() ||\n            !validate_email() ||\n            !validate_password()\n          }\n          type=\"submit\"\n        >\n          Login\n        </Button>\n      </form>\n    </div>\n  );\n}\n","import React, { useState } from 'react';\nimport { Button, FormGroup, FormControl, FormLabel } from 'react-bootstrap';\nimport { useHistory } from 'react-router-dom';\nimport axios from 'axios';\n\nexport default function ForgotPasswordPage() {\n  const [email, set_email] = useState('');\n\n  const history = useHistory();\n\n  function validate_email() {\n    return email.length > 0 && email.length < 50;\n  }\n\n  async function attempt_password_change(event) {\n    event.preventDefault();\n\n    var response = await axios.get(\n      'http://localhost:5000/forgot_password_get_change_password_link',\n      {\n        params: { email: email },\n      }\n    );\n    console.log(response);\n  }\n\n  return (\n    <div>\n      <form onSubmit={attempt_password_change}>\n        <h1>Forgot your password? Get link to change it.</h1>\n        <FormGroup controlId=\"email\" bsSize=\"large\">\n          <FormLabel>Email</FormLabel>\n          <FormControl\n            autoFocus\n            type=\"email\"\n            value={email}\n            onChange={(e) => set_email(e.target.value)}\n          />\n        </FormGroup>\n\n        <Button block bsSize=\"large\" disabled={!validate_email()} type=\"submit\">\n          Send Email\n        </Button>\n      </form>\n      <Button\n        block\n        bsSize=\"large\"\n        onClick={() => {\n          history.goBack();\n        }}\n      >\n        Cancel\n      </Button>\n    </div>\n  );\n}\n","import React from 'react';\nimport Toolbar from '../../components/toolbar/toolbar';\nimport Collections from '../../components/collections/collections';\n\nexport default function CollectionsPage(props) {\n  const displayMyProfile =\n    localStorage.getItem('userID') === props.location.state.uploaderID\n      ? true\n      : false;\n\n  return (\n    <React.Fragment>\n      <Toolbar />\n      <Collections\n        userID={props.location.state.uploaderID}\n        displayMyProfile={displayMyProfile}\n      />\n    </React.Fragment>\n  );\n}\n","import React, { Component } from 'react';\nimport axios from 'axios';\nimport './CollectionImage.css';\nimport IconButton from '@material-ui/core/IconButton';\nimport { withStyles } from '@material-ui/core';\nimport FavoriteIcon from '@material-ui/icons/Favorite';\nimport ShoppingCartIcon from '@material-ui/icons/ShoppingCart';\nimport HighlightOffIcon from '@material-ui/icons/HighlightOff';\nimport PostModal from '../../../Modals/PostModal/PostModal';\nimport AddedToCartModal from '../../../Modals/AddedToCartModal/AddedToCartModal';\n\n// matrial-ui component style override\nconst styles = {\n  root: {\n    position: 'absolute',\n    color: 'rgba(255, 255, 255,1)',\n  },\n  likeIcon: {\n    width: '50%',\n    height: '10%',\n  },\n  removeIcon: {\n    width: '95%',\n    height: '10%',\n  },\n  likeButton: {\n    bottom: '0%',\n    left: '5%',\n    width: '20%',\n    height: '15%',\n  },\n  buy: {\n    bottom: '0%',\n    left: '80%',\n    width: '20%',\n    height: '15%',\n  },\n  remove: {\n    right: '0%',\n    top: '0%',\n    width: '15%',\n    height: '25%',\n    '&:hover': {\n      backgroundColor: 'rgba(234, 241, 223, 0.26)',\n    },\n  },\n};\n\nclass CollectionImage extends Component {\n  constructor(props) {\n    super(props);\n\n    // CreateRef is used to access the DOM\n    // after accessing the DOM, we can get the height of each ImageCard\n    this.imageRef = React.createRef();\n    this.setOpenPostModal = this.setOpenPostModal.bind(this);\n    this.setAddedToCartModal = this.setAddedToCartModal.bind(this);\n    this.setCartStatus = this.setCartStatus.bind(this);\n    this.setNumLikesDummy = this.setNumLikesDummy.bind(this);\n    this.setNumLikes = this.setNumLikes.bind(this);\n    this.setRelatedImagesClicked = this.setRelatedImagesClicked.bind(this);\n\n    this.state = {\n      openPostModal: false,\n      openRelatedPostModal: false,\n      openCartAddedModal: false,\n      cartStatus: '',\n      spans: 0,\n      animateImages: '',\n      numLikes: this.props.image.num_likes,\n      relatedImageClicked: {},\n    };\n\n    this.collection_id = props.image.collection_id;\n    this.image_id = props.image.id;\n  }\n\n  componentDidMount() {\n    this.imageRef.current.addEventListener('load', this.setSpans);\n    setTimeout(() => {\n      this.setState({\n        animateImages: 'image-container-animate',\n      });\n    }, 100);\n\n    console.log(`isMyCollection=${this.props.isMyCollection}`);\n  }\n\n  setSpans = () => {\n    if (this.imageRef.current != null) {\n      const height = this.imageRef.current.clientHeight;\n      const spansRows = Math.ceil(height / 10);\n      this.setState({ spans: spansRows });\n    }\n  };\n\n  setAddedToCartModal = (newState) => {\n    this.setState({ openCartAddedModal: newState });\n  };\n\n  setCartStatus = (newState) => {\n    this.setState({ cartStatus: newState });\n  };\n\n  setOpenPostModal = (newState) => {\n    this.setState({ openPostModal: newState });\n  };\n\n  setNumLikes = (newState) => {\n    this.setState({ numLikes: newState });\n  };\n\n  setNumLikesDummy = () => {\n    console.log('dummy like for related image');\n  };\n\n  setRelatedImagesClicked = (newState) => {\n    console.log(newState);\n    this.setState({\n      relatedImageClicked: newState,\n      openPostModal: false,\n      openRelatedPostModal: true,\n    });\n  };\n\n  handleBuyClicked = (e) => {\n    e.stopPropagation();\n\n    const apiAddToCart = (imageID, setModal, setCartStatus) => {\n      axios({\n        method: 'POST',\n        url: 'http://localhost:5000/add_purchase',\n        params: {\n          save_for_later: 0,\n          purchased: 0,\n          image_id: String(imageID),\n        },\n      }).then((response) => {\n        if (response.data.result !== false) {\n          setModal(true);\n          setCartStatus('added');\n        }\n      });\n    };\n\n    const apiRemoveFromCart = (imageID, setModal, setCartStatus) => {\n      axios({\n        method: 'POST',\n        url: 'http://localhost:5000/delete_item_from_cart',\n        params: {\n          image_id: String(imageID),\n        },\n      }).then((response) => {\n        if (response.data.result !== false) {\n          setModal(true);\n          setCartStatus('removed');\n        }\n      });\n    };\n\n    axios({\n      url: 'http://localhost:5000/item_is_in_cart',\n      params: { image_id: this.props.image.id },\n    }).then((response) => {\n      console.log(response);\n      if (!response.data.result) {\n        apiAddToCart(\n          this.props.image.id,\n          this.setAddedToCartModal,\n          this.setCartStatus\n        );\n      } else {\n        apiRemoveFromCart(\n          this.props.image.id,\n          this.setAddedToCartModal,\n          this.setCartStatus\n        );\n      }\n    });\n  };\n\n  handleImageClicked = (e) => {\n    this.setState({ openPostModal: true });\n  };\n\n  handleDeleteClicked = (e) => {\n    const deletePhotoFromCollection = () => {\n      axios({\n        method: 'GET',\n        url: 'http://localhost:5000/delete_photo_from_collection',\n        params: { collection_id: this.collection_id, image_id: this.image_id }, //user_id: 1\n      }).then((res) => {\n        console.log(res);\n      });\n    };\n\n    deletePhotoFromCollection();\n    e.stopPropagation();\n    window.location.reload();\n  };\n\n  render() {\n    let component;\n\n    component = (\n      <React.Fragment>\n        {/* // <div style={{ gridRowEnd: `span ${this.state.spans}` }}> */}\n        <div\n          className={`image-container ${this.state.animateImages}`}\n          onClick={this.handleImageClicked}\n        >\n          <div className=\"icon-bar\"></div>\n\n          <img\n            className=\"image-size\"\n            ref={this.imageRef}\n            src={`data:image/jpg;base64,${this.props.image.img}`}\n            alt={this.props.caption}\n          />\n\n          <IconButton\n            classes={{\n              root: `${this.props.classes.root} ${this.props.classes.likeButton}`,\n            }}\n            variant=\"contained\"\n            onClick={this.handleLikeClicked}\n          >\n            <FavoriteIcon classes={{ root: this.props.classes.likeSize }} />\n            <div className=\"num-likes\">{this.state.numLikes}</div>\n          </IconButton>\n\n          <IconButton\n            classes={{\n              root: `${this.props.classes.root} ${this.props.classes.buy}`,\n            }}\n            variant=\"contained\"\n            onClick={this.handleBuyClicked}\n          >\n            <ShoppingCartIcon />\n          </IconButton>\n          {this.props.isMyCollection === 'true' ? (\n            <IconButton\n              variant=\"contained\"\n              classes={{\n                root: `${this.props.classes.root} ${this.props.classes.remove}`,\n              }}\n              onClick={this.handleDeleteClicked}\n            >\n              <HighlightOffIcon\n                classes={{ root: `${this.props.classes.removeIcon}` }}\n              />\n            </IconButton>\n          ) : null}\n        </div>\n        {this.state.openPostModal ? (\n          <div\n            className=\"modal-wrapper\"\n            onClick={() => {\n              this.setState({ openPostModal: false });\n            }}\n          >\n            <PostModal\n              openModal={true}\n              setOpenModal={this.setOpenPostModal}\n              imageID={this.props.image.id}\n              url={this.props.image.img}\n              caption={this.props.image.caption}\n              price={this.props.image.price}\n              title={this.props.image.title}\n              uploader={this.props.image.uploader}\n              setNumLikes={this.setNumLikes}\n              setRelatedImagesClicked={this.setRelatedImagesClicked}\n            />\n          </div>\n        ) : null}\n\n        {this.state.openRelatedPostModal ? (\n          <div\n            className=\"modal-wrapper\"\n            onClick={() => {\n              this.setState({ openRelatedPostModal: false });\n            }}\n          >\n            this.state.relatedImageClicked ?\n            <PostModal\n              openModal={true}\n              setOpenModal={this.setOpenPostModal}\n              imageID={this.state.relatedImageClicked.id}\n              url={this.state.relatedImageClicked.img}\n              caption={this.state.relatedImageClicked.caption}\n              price={this.state.relatedImageClicked.price}\n              title={this.state.relatedImageClicked.title}\n              uploader={this.state.relatedImageClicked.uploader}\n              setNumLikes={this.setNumLikesDummy}\n              setRelatedImagesClicked={this.setRelatedImagesClicked}\n            />\n          </div>\n        ) : null}\n\n        {this.state.openCartAddedModal ? (\n          <div\n            className=\"modal-wrapper\"\n            onClick={() => {\n              this.setState({ openCartAddedModal: false });\n            }}\n          >\n            <AddedToCartModal\n              openModal={true}\n              cartStatus={this.state.cartStatus}\n            />\n          </div>\n        ) : null}\n      </React.Fragment>\n    );\n\n    return <React.Fragment>{component}</React.Fragment>;\n  }\n}\n\nexport default withStyles(styles)(CollectionImage);\n","import React, { useState, useEffect } from 'react';\nimport './CollectionFeed.css';\nimport CollectionImage from '../collectionImage/CollectionImage';\n\nconst CollectionFeed = (props) => {\n  const [collectionImgs, setCollectionImgs] = useState([]);\n  const [modalIsOpen, setModalIsOpen] = useState(false);\n\n  const { retrievedImgs } = props;\n\n  useEffect(() => {\n    setCollectionImgs(retrievedImgs);\n  }, [retrievedImgs]);\n\n  return (\n    <React.Fragment>\n      {collectionImgs.length === 0 && props.loading === false ? (\n        <h1 style={{ textAlign: 'center' }}>\n          There are no photos in this collection\n        </h1>\n      ) : (\n        <div className=\"image-grid\">\n          {collectionImgs.map((image, index) => {\n            if (image === null) {\n              return null;\n            }\n\n            return (\n              <CollectionImage\n                key={index}\n                image={image}\n                openBookmarkModal={modalIsOpen}\n                setOpenBookmarkModal={setModalIsOpen}\n                isMyCollection={props.isMyCollection}\n              />\n            );\n          })}\n        </div>\n      )}\n    </React.Fragment>\n  );\n};\n\nexport default CollectionFeed;\n","import React, { useState, useEffect } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport axios from 'axios';\nimport './CollectionDataPage.css';\nimport LockIcon from '@material-ui/icons/Lock';\nimport Button from '@material-ui/core/Button';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Toolbar from '../../components/toolbar/toolbar';\nimport CollectionFeed from '../../components/collections/collection/collectionDataPage/CollectionFeed';\n\nexport default function CollectionDataPage(props) {\n  const [username, setUsername] = useState(props.location.state.creator_id);\n  const [collectionImages, setCollectionImages] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [privateCollection, setPrivateCollection] = useState(\n    props.location.state.private\n  );\n\n  const history = useHistory();\n\n  useEffect(() => {\n    axios({\n      url: 'http://localhost:5000/get_user_username',\n      params: { user_id: props.location.state.creator_id },\n    }).then((response) => {\n      if (response.data.result) {\n        setUsername(response.data.result);\n      }\n    });\n    // eslint-disable-next-line\n  }, []);\n\n  const [anchorEl, setAnchorEl] = useState(null);\n  // the below line is to get rid of warning messages in useEffect\n  const {\n    location: {\n      state: { collection_id: collectionID },\n    },\n  } = props;\n\n  console.log(props.location.state);\n\n  useEffect(() => {\n    console.log('getting collections data');\n    const getCollectionsById = () => {\n      axios({\n        method: 'GET',\n        url: 'http://localhost:5000/get_collection_data',\n        params: {\n          collection_id: collectionID,\n        },\n      }).then((response) => {\n        console.log(response);\n        if (response.data.result) {\n          setCollectionImages(response.data.result);\n        }\n        setLoading(false);\n      });\n    };\n    getCollectionsById();\n  }, [privateCollection, collectionID]);\n\n  const deleteCollection = () => {\n    axios({\n      method: 'POST',\n      url: 'http://localhost:5000/delete_collection',\n      params: {\n        collection_id: props.location.state.collection_id,\n      },\n    }).then((response) => {\n      console.log(response);\n      if (response.data.result) {\n        history.goBack();\n      }\n    });\n  };\n\n  const updateCollectionsPrivate = (privValue) => {\n    axios({\n      method: 'POST',\n      url: 'http://localhost:5000/update_collections_private',\n      params: {\n        collection_id: props.location.state.collection_id,\n        private: privValue,\n      },\n    }).then((response) => {\n      console.log(response);\n      if (privValue === 0) {\n        setPrivateCollection('false');\n      } else {\n        setPrivateCollection('true');\n      }\n    });\n  };\n\n  const handleEditCollectionClose = () => {\n    setAnchorEl(null);\n  };\n\n  const handleChangePrivateClicked = () => {\n    if (privateCollection === 'true') {\n      updateCollectionsPrivate(0);\n    } else {\n      updateCollectionsPrivate(1);\n    }\n  };\n\n  const handleEditCollectionClicked = (event) => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  // console.log(collectionImages[0].img);\n\n  return (\n    <React.Fragment>\n      <Toolbar />\n      <div className=\"collectionDataWrapper\">\n        <div className=\"circle-wrapper\">\n          <div className=\"circleBase\">\n            <div className=\"collection-info\">\n              {privateCollection === 'true' ? <LockIcon /> : null}\n              <h1>{props.location.state.collection_name}</h1>\n              <p>by @{username}</p>\n              <p>Total photos: {collectionImages.length}</p>\n\n              {props.location.state.isMyCollection === 'true' ? (\n                <Button\n                  aria-controls=\"simple-menu\"\n                  aria-haspopup=\"true\"\n                  variant=\"outlined\"\n                  color=\"primary\"\n                  onClick={handleEditCollectionClicked}\n                >\n                  Edit collection\n                </Button>\n              ) : null}\n              <Menu\n                id=\"simple-menu\"\n                anchorEl={anchorEl}\n                keepMounted\n                open={Boolean(anchorEl)}\n                onClose={handleEditCollectionClose}\n              >\n                {privateCollection === 'true' ? (\n                  <MenuItem onClick={handleChangePrivateClicked}>\n                    Make Public\n                  </MenuItem>\n                ) : (\n                  <MenuItem onClick={handleChangePrivateClicked}>\n                    Make Private\n                  </MenuItem>\n                )}\n                <MenuItem\n                  onClick={() => {\n                    deleteCollection();\n                  }}\n                >\n                  Delete collection\n                </MenuItem>\n              </Menu>\n            </div>\n          </div>\n        </div>\n\n        <CollectionFeed\n          retrievedImgs={collectionImages}\n          isMyCollection={props.location.state.isMyCollection}\n          loading={loading}\n        />\n      </div>\n      <h2 style={{ textAlign: 'center' }}>{loading && 'Loading...'}</h2>\n    </React.Fragment>\n  );\n}\n","import React from \"react\";\nimport Button from \"@material-ui/core/Button\";\nimport \"./ShoppingItem.css\";\nimport axios from \"axios\";\n\nexport default function ShoppingItem(props) {\n  const updatePurchase = (save_later_value) => {\n    axios({\n      method: \"POST\",\n      url: \"http://localhost:5000/update_user_purchases_details\",\n      params: {\n        save_for_later: save_later_value,\n        purchased: 0,\n        image_id: props.image_id,\n      },\n    }).then((response) => {\n      console.log(response);\n      if (response.data.result !== false) {\n        props.setMoveButtonClicked(!props.moveButtonClicked);\n      }\n    });\n  };\n\n  const deleteItem = () => {\n    axios({\n      method: \"POST\",\n      url: \"http://localhost:5000/delete_item_from_cart\",\n      params: {\n        image_id: props.image_id,\n      },\n    }).then((response) => {\n      if (response.data.result !== false) {\n        console.log(response);\n        props.setDeleteButtonClicked(!props.deleteButtonClicked);\n      }\n    });\n  };\n\n  const handSaveLaterOrMoveCartButton = () => {\n    console.log(\"save later clicked\");\n    if (props.save_for_later === true) {\n      console.log(\"save_for_later is true->change to move to cart\");\n      updatePurchase(0);\n    } else {\n      updatePurchase(1);\n    }\n  };\n\n  const handleDeleteButton = () => {\n    deleteItem();\n  };\n\n  console.log(props.save_for_later);\n\n  return (\n    <React.Fragment>\n      <div className=\"shopping-item\">\n        <div className=\"shopping-item-grid\">\n          <div className=\"image\">\n            <img\n              src={`data:image/jpg;base64,${props.img}`}\n              alt={props.caption}\n            />\n          </div>\n          <div className=\"image-info\">\n            <h2>Title: {props.title}</h2>\n            <h2>Caption:</h2>\n            <p>{props.caption}</p>\n            <h3>Price: ${props.price}</h3>\n\n            <Button\n              variant=\"outlined\"\n              color=\"primary\"\n              onClick={handSaveLaterOrMoveCartButton}\n            >\n              {props.save_for_later === true\n                ? \"Move to Cart\"\n                : \"Save for Later\"}\n            </Button>\n            <Button\n              variant=\"outlined\"\n              color=\"primary\"\n              onClick={handleDeleteButton}\n            >\n              Delete\n            </Button>\n          </div>\n        </div>\n      </div>\n    </React.Fragment>\n  );\n}\n","import React, { useState, useEffect } from 'react';\nimport ToolBar from '../../components/toolbar/toolbar';\nimport ShoppingItem from './shoppingItem/ShoppingItem';\nimport Button from '@material-ui/core/Button';\nimport axios from 'axios';\n\nimport { Redirect } from 'react-router-dom';\n\nimport './ShoppingCartPage.css';\n\nexport default function ShoppingCart() {\n  const [checkoutButtonClicked, setCheckoutButtonClicked] = useState(false);\n\n  const [shoppingCartItems, setShoppingCartItems] = useState([]);\n\n  const [savedLaterItems, setSavedLaterItems] = useState([]);\n\n  const [moveButtonClicked, setMoveButtonClicked] = useState(false);\n\n  const [deleteButtonClicked, setDeleteButtonClicked] = useState(false);\n\n  const getUserNotPurchasedItems = () => {\n    axios({\n      method: 'GET',\n      url: 'http://localhost:5000/get_user_purchases',\n      params: {\n        save_for_later: 0,\n        purchased: 0,\n      },\n    }).then((response) => {\n      if (response.data.result !== false) {\n        console.log(response);\n        setShoppingCartItems(response.data.result);\n      }\n\n      getUserSavedLaterItems();\n    });\n  };\n\n  const getUserSavedLaterItems = () => {\n    axios({\n      method: 'GET',\n      url: 'http://localhost:5000/get_user_purchases',\n      params: {\n        save_for_later: 1,\n        purchased: 0,\n      },\n    }).then((response) => {\n      if (response.data.result !== false) {\n        console.log(response);\n        if (response.data) {\n          console.log(response.data.result);\n          setSavedLaterItems(response.data.result);\n        }\n      }\n    });\n  };\n\n  useEffect(() => {\n    getUserNotPurchasedItems();\n    console.log('rerendering shopping page');\n    // eslint-disable-next-line\n  }, [moveButtonClicked, deleteButtonClicked]);\n\n  const handleCheckoutButton = () => {\n    setCheckoutButtonClicked(true);\n  };\n\n  const shoppingItems = shoppingCartItems.map((item) => {\n    //console.log(item);\n    return (\n      <ShoppingItem\n        key={item.image_id}\n        caption={item.caption}\n        image_id={item.image_id}\n        img={item.img}\n        price={item.price}\n        purchased={item.purchased}\n        save_for_later={item.save_for_later}\n        title={item.title}\n        setMoveButtonClicked={setMoveButtonClicked}\n        moveButtonClicked={moveButtonClicked}\n        setDeleteButtonClicked={setDeleteButtonClicked}\n        deleteButtonClicked={deleteButtonClicked}\n      />\n    );\n  });\n\n  //console.log(savedLaterItems);\n\n  const savedLaterItemsComponents = savedLaterItems.map((item) => {\n    //console.log(item);\n    return (\n      <ShoppingItem\n        key={item.image_id}\n        caption={item.caption}\n        image_id={item.image_id}\n        img={item.img}\n        price={item.price}\n        purchased={item.purchased}\n        save_for_later={item.save_for_later}\n        title={item.title}\n        setMoveButtonClicked={setMoveButtonClicked}\n        moveButtonClicked={moveButtonClicked}\n        setDeleteButtonClicked={setDeleteButtonClicked}\n        deleteButtonClicked={deleteButtonClicked}\n      />\n    );\n  });\n\n  let subTotal = 0;\n  shoppingCartItems.forEach((item) => {\n    subTotal += parseFloat(item.price);\n  });\n\n  console.log(subTotal);\n\n  const checkoutComponent = (\n    <Redirect\n      push\n      to={{\n        pathname: `/checkout`,\n        state: {\n          totalPrice: `${Number(subTotal).toFixed(2)}`,\n        },\n      }}\n    />\n  );\n\n  console.log(shoppingItems);\n\n  let componentsRender;\n  if (checkoutButtonClicked) {\n    componentsRender = checkoutComponent;\n  } else {\n    componentsRender = (\n      <div className=\"shopping-cart-page\">\n        <div className=\"shopping-cart\">\n          <h1>My Shopping Cart</h1>\n          <div className=\"shopping-cart-grid\">\n            <div className=\"shopping-cart-items\">{shoppingItems}</div>\n            <div className=\"shopping-cart-subtotal\">\n              <h2>\n                Subtotal ({shoppingCartItems.length} items): $\n                {Number(subTotal).toFixed(2)}\n              </h2>\n\n              {shoppingCartItems.length > 0 ? (\n                <Button\n                  variant=\"outlined\"\n                  color=\"primary\"\n                  onClick={handleCheckoutButton}\n                >\n                  Proceed to Checkout\n                </Button>\n              ) : null}\n            </div>\n          </div>\n        </div>\n        <div className=\"save-for-later\">\n          <h1>Saved for later</h1>\n          <div className=\"shopping-cart-grid\">\n            <div className=\"shopping-cart-items\">\n              {savedLaterItemsComponents}\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <React.Fragment>\n      <ToolBar />\n      <div className=\"shopping-cart-wrapper\">{componentsRender}</div>\n    </React.Fragment>\n  );\n}\n","import React from 'react';\nimport './CheckoutItem.css';\n\nexport default function CheckoutItem(props) {\n  return (\n    <React.Fragment>\n      <div className=\"shopping-item\">\n        <div className=\"shopping-item-grid\">\n          <div className=\"image\">\n            <img\n              src={`data:image/jpg;base64,${props.img}`}\n              alt={props.caption}\n            />\n          </div>\n          <div className=\"image-info\">\n            <h2>Title: {props.title}</h2>\n            <h3>Price: ${Number(props.price).toFixed(2)}</h3>\n          </div>\n        </div>\n      </div>\n    </React.Fragment>\n  );\n}\n","import React from 'react';\nimport ReactDom from 'react-dom';\nimport './ConfirmationModal.css';\nimport Button from '@material-ui/core/Button';\nimport { useHistory } from 'react-router-dom';\n\nexport default function CheckoutConfirmationModal(props) {\n  const history = useHistory();\n  if (!props.isOpen) {\n    return null;\n  } else {\n    return ReactDom.createPortal(\n      <React.Fragment>\n        <div className=\"overlay-styles\" />\n        <div className=\"confirmation-modal\">\n          <h3>\n            You order has been approved! Please visit 'My Purchases' in your\n            profile tab to download.\n          </h3>\n          <Button\n            variant=\"contained\"\n            color=\"primary\"\n            onClick={() => {\n              history.replace('/');\n            }}\n          >\n            Return to Main Page\n          </Button>\n        </div>\n      </React.Fragment>,\n      document.getElementById('portal')\n    );\n  }\n}\n","import React, { useState, useEffect } from 'react';\nimport TextField from '@material-ui/core/TextField';\n\nexport default function CardName(props) {\n  const [text, setText] = useState('');\n  const [errorText, setErrorText] = useState('');\n  const [errorValue, setErrorValue] = useState(false);\n  const [firstRender, setFirstRender] = useState(true);\n\n  const { placeOrderClicked } = props;\n\n  useEffect(() => {\n    setFirstRender(false);\n  }, []);\n\n  useEffect(() => {\n    if (firstRender === false) {\n      const result = handleNameCardInput(text);\n      props.setCardNameValidated(result);\n    }\n    // eslint-disable-next-line\n  }, [placeOrderClicked]);\n\n  const handleNameCardInput = (text) => {\n    let patt = /\\w+\\s\\w+/;\n    if (text.length > 0 && patt.test(text)) {\n      setErrorValue(false);\n      setErrorText('');\n      return true;\n    } else {\n      setErrorText('Enter your card name [first name + last name]');\n      setErrorValue(true);\n      return false;\n    }\n  };\n  return (\n    <React.Fragment>\n      <h3>NAME ON CARD</h3>\n      <TextField\n        required\n        error={errorValue}\n        helperText={errorText}\n        onChange={(e) => {\n          setText(e.target.value);\n          handleNameCardInput(e.target.value);\n        }}\n        id=\"outlined-required\"\n        label=\"Required\"\n        variant=\"outlined\"\n      />\n    </React.Fragment>\n  );\n}\n","import React, { useState, useEffect } from 'react';\nimport TextField from '@material-ui/core/TextField';\n\nexport default function CardNum(props) {\n  const [text, setText] = useState('');\n  const [errorText, setErrorText] = useState('');\n  const [errorValue, setErrorValue] = useState(false);\n  const [firstRender, setFirstRender] = useState(true);\n\n  const { placeOrderClicked } = props;\n\n  useEffect(() => {\n    setFirstRender(false);\n  }, []);\n\n  useEffect(() => {\n    if (firstRender === false) {\n      const result = handleCardNumberInput(text);\n      props.setCardNumValidated(result);\n    }\n    // eslint-disable-next-line\n  }, [placeOrderClicked]);\n\n  const handleCardNumberInput = (text) => {\n    let patt = /\\d+/;\n    if (text.length === 16 && patt.test(text)) {\n      setErrorValue(false);\n      setErrorText('');\n      return true;\n    } else {\n      setErrorText('Bank Account should be 16 digits only');\n      setErrorValue(true);\n      return false;\n    }\n  };\n  return (\n    <React.Fragment>\n      <h3>CARD NUMBER</h3>\n      <TextField\n        required\n        error={errorValue}\n        id=\"outlined-required\"\n        label=\"Required\"\n        variant=\"outlined\"\n        helperText={errorText}\n        onChange={(e) => {\n          setText(e.target.value);\n          handleCardNumberInput(e.target.value);\n        }}\n      />\n    </React.Fragment>\n  );\n}\n","import React, { useState, useEffect } from 'react';\nimport TextField from '@material-ui/core/TextField';\n\nexport default function CardMonth(props) {\n  const [text, setText] = useState('');\n  const [errorText, setErrorText] = useState('');\n  const [errorValue, setErrorValue] = useState(false);\n  const [firstRender, setFirstRender] = useState(true);\n\n  const { placeOrderClicked } = props;\n\n  useEffect(() => {\n    setFirstRender(false);\n  }, []);\n\n  useEffect(() => {\n    if (firstRender === false) {\n      const result = handleMonthInput(text);\n      props.setCardMonthValidated(result);\n    }\n    // eslint-disable-next-line\n  }, [placeOrderClicked]);\n\n  const handleMonthInput = (text) => {\n    if (parseInt(text) > 0 && parseInt(text) <= 12) {\n      setErrorValue(false);\n      setErrorText('');\n      return true;\n    } else {\n      setErrorText('Input the correct month [1-12]');\n      setErrorValue(true);\n      return false;\n    }\n  };\n  return (\n    <React.Fragment>\n      <h3>EXPIRY DATE</h3>\n      <div>\n        <TextField\n          required\n          error={errorValue}\n          helperText={errorText}\n          onChange={(e) => {\n            setText(e.target.value);\n            handleMonthInput(e.target.value);\n          }}\n          id=\"outlined-number\"\n          label=\"Month\"\n          type=\"number\"\n          InputLabelProps={{\n            shrink: true,\n          }}\n          variant=\"outlined\"\n        />\n      </div>\n    </React.Fragment>\n  );\n}\n","import React, { useState, useEffect } from 'react';\nimport TextField from '@material-ui/core/TextField';\n\nexport default function (props) {\n  const [text, setText] = useState('');\n  const [errorText, setErrorText] = useState('');\n  const [errorValue, setErrorValue] = useState(false);\n  const [firstRender, setFirstRender] = useState(true);\n\n  const { placeOrderClicked } = props;\n\n  useEffect(() => {\n    setFirstRender(false);\n  }, []);\n\n  useEffect(() => {\n    if (firstRender === false) {\n      const result = handleYearInput(text);\n      props.setCardYearValidated(result);\n    }\n    // eslint-disable-next-line\n  }, [placeOrderClicked]);\n\n  const handleYearInput = (text) => {\n    if (parseInt(text) >= 2020) {\n      setErrorValue(false);\n      setErrorText('');\n      return true;\n    } else {\n      setErrorText('Input the correct year [2020+]');\n      setErrorValue(true);\n      return false;\n    }\n  };\n\n  console.log(errorText);\n  return (\n    <React.Fragment>\n      <div>\n        <TextField\n          required\n          error={errorValue}\n          helperText={errorText}\n          onChange={(e) => {\n            setText(e.target.value);\n            handleYearInput(e.target.value);\n          }}\n          id=\"outlined-number\"\n          label=\"Year\"\n          type=\"number\"\n          InputLabelProps={{\n            shrink: true,\n          }}\n          variant=\"outlined\"\n        />\n      </div>\n    </React.Fragment>\n  );\n}\n","import React, { useState, useEffect } from 'react';\nimport TextField from '@material-ui/core/TextField';\n\nexport default function (props) {\n  const [text, setText] = useState('');\n  const [errorText, setErrorText] = useState('');\n  const [errorValue, setErrorValue] = useState(false);\n  const [firstRender, setFirstRender] = useState(true);\n\n  const { placeOrderClicked } = props;\n\n  useEffect(() => {\n    setFirstRender(false);\n  }, []);\n\n  useEffect(() => {\n    if (firstRender === false) {\n      const result = handleCvvInput(text);\n      props.setCardCvvValidated(result);\n    }\n    // eslint-disable-next-line\n  }, [placeOrderClicked]);\n\n  const handleCvvInput = (text) => {\n    let patt = /\\d+/;\n    if ((parseInt(text.length) === 3) & patt.test(text)) {\n      setErrorValue(false);\n      setErrorText('');\n      return true;\n    } else {\n      setErrorText('Input the correct CVV [3 digits]');\n      setErrorValue(true);\n      return false;\n    }\n  };\n  return (\n    <React.Fragment>\n      <h3>CVC</h3>\n      <div style={{ marginBottom: '10%' }}>\n        <TextField\n          required\n          error={errorValue}\n          helperText={errorText}\n          onChange={(e) => {\n            setText(e.target.value);\n            handleCvvInput(e.target.value);\n          }}\n          id=\"outlined-required\"\n          label=\"Required\"\n          variant=\"outlined\"\n        />\n      </div>\n    </React.Fragment>\n  );\n}\n","import React, { useState, useEffect } from 'react';\nimport './CheckoutPage.css';\nimport ToolBar from '../../components/toolbar/toolbar';\nimport Button from '@material-ui/core/Button';\nimport axios from 'axios';\nimport CheckoutItem from './checkoutItem/CheckoutItem';\nimport { useHistory } from 'react-router-dom';\nimport ConfirmationModal from './ConfirmationModal/ConfirmationModal';\n\nimport CardName from './textfields/CardName';\nimport CardNum from './textfields/CardNum';\nimport CardMonth from './textfields/CardMonth';\nimport CardYear from './textfields/CardYear';\nimport CardCvv from './textfields/CardCvv';\n\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    '& .MuiTextField-root': {\n      margin: theme.spacing(1),\n      width: 'ch',\n    },\n  },\n}));\n\nexport default function CheckoutPage(props) {\n  const [shoppingCartItems, setShoppingCartItems] = useState([]);\n  const [placeOrderClicked, setPlaceOrderClicked] = useState(false);\n  const [cardNumValidated, setCardNumValidated] = useState(false);\n  const [cardNameValidated, setCardNameValidated] = useState(false);\n  const [cardMonthValidated, setCardMonthValidated] = useState(false);\n  const [cardYearValidated, setCardYearValidated] = useState(false);\n  const [cardCvvValidated, setCardCvvValidated] = useState(false);\n  const [confirmationModalOpen, setConfirmationModalOpen] = useState(false);\n  const [loading, setLoading] = useState(false);\n\n  const classes = useStyles();\n  const history = useHistory();\n\n  useEffect(() => {\n    const getUserNotPurchasedItems = () => {\n      axios({\n        method: 'GET',\n        url: 'http://localhost:5000/get_user_purchases',\n        params: {\n          save_for_later: 0,\n          purchased: 0,\n        },\n      }).then((response) => {\n        if (response.data.result !== false) {\n          console.log(response);\n          setShoppingCartItems(response.data.result);\n        }\n      });\n    };\n    getUserNotPurchasedItems();\n  }, []);\n\n  useEffect(() => {\n    const updatePurchase = (img_id) => {\n      axios({\n        method: 'POST',\n        url: 'http://localhost:5000/update_user_purchases_details',\n        params: {\n          save_for_later: 0,\n          purchased: 1,\n          image_id: img_id,\n        },\n      }).then((response) => {\n        console.log(response);\n        setConfirmationModalOpen(true);\n        setLoading(false);\n      });\n    };\n\n    if (\n      cardNumValidated &&\n      cardYearValidated &&\n      cardMonthValidated &&\n      cardNameValidated &&\n      cardCvvValidated\n    ) {\n      setLoading(true);\n      shoppingCartItems.forEach((item) => {\n        console.log(item.image_id);\n        updatePurchase(item.image_id);\n      });\n    }\n    // eslint-disable-next-line\n  }, [\n    cardNumValidated,\n    cardNameValidated,\n    cardYearValidated,\n    cardMonthValidated,\n    cardCvvValidated,\n  ]);\n\n  const handlePlaceOrderButton = () => {\n    setPlaceOrderClicked(!placeOrderClicked);\n  };\n\n  const handleEditButton = () => {\n    history.push('/shopping-cart');\n  };\n\n  const checkoutItemsComponents = shoppingCartItems.map((item) => {\n    //console.log(item);\n    return (\n      <CheckoutItem\n        key={item.image_id}\n        image_id={item.image_id}\n        img={item.img}\n        price={item.price}\n        title={item.title}\n      />\n    );\n  });\n\n  return (\n    <React.Fragment>\n      <ToolBar />\n      <div className=\"checkout-wrapper\" style={{ marginTop: '15%' }}>\n        <h1>Checkout</h1>\n        <div className=\"checkout-grid\">\n          <div className=\"payment-info\">\n            {/* <h2>Fill payment info:</h2> */}\n            <form className={classes.root} noValidate autoComplete=\"off\">\n              <div className=\"cart-details-grid\">\n                <CardNum\n                  placeOrderClicked={placeOrderClicked}\n                  setCardNumValidated={setCardNumValidated}\n                />\n                <CardName\n                  placeOrderClicked={placeOrderClicked}\n                  setCardNameValidated={setCardNameValidated}\n                />\n                <CardMonth\n                  placeOrderClicked={placeOrderClicked}\n                  setCardMonthValidated={setCardMonthValidated}\n                />\n                <CardYear\n                  placeOrderClicked={placeOrderClicked}\n                  setCardYearValidated={setCardYearValidated}\n                />\n                <CardCvv\n                  placeOrderClicked={placeOrderClicked}\n                  setCardCvvValidated={setCardCvvValidated}\n                />\n\n                <Button\n                  variant=\"contained\"\n                  color=\"primary\"\n                  size=\"large\"\n                  onClick={handlePlaceOrderButton}\n                >\n                  PLACE ORDER\n                </Button>\n                <h2>{loading && 'Purchase in progress, please wait...'}</h2>\n              </div>\n            </form>\n          </div>\n          <div className=\"purchase-info\">\n            <Button color=\"primary\" onClick={handleEditButton}>\n              Edit\n            </Button>\n            <h2>Total number of item(s): {shoppingCartItems.length}</h2>\n\n            <h2>\n              TOTAL TO PAY: $\n              {Number(props.location.state.totalPrice).toFixed(2)}\n            </h2>\n            <div className=\"purchased-items\">{checkoutItemsComponents}</div>\n          </div>\n        </div>\n      </div>\n\n      {confirmationModalOpen ? <ConfirmationModal isOpen={true} /> : null}\n    </React.Fragment>\n  );\n}\n","import React from 'react';\nimport ReactDom from 'react-dom';\nimport './PhotoModal.css';\n\nexport default function PhotoModal(props) {\n  if (!props.openModal) {\n    return null;\n  } else {\n    return ReactDom.createPortal(\n      <React.Fragment>\n        <div className=\"photo-modal-overlay\" />\n        <div\n          className=\"photo-modal\"\n          onClick={(e) => {\n            e.stopPropagation();\n          }}\n        >\n          <img\n            className=\"photo-modal-image\"\n            src={`data:image/jpg;base64,${props.image}`}\n            alt={props.caption}\n          />\n        </div>\n      </React.Fragment>,\n      document.getElementById('portal')\n    );\n  }\n}\n","import React from 'react';\nimport ReactDom from 'react-dom';\nimport './DownloadConfirmation.css';\n\nexport default function AddedToCartModal(props) {\n  if (!props.openModal) {\n    return null;\n  } else {\n    return ReactDom.createPortal(\n      <React.Fragment>\n        <div className=\"download-confirmation-overlay\" />\n        <div\n          className=\"download-confirmation-modal\"\n          onClick={(e) => {\n            e.stopPropagation();\n          }}\n        >\n          <h3>\n            Your photo is currently being downloaded. Please check your\n            computers Downloads folder to see your unwatermarked photo!\n          </h3>\n        </div>\n      </React.Fragment>,\n      document.getElementById('confirmationPortal3')\n    );\n  }\n}\n","import React, { Component } from 'react';\nimport axios from 'axios';\nimport './PurchasedImage.css';\nimport IconButton from '@material-ui/core/IconButton';\nimport { withStyles } from '@material-ui/core';\nimport GetAppIcon from '@material-ui/icons/GetApp';\nimport PhotoModal from '../../../../components/Modals/PhotoModal/PhotoModal';\nimport DownloadConfirmationModal from '../../../../components/Modals/DownloadConfirmationModal/DownloadConfirmation';\n\n// matrial-ui component style override\nconst styles = {\n  root: {\n    position: 'absolute',\n    color: 'rgba(255, 255, 255,1)',\n  },\n  likeIcon: {\n    width: '50%',\n    height: '10%',\n  },\n  removeIcon: {\n    width: '95%',\n    height: '10%',\n  },\n  likeButton: {\n    bottom: '0%',\n    left: '5%',\n    width: '20%',\n    height: '15%',\n  },\n  buy: {\n    bottom: '0%',\n    left: '80%',\n    width: '20%',\n    height: '15%',\n  },\n  remove: {\n    right: '0%',\n    top: '0%',\n    width: '15%',\n    height: '25%',\n    '&:hover': {\n      backgroundColor: 'rgba(234, 241, 223, 0.26)',\n    },\n  },\n};\n\nclass PurchasedImage extends Component {\n  constructor(props) {\n    super(props);\n\n    // CreateRef is used to access the DOM\n    // after accessing the DOM, we can get the height of each ImageCard\n    this.imageRef = React.createRef();\n    this.state = {\n      openPhotoModal: false,\n      openDownloadConfirmationModal: false,\n      spans: 0,\n      animateImages: '',\n    };\n\n    this.image_id = props.image.id;\n  }\n\n  componentDidMount() {\n    this.imageRef.current.addEventListener('load', this.setSpans);\n    setTimeout(() => {\n      this.setState({\n        animateImages: 'image-container-animate',\n      });\n    }, 100);\n  }\n\n  setSpans = () => {\n    if (this.imageRef.current != null) {\n      const height = this.imageRef.current.clientHeight;\n      const spansRows = Math.ceil(height / 10);\n      this.setState({ spans: spansRows });\n    }\n  };\n\n  handleImageClicked = (e) => {\n    this.setState({ openPhotoModal: true });\n  };\n\n  handleDownloadClicked = (e) => {\n    const downloadPhoto = () => {\n      axios({\n        method: 'GET',\n        url: 'http://localhost:5000/download',\n        params: { image_id: this.props.image.image_id },\n      }).then((res) => {\n        console.log(res);\n        if (res.data.result) {\n          this.setState({ openDownloadConfirmationModal: true });\n        }\n      });\n    };\n\n    console.log('download clicked');\n    downloadPhoto();\n    e.stopPropagation();\n  };\n\n  render() {\n    document.body.style.overflow = this.state.openPhotoModal\n      ? 'hidden'\n      : 'unset';\n    return (\n      <React.Fragment>\n        {/* <div style={{ gridRowEnd: `span ${this.state.spans}` }}> */}\n        <div\n          className={`image-container ${this.state.animateImages}`}\n          onClick={this.handleImageClicked}\n        >\n          <div className=\"icon-bar\"></div>\n\n          <img\n            className=\"image-size\"\n            ref={this.imageRef}\n            src={`data:image/jpg;base64,${this.props.image.img}`}\n            alt={this.props.caption}\n          />\n          <IconButton\n            classes={{\n              root: `${this.props.classes.root} ${this.props.classes.buy}`,\n            }}\n            variant=\"contained\"\n            onClick={this.handleDownloadClicked}\n          >\n            <GetAppIcon />\n          </IconButton>\n        </div>\n        {/* </div> */}\n\n        {this.state.openPhotoModal ? (\n          <div\n            className=\"photo-modal-wrapper\"\n            onClick={() => {\n              this.setState({ openPhotoModal: false });\n            }}\n          >\n            <PhotoModal\n              openModal={true}\n              image={this.props.image.img}\n              caption={this.props.caption}\n            />\n          </div>\n        ) : null}\n\n        {this.state.openDownloadConfirmationModal ? (\n          <div\n            className=\"photo-modal-wrapper\"\n            onClick={() => {\n              this.setState({ openDownloadConfirmationModal: false });\n            }}\n          >\n            <DownloadConfirmationModal openModal={true} />\n          </div>\n        ) : null}\n      </React.Fragment>\n    );\n  }\n}\n\nexport default withStyles(styles)(PurchasedImage);\n","import React, { useState, useEffect } from 'react';\nimport './MyPurchasesFeed.css';\nimport PurchasedImage from './purchasedImage/PurchasedImage';\n\nconst MyPurchasedFeed = (props) => {\n  const [purchasedImgs, setPurchasedImgs] = useState([]);\n  const { retrievedImgs } = props;\n\n  useEffect(() => {\n    setPurchasedImgs(retrievedImgs);\n  }, [retrievedImgs]);\n\n  console.log(purchasedImgs);\n\n  return (\n    <React.Fragment>\n      <div className=\"image-grid\">\n        {purchasedImgs.map((image) => {\n          if (image === null) {\n            return null;\n          }\n\n          return <PurchasedImage key={image.image_id} image={image} />;\n        })}\n      </div>\n    </React.Fragment>\n  );\n};\n\nexport default MyPurchasedFeed;\n","import React, { useState, useEffect } from \"react\";\nimport \"./MyPurchases.css\";\nimport ToolBar from \"../../components/toolbar/toolbar\";\nimport axios from \"axios\";\nimport MyPurchasesFeed from \"./myPurchasesFeed/MyPurchasesFeed\";\n\nexport default function MyPurchases() {\n  const [boughtItems, setBoughtItems] = useState([]);\n\n  useEffect(() => {\n    getUserNotPaidItems();\n  }, []);\n\n  const getUserNotPaidItems = () => {\n    axios({\n      method: \"GET\",\n      url: \"http://localhost:5000/get_user_purchases\",\n      params: {\n        save_for_later: 0,\n        purchased: 1,\n      },\n    }).then((response) => {\n      if (response.data.result !== false) {\n        console.log(response);\n        setBoughtItems(response.data.result);\n      }\n    });\n  };\n\n  return (\n    <React.Fragment>\n      <ToolBar />\n      <div className=\"my-purchases-wrapper\" style={{ marginTop: \"15%\" }}>\n        <h1>My purchases</h1>\n        <div className=\"my-purchases-feed\">\n          <MyPurchasesFeed retrievedImgs={boughtItems} />\n        </div>\n      </div>\n    </React.Fragment>\n  );\n}\n","import React, { useState, useEffect, useRef, useCallback } from 'react';\nimport '../feed.css';\nimport axios from 'axios';\nimport ImageCard from '../ImageCard/ImageCard';\nimport BookmarkModal from '../../Modals/BookmarkModal/BookmarkModal';\n\nconst RecommendationFeed = () => {\n  const [imgs, setImgs] = useState([]);\n  const [score, setScore] = useState(null);\n  const [modalIsOpen, setModalIsOpen] = useState(false);\n  const [photoIdBookmarked, setPhotoIdBookmarked] = useState(0);\n  const [hasMore, setHasMore] = useState(true);\n  const [loading, setLoading] = useState(false);\n\n  const userLoggedIn = localStorage.getItem('userLoggedIn');\n  const fetchIsCancelled = useRef(false);\n  const cancelAxiosRequest = useRef();\n  const observer = useRef();\n  const lastImageRef = useCallback(\n    (node) => {\n      if (loading) return;\n      if (observer.current) observer.current.disconnect();\n      observer.current = new IntersectionObserver((entries) => {\n        if (entries[0].isIntersecting && hasMore) {\n          setLoading(true);\n\n          setTimeout(() => {\n            fetchRecommendations();\n          }, 1500);\n        }\n      });\n\n      if (node) observer.current.observe(node);\n    },\n    // eslint-disable-next-line\n    [loading, hasMore]\n  );\n\n  useEffect(() => {\n    fetchIsCancelled.current = false;\n    setLoading(true);\n\n    setTimeout(() => {\n      fetchRecommendations();\n    }, 150);\n\n    return () => {\n      if (cancelAxiosRequest.current != null) cancelAxiosRequest.current();\n\n      fetchIsCancelled.current = true;\n      setImgs([]);\n      setHasMore(true);\n    };\n    // eslint-disable-next-line\n  }, []);\n\n  const fetchRecommendations = () => {\n    console.log(`fetching recommendation with a score of ${score}`);\n    axios({\n      method: 'GET',\n      url: 'http://localhost:5000/get_recommended_images',\n      params: { score: score, batch_size: 10 },\n      cancelToken: new axios.CancelToken(\n        (c) => (cancelAxiosRequest.current = c)\n      ),\n    })\n      .then((res) => {\n        console.log(res);\n        if (res.data.result !== false && !fetchIsCancelled.current) {\n          console.log(`setting score to ${res.data.score}`);\n          setScore(res.data.score);\n          setHasMore(true);\n          setLoading(false);\n          setImgs((prevImgs) => {\n            return [...prevImgs, ...res.data.result];\n          });\n        } else if (!fetchIsCancelled.current) {\n          console.log('no more images to return');\n          setLoading(false);\n          setHasMore(false);\n        }\n      })\n      .catch((e) => {\n        if (axios.isCancel(e)) {\n          return;\n        }\n      });\n  };\n\n  return (\n    <React.Fragment>\n      {/* <h2>Found Images: {imgs.length}</h2> */}\n\n      <div className=\"image-grid\">\n        {imgs.map((image, index) => {\n          if (image === null) {\n            return null;\n          }\n\n          if (imgs.length === index + 1) {\n            return (\n              <React.Fragment key={index}>\n                <ImageCard\n                  key={image.id}\n                  image={image}\n                  setOpenBookmarkModal={setModalIsOpen}\n                  setPhotoId={setPhotoIdBookmarked}\n                  userLoggedIn={userLoggedIn}\n                />\n                <div\n                  key={index}\n                  ref={lastImageRef}\n                  style={{\n                    position: 'relative',\n                    bottom: '200px',\n                    // border: '3px solid red',\n                    height: '0%',\n                  }}\n                ></div>\n              </React.Fragment>\n            );\n          } else {\n            return (\n              <ImageCard\n                key={image.id}\n                image={image}\n                setOpenBookmarkModal={setModalIsOpen}\n                setPhotoId={setPhotoIdBookmarked}\n                userLoggedIn={userLoggedIn}\n              />\n            );\n          }\n        })}\n      </div>\n      <h2 style={{ textAlign: 'center' }}>{loading && 'Loading...'}</h2>\n      <h2 style={{ textAlign: 'center' }}>\n        {!hasMore && 'No more images to display'}\n      </h2>\n\n      {modalIsOpen ? (\n        <BookmarkModal\n          openModal={true}\n          setOpenModal={setModalIsOpen}\n          photoId={photoIdBookmarked}\n        ></BookmarkModal>\n      ) : null}\n    </React.Fragment>\n  );\n};\n\nexport default RecommendationFeed;\n","import React from 'react';\nimport './RecommendationsPage.css';\nimport Toolbar from '../../components/toolbar/toolbar';\nimport RecommendationFeed from '../../components/feed/RecommendationFeed/RecommendationFeed';\n\nfunction RecommendationPage() {\n  return (\n    <React.Fragment>\n      <Toolbar />\n      <div className=\"recommendation-gap\" />\n      <h1 className=\"recommendation-text\">Photos recommended for you!</h1>\n      <RecommendationFeed />\n    </React.Fragment>\n  );\n}\n\nexport default RecommendationPage;\n","import React, { useState } from 'react';\nimport ImageUploader from 'react-images-upload';\nimport axios from 'axios';\nimport Button from '@material-ui/core/Button';\nimport { useHistory } from 'react-router-dom';\nimport './UploadProfilePage.css';\n\nexport default function UploadProfilePage(props) {\n  const [img, setImg] = useState(null);\n  const [pictures, setPictures] = useState([]);\n  const [uploadedSuccessfully, setUploadedSuccessfully] = useState(false);\n\n  const history = useHistory();\n\n  const onDrop = (pictureFiles, pictureDataURLs) => {\n    setPictures(pictures.concat(pictureFiles));\n    setImg(pictureDataURLs[0]);\n  };\n\n  //   console.log(img);\n\n  async function postProfilePhoto() {\n    const form_data = new FormData();\n    form_data.append('image', img);\n\n    const response = await axios.post(\n      'http://localhost:5000/post_profile_photo',\n      form_data\n    );\n    return response;\n  }\n\n  const deleteProfilePhoto = () => {\n    axios({\n      method: 'POST',\n      url: 'http://localhost:5000/delete_profile_photo',\n    }).then((response) => {\n      console.log(response);\n      const postPhotoResponse = postProfilePhoto();\n      postPhotoResponse.then((res) => {\n        console.log(res);\n        if (res.data.result === true) {\n          console.log('Uploaded successfully');\n          if (img !== null) {\n            setUploadedSuccessfully(true);\n            setTimeout(() => {\n              history.goBack();\n            }, 500);\n          }\n        }\n      });\n    });\n  };\n\n  const handleSaveProfileClicked = () => {\n    deleteProfilePhoto();\n  };\n\n  return (\n    <React.Fragment>\n      <div className=\"upload-image-wrapper\">\n        <ImageUploader\n          withIcon={true}\n          buttonText=\"Choose image\"\n          onChange={onDrop}\n          imgExtension={['.jpg', '.png', '.jpeg']}\n          maxFileSize={5242880}\n          withPreview={true}\n          singleImage={true}\n          withLabel={true}\n        />\n        {uploadedSuccessfully === true ? (\n          <h2 style={{ textAlign: 'center', color: 'grey' }}>\n            Profile photo is uploaded successfully!\n          </h2>\n        ) : null}\n        <div className=\"profile-button-wrapper\">\n          <div>\n            <Button\n              variant=\"contained\"\n              color=\"primary\"\n              size=\"large\"\n              onClick={handleSaveProfileClicked}\n            >\n              Save Profile Photo\n            </Button>\n          </div>\n          <div style={{ marginBottom: '10%' }}>\n            <Button\n              variant=\"outlined\"\n              color=\"primary\"\n              size=\"large\"\n              onClick={() => {\n                history.goBack();\n              }}\n            >\n              Cancel\n            </Button>\n          </div>\n        </div>\n      </div>\n    </React.Fragment>\n  );\n}\n","import React from 'react';\n\nimport MainPage from './pages/MainPage';\n// import LoginPage from './pages/LoginPage';\nimport RegistrationPage from './pages/RegistrationPage';\nimport ProfilePage from './pages/ProfilePage';\nimport PostInfo from './pages/PostInfo/PostInfo';\nimport CapturePhotoPage from './pages/UploadPhotoPage/CapturePhotoPage';\nimport ChangePasswordPage from './pages/ChangePasswordPage';\nimport ForgotPasswordPage from './pages/ForgotPasswordPage';\n// import EditPostPage from './pages/EditPostPage';\nimport CollectionsPage from './pages/collections/CollectionsPage';\nimport CollectionDataPage from './pages/collections/CollectionsDataPage';\nimport ShoppingCartPage from './pages/shoppingCartPage/ShoppingCartPage';\nimport CheckoutPage from './pages/checkoutPage/CheckoutPage';\nimport MyPurchases from './pages/myPurchases/MyPurchases';\nimport RecommendationsPage from './pages/RecommendationsPage/RecommendationsPage';\nimport UploadProfilePage from './pages/uploadProfilePage/UploadProfilePage';\n\nimport { Switch, Route } from 'react-router-dom';\n\nfunction App() {\n  return (\n    <React.Fragment>\n      <Switch>\n        <Route path=\"/\" exact>\n          <MainPage />\n        </Route>\n        {/* <Route path=\"/login\">\n          <LoginPage />\n        </Route> */}\n        <Route path=\"/signup\">\n          <RegistrationPage />\n        </Route>\n        <Route path=\"/changepassword\" component={ChangePasswordPage} />\n        <Route path=\"/forgotpassword\" component={ForgotPasswordPage} />\n        <Route path=\"/profile/:userID\" component={ProfilePage} />\n        <Route path=\"/uploadphoto\" component={CapturePhotoPage} />\n        <Route path=\"/post-:id\" component={PostInfo} />\n        {/* <Route path=\"/editpost/:id\" component={EditPostPage} /> */}\n        <Route path=\"/collections/:userID\" component={CollectionsPage} />\n        <Route path=\"/collection-:id\" component={CollectionDataPage} />\n        <Route path=\"/shopping-cart\" component={ShoppingCartPage} />\n        <Route path=\"/checkout\" component={CheckoutPage} />\n        <Route path=\"/my-purchases\" component={MyPurchases} />\n        <Route path=\"/recommendations\" component={RecommendationsPage} />\n        <Route path=\"/upload-profile-photo\" component={UploadProfilePage} />\n      </Switch>\n    </React.Fragment>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport * as serviceWorker from './serviceWorker';\nimport { BrowserRouter as Router } from 'react-router-dom';\n\nimport App from './App';\n\nReactDOM.render(\n    <Router>\n      <App />\n    </Router>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}